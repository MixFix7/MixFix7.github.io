/*! For license information please see main.a8c43143.js.LICENSE.txt */
!function(){var e={463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function q(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function V(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ee=null;function Se(e){if(e=wi(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=_i(t),be(e.stateNode,e.type,t))}}function Ce(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Ie(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Ne(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Te(e,t,n)}finally{De=!1,(null!==xe||null!==Ee)&&(Ne(),Ie())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,qe={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(qe,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Qe=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,bt,xt,Et,St,Ct=!1,It=[],Tt=null,Nt=null,Dt=null,At=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function qt(){Ct=!1,null!==Tt&&jt(Tt)&&(Tt=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==Dt&&jt(Dt)&&(Dt=null),At.forEach(Ut),Pt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qt)))}function zt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Vt(Tt,e),null!==Nt&&Vt(Nt,e),null!==Dt&&Vt(Dt,e),At.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var Bt=k.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=wt,a=Bt.transition;Bt.transition=null;try{wt=1,Qt(e,t,n,r)}finally{wt=i,Bt.transition=a}}function Gt(e,t,n,r){var i=wt,a=Bt.transition;Bt.transition=null;try{wt=4,Qt(e,t,n,r)}finally{wt=i,Bt.transition=a}}function Qt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Ht,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Mt(Tt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=wi(i);if(null!==a&&_t(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Ht=null;function Yt(e,t,n,r){if(Ht=null,null!==(e=gi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=an(gn),kn=an(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var Cn=F({},fn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Cn),Tn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Dn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function qn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ce(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Qn=null;function Hn(e){jr(e,0)}function Yn(e){if(Q(ki(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Qn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Qn)){var t=[];Kn(t,Qn,e,_e(e)),Ae(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Qn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,wr=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==mr||mr!==H(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Cr=Sr("animationend"),Ir=Sr("animationiteration"),Tr=Sr("animationstart"),Nr=Sr("transitionend"),Dr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Dr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Or=Ar[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Cr,"onAnimationEnd"),Pr(Ir,"onAnimationIteration"),Pr(Tr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||qr(t,!1,e),qr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,qr("selectionchange",!1,t))}}function Br(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=_e(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Cr:case Ir:case Tr:s=yn;break;case Nr:s=Dn;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Tn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Tn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ki(s),d=null==c?u:ki(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Qr(d))p++;for(d=0,v=h;v;v=Qr(v))d++;for(;0<p-d;)l=Qr(l),p--;for(;0<d-p;)h=Qr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Qr(l),h=Qr(h)}l=null}else l=null;null!==s&&Hr(o,u,s,l,!1),null!==c&&null!==f&&Hr(o,f,c,l,!0)}if("select"===(s=(u=r?ki(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Wn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?ki(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,kr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?qn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,zn=!0)),0<(y=Gr(r,w)).length&&(w=new kn(w,e,null,n,i),o.push({event:w,listeners:y}),g?w.data=g:null!==(g=Vn(n))&&(w.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&qn(e,t)?(e=en(),Zt=Jt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _i(e){return e[di]||null}var bi=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Ci(e,t){xi++,bi[xi]=e.current,e.current=t}var Ii={},Ti=Ei(Ii),Ni=Ei(!1),Di=Ii;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Ni),Si(Ti)}function Oi(e,t,n){if(Ti.current!==Ii)throw Error(a(168));Ci(Ti,t),Ci(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Di=Ti.current,Ci(Ti,e),Ci(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ti),Ci(Ti,e)):Si(Ni),Ci(Ni,n)}var ji=null,Ui=!1,qi=!1;function Vi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!qi&&null!==ji){qi=!0;var e=0,t=wt;try{var n=ji;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Qe(Ze,zi),i}finally{wt=t,qi=!1}}return null}var Bi=[],Wi=0,Ki=null,Gi=0,Qi=[],Hi=0,Yi=null,$i=1,Xi="";function Ji(e,t){Bi[Wi++]=Gi,Bi[Wi++]=Ki,Ki=e,Gi=t}function Zi(e,t,n){Qi[Hi++]=$i,Qi[Hi++]=Xi,Qi[Hi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=Bi[--Wi],Bi[Wi]=null,Gi=Bi[--Wi],Bi[Wi]=null;for(;e===Yi;)Yi=Qi[--Hi],Qi[Hi]=null,Xi=Qi[--Hi],Qi[Hi]=null,$i=Qi[--Hi],Qi[Hi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=k.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,wa=null,ka=null;function _a(){ka=wa=ga=null}function ba(e){var t=ya.current;Si(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ka=wa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ku=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===wa){if(null===ga)throw Error(a(308));wa=e,ga.dependencies={lanes:0,firstContext:e}}else wa=wa.next=e;return t}var Ca=null;function Ia(e){null===Ca?Ca=[e]:Ca.push(e)}function Ta(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function qa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function Ba(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Pi(t)?Di:Ti.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Pi(t)?Di:Ti.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(qa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ha(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Ha(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case b:return(t=Uc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Qa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Qa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var w=d(i,v,g.value,c);if(null===w){null===v&&(v=y);break}e&&v&&null===w.alternate&&t(i,v),u=o(w,u,m),null===f?l=w:f.sibling=w,f=w,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Ha(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ga(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ci(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ci(eo,e),Ci(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=k.ReactCurrentDispatcher,ho=k.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,wo=!1,ko=0,_o=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),wo){o=0;do{if(wo=!1,ko=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(wo)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==ko;return ko=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function Io(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function To(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(ku=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(ku=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Po(e,t){var n=vo,r=Io(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,ku=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ds)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function qo(){return Io().memoizedState}function Vo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Bo(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Go(e,t){return zo(4,4,e,t)}function Qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Qo.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ku=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{wt=n,ho.transition=r}}function eu(){return Io().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ta(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ia(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ta(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){wo=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ds)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Ds.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Wo,useImperativeHandle:Ho,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Xo,useReducer:No,useRef:qo,useState:function(){return No(To)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(Io(),mo.memoizedState,e)},useTransition:function(){return[No(To)[0],Io().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Wo,useImperativeHandle:Ho,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Xo,useReducer:Do,useRef:qo,useState:function(){return Do(To)},useDebugValue:Yo,useDeferredValue:function(e){var t=Io();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Do(To)[0],Io().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wu=k.ReactCurrentOwner,ku=!1;function _u(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function bu(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||ku?(ia&&n&&ea(t),t.flags|=1,_u(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(ku=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(ku=!0)}}return Iu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Os,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Os,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Os,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Os,Rs),Rs|=r;return _u(e,t,i,n),t.child}function Cu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Pi(n)?Di:Ti.current;return a=Ai(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||ku?(ia&&r&&ea(t),t.flags|=1,_u(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Tu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Wu(e,t),Ba(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ai(t,c=Pi(n)?Di:Ti.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Da=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Da?("function"===typeof l&&(qa(t,n,l,r),s=t.memoizedState),(u=Da||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ai(t,s=Pi(n)?Di:Ti.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Wa(t,o,r,s),Da=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Da?("function"===typeof d&&(qa(t,n,d,r),p=t.memoizedState),(c=Da||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Cu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,wu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):_u(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),pa(i),t.flags|=256,_u(e,t,n,r),t.child}var Pu,Ru,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ju(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,qu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return qu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,qu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),ku||s){if(null!==(r=Ds)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),qu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Qi[Hi++]=$i,Qi[Hi++]=Xi,Qi[Hi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_u(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Qu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ti),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ru(e,t),Qu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Qu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=we(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&w(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Qu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Qu(t),null);case 4:return io(),Ru(e,t),null===e&&zr(t.stateNode.containerInfo),Qu(t),null;case 10:return ba(t.type._context),Qu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Qu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Qu(t),null}else 2*Xe()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ci(uo,r?1&n|2:1&n),t):(Qu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Qu(t),6&t.subtreeFlags&&(t.flags|=8192)):Qu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ti),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Sc(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),we(s,u);var l=we(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):w(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Sc(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sc(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=Xe())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,ms(t,e),Xu=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){bs(h);continue}}null!==p?(p.return=d,Zu=p):bs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ws(e,t,n){Zu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=$u;var c=Xu;if($u=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,ks(a,t,n),a=a.sibling;Zu=i,$u=u,Xu=c}_s(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):_s(e)}}function _s(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function bs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Ss=Math.ceil,Cs=k.ReactCurrentDispatcher,Is=k.ReactCurrentOwner,Ts=k.ReactCurrentBatchConfig,Ns=0,Ds=null,As=null,Ps=0,Rs=0,Os=Ei(0),Ls=0,Ms=null,Fs=0,js=0,Us=0,qs=null,Vs=null,zs=0,Bs=1/0,Ws=null,Ks=!1,Gs=null,Qs=null,Hs=!1,Ys=null,$s=0,Xs=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?Xe():-1!==Zs?Zs:Zs=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===Ds||(e===Ds&&(0===(2&Ns)&&(js|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(Bs=Xe()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ds?Ps:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&zi()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ds?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(Ds===e&&Ps===t||(Ws=null,Bs=Xe()+500,dc(e,t));;)try{wc();break}catch(s){pc(e,s)}_a(),Cs.current=o,Ns=i,null!==As?t=0:(Ds=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Vs,Ws);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Vs,Ws),t);break}bc(e,Vs,Ws);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Vs,Ws),r);break}bc(e,Vs,Ws);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=qs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vs,Vs=n,null!==t&&uc(t)),e}function uc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function sc(e,t){for(t&=~Us,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Vs,Ws),ic(e,Xe()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(Bs=Xe()+500,Ui&&zi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Ts.transition,r=wt;try{if(Ts.transition=null,wt=1,e)return e()}finally{wt=r,Ts.transition=n,0===(6&(Ns=t))&&zi()}}function hc(){Rs=Os.current,Si(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Si(Ni),Si(Ti),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:ba(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ds=e,As=e=Oc(e.current,null),Ps=Rs=t,Ls=0,Ms=null,Us=js=Fs=0,Vs=qs=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function pc(e,t){for(;;){var n=As;try{if(_a(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,wo=!1,ko=0,Is.current=null,null===n||null===n.return){Ls=1,Ms=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===qs?qs=[o]:qs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Qs||!Qs.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(k){t=k,As===n&&null!==n&&(As=n=n.return);continue}break}}function vc(){var e=Cs.current;return Cs.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ds||0===(268435455&Fs)&&0===(268435455&js)||sc(Ds,Ps)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(Ds===e&&Ps===t||(Ws=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(_a(),Ns=n,Cs.current=r,null!==As)throw Error(a(261));return Ds=null,Ps=0,Ls}function gc(){for(;null!==As;)kc(As)}function wc(){for(;null!==As&&!Ye();)kc(As)}function kc(e){var t=Es(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?_c(e):As=t,Is.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Rs)))return void(As=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ls=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ls&&(Ls=5)}function bc(e,t,n){var r=wt,i=Ts.transition;try{Ts.transition=null,wt=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ds&&(As=Ds=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Dc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=wt;wt=1;var s=Ns;Ns|=4,Is.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,w=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(a(163))}}catch(_){Sc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ws(n,e,i),$e(),Ns=s,wt=u,Ts.transition=o}else e.current=n;if(Hs&&(Hs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Qs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,zi()}(e,t,n,r)}finally{Ts.transition=i,wt=r}return null}function xc(){if(null!==Ys){var e=kt($s),t=Ts.transition,n=wt;try{if(Ts.transition=null,wt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var w=e.current;for(Zu=w;null!==Zu;){var k=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==k)k.return=u,Zu=k;else e:for(u=w;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(b){Sc(s,s.return,b)}if(s===u){Zu=null;break e}var _=s.sibling;if(null!==_){_.return=s.return,Zu=_;break e}Zu=s.return}}if(Ns=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{wt=n,Ts.transition=t}}return!1}function Ec(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>Xe()-zs?dc(e,0):Us|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Dc(e,t){return Qe(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case D:return(e=Pc(19,n,t,i)).elementType=D,e.lanes=o,e;case R:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:u=10;break e;case I:u=9;break e;case T:u=11;break e;case A:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new qc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function zc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ku=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ku=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ju(e,t,n):(Ci(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ci(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Ku(e,t,n)}(e,t,n);ku=0!==(131072&e.flags)}else ku=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wu(e,t),e=t.pendingProps;var i=Ai(t,Ti.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),_u(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Tu(null,t,r,e,n);break e;case 11:t=bu(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}_u(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Cu(e,t),_u(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return ju(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):_u(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return _u(e,t,t.pendingProps,n),t.child;case 8:case 12:return _u(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ci(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}_u(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,_u(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Wu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),Ba(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Ns)&&(Bs=Xe()+500,zi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Qc(e,1)}},bt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Qc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Qc(e,t)}},Et=function(){return wt},St=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},be=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(a(90));Q(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[wi,ki,_i,Ce,Ie,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},221:function(e,t,n){"use strict";var r=n(424).default,i=n(122).default,a=n(61).default,o=n(156).default,u=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&u(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useTurnstile=void 0;var l,f,h=c(n(791)),d="undefined"!==typeof globalThis?globalThis:window,p="undefined"!==typeof d.turnstile?"ready":"unloaded",v=new Promise((function(e,t){f={resolve:e,reject:t},"ready"===p&&e(void 0)})),m="cf__reactTurnstileOnLoad";function y(e){return{execute:function(t){return window.turnstile.execute(e,t)},reset:function(){return window.turnstile.reset(e)},getResponse:function(){return window.turnstile.getResponse(e)},isExpired:function(){return window.turnstile.isExpired(e)}}}l=function(){if("unloaded"===p){p="loading",d[m]=function(){f.resolve(),p="ready",delete d[m]};var e="".concat("https://challenges.cloudflare.com/turnstile/v0/api.js","?onload=").concat(m,"&render=explicit"),t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("error",(function(){f.reject("Failed to load Turnstile."),delete d[m]})),document.head.appendChild(t)}return v},t.default=function(e){var t=e.id,n=e.className,r=e.style,u=e.sitekey,s=e.action,c=e.cData,f=e.theme,d=e.language,v=e.tabIndex,m=e.responseField,g=e.responseFieldName,w=e.size,k=e.fixedSize,_=e.retry,b=e.retryInterval,x=e.refreshExpired,E=e.appearance,S=e.execution,C=e.userRef,I=e.onVerify,T=e.onLoad,N=e.onError,D=e.onExpire,A=e.onTimeout,P=e.onAfterInteractive,R=e.onBeforeInteractive,O=e.onUnsupported,L=(0,h.useRef)(null),M=(0,h.useState)({onVerify:I,onLoad:T,onError:N,onExpire:D,onTimeout:A,onAfterInteractive:P,onBeforeInteractive:R,onUnsupported:O})[0],F=null!==C&&void 0!==C?C:L;return(0,h.useEffect)((function(){if(F.current){var e=!1,t="";return o(a().mark((function n(){var r,i,o,h;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("ready"===p){n.next=10;break}return n.prev=1,n.next=4,l();case 4:n.next=10;break;case 6:return n.prev=6,n.t0=n.catch(1),null===(r=M.onError)||void 0===r||r.call(M,n.t0),n.abrupt("return");case 10:if(!e&&F.current){n.next=12;break}return n.abrupt("return");case 12:h={sitekey:u,action:s,cData:c,theme:f,language:d,tabindex:v,"response-field":m,"response-field-name":g,size:w,retry:_,"retry-interval":b,"refresh-expired":x,appearance:E,execution:S,callback:function(e){var t;return null===(t=M.onVerify)||void 0===t?void 0:t.call(M,e,o)},"error-callback":function(e){var t;return null===(t=M.onError)||void 0===t?void 0:t.call(M,e,o)},"expired-callback":function(e){var t;return null===(t=M.onExpire)||void 0===t?void 0:t.call(M,e,o)},"timeout-callback":function(){var e;return null===(e=M.onTimeout)||void 0===e?void 0:e.call(M,o)},"after-interactive-callback":function(){var e;return null===(e=M.onAfterInteractive)||void 0===e?void 0:e.call(M,o)},"before-interactive-callback":function(){var e;return null===(e=M.onBeforeInteractive)||void 0===e?void 0:e.call(M,o)},"unsupported-callback":function(){var e;return null===(e=M.onUnsupported)||void 0===e?void 0:e.call(M,o)}},t=window.turnstile.render(F.current,h),o=y(t),null===(i=M.onLoad)||void 0===i||i.call(M,t,o);case 16:case"end":return n.stop()}}),n,null,[[1,6]])})))(),function(){e=!0,t&&window.turnstile.remove(t)}}}),[u,s,c,f,d,v,m,g,w,_,b,x,E,S]),(0,h.useEffect)((function(){M.onVerify=I,M.onLoad=T,M.onError=N,M.onExpire=D,M.onTimeout=A,M.onAfterInteractive=P,M.onBeforeInteractive=R,M.onUnsupported=O}),[I,T,N,D,A,P,R,O]),h.default.createElement("div",{ref:F,id:t,className:n,style:k?i(i({},null!==r&&void 0!==r?r:{}),{},{width:"compact"===w?"130px":"300px",height:"compact"===w?"120px":"65px"}):r})},t.useTurnstile=function(){var e=(0,h.useState)(p),t=r(e,2),n=(t[0],t[1]);return(0,h.useEffect)((function(){"ready"!==p&&v.then((function(){return n(p)}))}),[]),d.turnstile}},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var k=w.prototype=new g;k.constructor=w,v(k,y.prototype),k.isPureReactComponent=!0;var _=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+T(s,0):a,_(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var l=a+T(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+T(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)b.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(m=!1,k(e),!v)if(null!==r(c))v=!0,R(b);else{var t=r(l);null!==t&&O(_,t.startTime-e)}}function b(e,n){v=!1,m&&(m=!1,g(C),C=-1),p=!0;var a=d;try{for(k(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),k(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(_,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,C=-1,I=5,T=-1;function N(){return!(t.unstable_now()-T<I)}function D(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof w)x=function(){w(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=D,x=function(){P.postMessage(null)}}else x=function(){y(D,0)};function R(e){S=e,E||(E=!0,x())}function O(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(C),C=-1):m=!0,O(_,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},637:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useSyncExternalStore,o=r.useRef,u=r.useEffect,s=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,l){var f=o(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=s((function(){function e(e){if(!u){if(u=!0,a=e,e=r(e),void 0!==l&&h.hasValue){var t=h.value;if(l(t,e))return o=t}return o=e}if(t=o,i(a,e))return t;var n=r(e);return void 0!==l&&l(t,n)?t:(a=e,o=n)}var a,o,u=!1,s=void 0===n?null:n;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]}),[t,n,r,l]);var d=a(e,f[0],f[1]);return u((function(){h.hasValue=!0,h.value=d}),[d]),c(d),d}},995:function(e,t,n){"use strict";e.exports=n(637)},897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},156:function(e){function t(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function u(e){t(o,i,a,u,s,"next",e)}function s(e){t(o,i,a,u,s,"throw",e)}u(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},416:function(e,t,n){var r=n(62);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}},e.exports.__esModule=!0,e.exports.default=e.exports},218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},122:function(e,t,n){var r=n(416);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},61:function(e,t,n){var r=n(698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(A){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new T(r||[]);return o(a,"_invoke",{value:E(e,n,u)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}t.wrap=h;var p={};function v(){}function m(){}function y(){}var g={};f(g,s,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(N([])));k&&k!==n&&a.call(k,s)&&(g=k);var _=y.prototype=v.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,u,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,s)}),(function(e){n("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function E(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=S(o,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=d(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function N(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:D}}function D(){return{value:void 0,done:!0}}return m.prototype=y,o(_,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:m,configurable:!0}),m.displayName=f(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,f(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},b(x.prototype),f(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new x(h(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),f(_,l,"Generator"),f(_,s,(function(){return this})),f(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},424:function(e,t,n){var r=n(372),i=n(872),a=n(116),o=n(218);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},36:function(e,t,n){var r=n(698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},62:function(e,t,n){var r=n(698).default,i=n(36);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},116:function(e,t,n){var r=n(897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Dn},SDK_VERSION:function(){return Hr},_DEFAULT_ENTRY_NAME:function(){return Lr},_addComponent:function(){return Ur},_addOrOverwriteComponent:function(){return qr},_apps:function(){return Fr},_clearComponents:function(){return Wr},_components:function(){return jr},_getProvider:function(){return zr},_registerComponent:function(){return Vr},_removeServiceInstance:function(){return Br},deleteApp:function(){return Jr},getApp:function(){return $r},getApps:function(){return Xr},initializeApp:function(){return Yr},onLog:function(){return ti},registerVersion:function(){return ei},setLogLevel:function(){return ni}});var t={};n.r(t),n.d(t,{changeSection:function(){return LN},setIsChangeMode:function(){return MN},setSectionField:function(){return FN},setSections:function(){return ON}});var r,i=n(791),a=n.t(i,2),o=n(250);function u(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){return u(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||c(e,t)||l()}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function m(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){var t=k();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,n)}}function x(){x=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new I(i||[]);return r(o,"_invoke",{value:b(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var f={};function h(){}function p(){}function v(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==d(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=v,r(w,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(_.prototype),s(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function E(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(Ki){return void n(Ki)}u.done?t(s):Promise.resolve(s).then(r,i)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){E(a,r,i,o,u,"next",e)}function u(e){E(a,r,i,o,u,"throw",e)}o(void 0)}))}}function C(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t,n){return I=k()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},I.apply(null,arguments)}function T(e){var t="function"===typeof Map?new Map:void 0;return T=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return I(e,arguments,w(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,e)},T(e)}function N(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function D(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function A(e){return function(e){if(Array.isArray(e))return s(e)}(e)||N(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));var R,O="popstate";function L(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function M(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function F(e,t){return{usr:e.state,key:e.key,idx:t}}function j(e,t,n,r){return void 0===n&&(n=null),P({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?q(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function U(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function q(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function V(e,t,n,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=r.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=r.Pop;var e=p(),t=null==e?null:e-d;d=e,h&&h({action:f,location:y.location,delta:t})}function m(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:U(e);return L(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(P({},l.state,{idx:d}),""));var y={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(O,v),h=e,function(){u.removeEventListener(O,v),h=null}},createHref:function(e){return t(u,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=r.Push;var i=j(y.location,e,t);n&&n(i,e);var a=F(i,d=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(Ki){if(Ki instanceof DOMException&&"DataCloneError"===Ki.name)throw Ki;u.location.assign(o)}c&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,t){f=r.Replace;var i=j(y.location,e,t);n&&n(i,e);var a=F(i,d=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(R||(R={}));var z=new Set(["lazy","caseSensitive","path","id","index","children"]);function B(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map((function(e,i){var a=[].concat(A(n),[i]),o="string"===typeof e.id?e.id:a.join("-");if(L(!0!==e.index||!e.children,"Cannot specify children on an index route"),L(!r[o],'Found a route id collision on id "'+o+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){var u=P({},e,t(e),{id:o});return r[o]=u,u}var s=P({},e,t(e),{id:o,children:void 0});return r[o]=s,e.children&&(s.children=B(e.children,t,a,r)),s}))}function W(e,t,n){void 0===n&&(n="/");var r=ie(("string"===typeof t?q(t):t).pathname||"/",n);if(null==r)return null;var i=K(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=te(i[o],re(r));return a}function K(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(L(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=se([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(L(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),K(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:ee(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=D(G(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function G(e){var t=e.split("/");if(0===t.length)return[];var n,r=u(n=t)||N(n)||c(n)||l(),i=r[0],a=r.slice(1),o=i.endsWith("?"),s=i.replace(/\?$/,"");if(0===a.length)return o?[s,""]:[s];var f=G(a.join("/")),h=[];return h.push.apply(h,A(f.map((function(e){return""===e?s:[s,e].join("/")})))),o&&h.push.apply(h,A(f)),h.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var Q=/^:\w+$/,H=3,Y=2,$=1,X=10,J=-2,Z=function(e){return"*"===e};function ee(e,t){var n=e.split("/"),r=n.length;return n.some(Z)&&(r+=J),t&&(r+=Y),n.filter((function(e){return!Z(e)})).reduce((function(e,t){return e+(Q.test(t)?H:""===t?$:X)}),r)}function te(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=ne({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:se([i,l.pathname]),pathnameBase:ce(se([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=se([i,l.pathnameBase]))}return a}function ne(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);M("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=f(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Ki){return M(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Ki+")."),e}}(c[n]||"",t),e}),{});return{params:l,pathname:u,pathnameBase:s,pattern:e}}function re(e){try{return decodeURI(e)}catch(Ki){return M(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Ki+")."),e}}function ie(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ae(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function oe(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function ue(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=q(e):(L(!(i=P({},e)).pathname||!i.pathname.includes("?"),ae("?","pathname","search",i)),L(!i.pathname||!i.pathname.includes("#"),ae("#","pathname","hash",i)),L(!i.search||!i.search.includes("#"),ae("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?q(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:le(a),hash:fe(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var se=function(e){return e.join("/").replace(/\/\/+/g,"/")},ce=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},le=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},fe=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},he=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n)}(T(Error));var de=m((function e(t,n,r,i){h(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function pe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ve=["post","put","patch","delete"],me=new Set(ve),ye=["get"].concat(ve),ge=new Set(ye),we=new Set([301,302,303,307,308]),ke=new Set([307,308]),_e={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},be={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xe={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Se=function(e){return{hasErrorBoundary:Boolean(e.hasErrorBoundary)}};function Ce(e){var t,n=e.window?e.window:"undefined"!==typeof window?window:void 0,i="undefined"!==typeof n&&"undefined"!==typeof n.document&&"undefined"!==typeof n.document.createElement,a=!i;if(L(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)t=e.mapRouteProperties;else if(e.detectErrorBoundary){var o=e.detectErrorBoundary;t=function(e){return{hasErrorBoundary:o(e)}}}else t=Se;var u,s={},c=B(e.routes,t,void 0,s),l=e.basename||"/",h=P({v7_normalizeFormMethod:!1,v7_prependBasename:!1},e.future),d=null,p=new Set,v=null,m=null,y=null,g=null!=e.hydrationData,w=W(c,e.history.location,l),k=null;if(null==w){var _=Ke(404,{pathname:e.history.location.pathname}),b=We(c);w=b.matches,k=C({},b.route.id,_)}var E,I,T=!w.some((function(e){return e.route.lazy}))&&(!w.some((function(e){return e.route.loader}))||null!=e.hydrationData),N={historyAction:e.history.action,location:e.history.location,matches:w,initialized:T,navigation:_e,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||k,fetchers:new Map,blockers:new Map},O=r.Pop,F=!1,U=!1,q=!1,V=[],z=[],K=new Map,G=0,Q=-1,H=new Map,Y=new Set,$=new Map,X=new Map,J=new Map,Z=!1;function ee(e){N=P({},N,e),p.forEach((function(e){return e(N)}))}function te(t,n){var i,a,o,s=null!=N.actionData&&null!=N.navigation.formMethod&&tt(N.navigation.formMethod)&&"loading"===N.navigation.state&&!0!==(null==(i=t.state)?void 0:i._isRedirect);o=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:s?N.actionData:null;var l=n.loaderData?ze(N.loaderData,n.loaderData,n.matches||[],n.errors):N.loaderData,f=new Map;J.clear();var h=!0===F||null!=N.navigation.formMethod&&tt(N.navigation.formMethod)&&!0!==(null==(a=t.state)?void 0:a._isRedirect);u&&(c=u,u=void 0),U||O===r.Pop||(O===r.Push?e.history.push(t,t.state):O===r.Replace&&e.history.replace(t,t.state)),ee(P({},n,{actionData:o,loaderData:l,historyAction:O,location:t,initialized:!0,navigation:_e,revalidation:"idle",restoreScrollPosition:Je(t,n.matches||N.matches),preventScrollReset:h,blockers:f})),O=r.Pop,F=!1,U=!1,q=!1,V=[],z=[]}function ne(e,t){return re.apply(this,arguments)}function re(){return re=S(x().mark((function t(n,i){var a,o,u,s,c,f,d,p,v,m,y;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("number"!==typeof n){t.next=3;break}return e.history.go(n),t.abrupt("return");case 3:if(a=Ie(N.location,N.matches,l,h.v7_prependBasename,n,null==i?void 0:i.fromRouteId,null==i?void 0:i.relative),o=Te(h.v7_normalizeFormMethod,!1,a,i),u=o.path,s=o.submission,c=o.error,f=N.location,d=P({},d=j(N.location,u,i&&i.state),e.history.encodeLocation(d)),p=i&&null!=i.replace?i.replace:void 0,v=r.Push,!0===p?v=r.Replace:!1===p||null!=s&&tt(s.formMethod)&&s.formAction===N.location.pathname+N.location.search&&(v=r.Replace),m=i&&"preventScrollReset"in i?!0===i.preventScrollReset:void 0,!(y=je({currentLocation:f,nextLocation:d,historyAction:v}))){t.next=16;break}return Me(y,{state:"blocked",location:d,proceed:function(){Me(y,{state:"proceeding",proceed:void 0,reset:void 0,location:d}),ne(n,i)},reset:function(){var e=new Map(N.blockers);e.set(y,xe),ee({blockers:e})}}),t.abrupt("return");case 16:return t.next=18,ae(v,d,{submission:s,pendingError:c,preventScrollReset:m,replace:i&&i.replace});case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t)}))),re.apply(this,arguments)}function ae(e,t,n){return oe.apply(this,arguments)}function oe(){return oe=S(x().mark((function t(n,r,i){var a,o,s,f,h,d,p,v,m,y,g,w,k,_,b;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(I&&I.abort(),I=null,O=n,U=!0===(i&&i.startUninterruptedRevalidation),Qe(N.location,N.matches),F=!0===(i&&i.preventScrollReset),a=u||c,o=i&&i.overrideNavigation,s=W(a,r,l)){t.next=15;break}return f=Ke(404,{pathname:r.pathname}),h=We(a),d=h.matches,p=h.route,Ue(),te(r,{matches:d,loaderData:{},errors:C({},p.id,f)}),t.abrupt("return");case 15:if(!N.initialized||q||!He(N.location,r)||i&&i.submission&&tt(i.submission.formMethod)){t.next=18;break}return te(r,{matches:s}),t.abrupt("return");case 18:if(I=new AbortController,v=Fe(e.history,r,I.signal,i&&i.submission),!i||!i.pendingError){t.next=24;break}y=C({},Be(s).route.id,i.pendingError),t.next=34;break;case 24:if(!(i&&i.submission&&tt(i.submission.formMethod))){t.next=34;break}return t.next=27,ue(v,r,i.submission,s,{replace:i.replace});case 27:if(!(g=t.sent).shortCircuited){t.next=30;break}return t.abrupt("return");case 30:m=g.pendingActionData,y=g.pendingActionError,o=ct(r,i.submission),v=new Request(v.url,{signal:v.signal});case 34:return t.next=36,ce(v,r,s,o,i&&i.submission,i&&i.fetcherSubmission,i&&i.replace,m,y);case 36:if(w=t.sent,k=w.shortCircuited,_=w.loaderData,b=w.errors,!k){t.next=42;break}return t.abrupt("return");case 42:I=null,te(r,P({matches:s},m?{actionData:m}:{},{loaderData:_,errors:b}));case 44:case"end":return t.stop()}}),t)}))),oe.apply(this,arguments)}function ue(e,t,n,r,i){return se.apply(this,arguments)}function se(){return se=S(x().mark((function e(n,i,a,o,u){var c,f,h,d;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===u&&(u={}),ge(),ee({navigation:lt(i,a)}),(f=ut(o,i)).route.action||f.route.lazy){e.next=9;break}c={type:R.error,error:Ke(405,{method:n.method,pathname:i.pathname,routeId:f.route.id})},e.next=14;break;case 9:return e.next=11,Le("action",n,f,o,s,t,l);case 11:if(c=e.sent,!n.signal.aborted){e.next=14;break}return e.abrupt("return",{shortCircuited:!0});case 14:if(!Xe(c)){e.next=19;break}return h=u&&null!=u.replace?u.replace:c.location===N.location.pathname+N.location.search,e.next=18,pe(N,c,{submission:a,replace:h});case 18:return e.abrupt("return",{shortCircuited:!0});case 19:if(!$e(c)){e.next=23;break}return d=Be(o,f.route.id),!0!==(u&&u.replace)&&(O=r.Push),e.abrupt("return",{pendingActionData:{},pendingActionError:C({},d.route.id,c.error)});case 23:if(!Ye(c)){e.next=25;break}throw Ke(400,{type:"defer-action"});case 25:return e.abrupt("return",{pendingActionData:C({},f.route.id,c.data)});case 26:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function ce(e,t,n,r,i,a,o,u,s){return le.apply(this,arguments)}function le(){return le=S(x().mark((function t(n,r,i,a,o,s,h,d,p){var v,m,y,g,w,k,_,b,E,S,C,T,D,A,R,O,L,M,F,j,B;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v=a||ct(r,o),m=o||s||st(v),y=u||c,g=De(e.history,N,i,m,r,q,V,z,$,Y,y,l,d,p),w=f(g,2),k=w[0],_=w[1],Ue((function(e){return!(i&&i.some((function(t){return t.route.id===e})))||k&&k.some((function(t){return t.route.id===e}))})),0!==k.length||0!==_.length){t.next=9;break}return b=Pe(),te(r,P({matches:i,loaderData:{},errors:p||null},d?{actionData:d}:{},b?{fetchers:new Map(N.fetchers)}:{})),t.abrupt("return",{shortCircuited:!0});case 9:return U||(_.forEach((function(e){var t=N.fetchers.get(e.key),n=ft(void 0,t?t.data:void 0);N.fetchers.set(e.key,n)})),E=d||N.actionData,ee(P({navigation:v},E?0===Object.keys(E).length?{actionData:null}:{actionData:E}:{},_.length>0?{fetchers:new Map(N.fetchers)}:{}))),Q=++G,_.forEach((function(e){K.has(e.key)&&Ne(e.key),e.controller&&K.set(e.key,e.controller)})),S=function(){return _.forEach((function(e){return Ne(e.key)}))},I&&I.signal.addEventListener("abort",S),t.next=16,me(N.matches,i,k,_,n);case 16:if(C=t.sent,T=C.results,D=C.loaderResults,A=C.fetcherResults,!n.signal.aborted){t.next=22;break}return t.abrupt("return",{shortCircuited:!0});case 22:if(I&&I.signal.removeEventListener("abort",S),_.forEach((function(e){return K.delete(e.key)})),!(R=Ge(T))){t.next=29;break}return t.next=28,pe(N,R,{replace:h});case 28:return t.abrupt("return",{shortCircuited:!0});case 29:return O=Ve(N,i,k,D,p,_,A,X),L=O.loaderData,M=O.errors,X.forEach((function(e,t){e.subscribe((function(n){(n||e.done)&&X.delete(t)}))})),F=Pe(),j=Re(Q),B=F||j||_.length>0,t.abrupt("return",P({loaderData:L,errors:M},B?{fetchers:new Map(N.fetchers)}:{}));case 35:case"end":return t.stop()}}),t)}))),le.apply(this,arguments)}function fe(e){return N.fetchers.get(e)||be}function he(){return he=S(x().mark((function n(r,i,a,o,h,d){var p,v,m,y,g,w,k,_,b,E,S,T,D,A,R,M,F,j,U,B,J,Z,ne,re,ie,ae,oe,ue;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(ge(),$.delete(r),o.route.action||o.route.lazy){n.next=6;break}return p=Ke(405,{method:d.formMethod,pathname:a,routeId:i}),we(r,i,p),n.abrupt("return");case 6:return v=N.fetchers.get(r),m=ht(d,v),N.fetchers.set(r,m),ee({fetchers:new Map(N.fetchers)}),y=new AbortController,g=Fe(e.history,a,y.signal,d),K.set(r,y),n.next=15,Le("action",g,o,h,s,t,l);case 15:if(w=n.sent,!g.signal.aborted){n.next=19;break}return K.get(r)===y&&K.delete(r),n.abrupt("return");case 19:if(!Xe(w)){n.next=26;break}return K.delete(r),Y.add(r),k=ft(d),N.fetchers.set(r,k),ee({fetchers:new Map(N.fetchers)}),n.abrupt("return",pe(N,w,{submission:d,isFetchActionRedirect:!0}));case 26:if(!$e(w)){n.next=29;break}return we(r,i,w.error),n.abrupt("return");case 29:if(!Ye(w)){n.next=31;break}throw Ke(400,{type:"defer-action"});case 31:return _=N.navigation.location||N.location,b=Fe(e.history,_,y.signal),E=u||c,L(S="idle"!==N.navigation.state?W(E,N.navigation.location,l):N.matches,"Didn't find any matches after fetcher action"),T=++G,H.set(r,T),D=ft(d,w.data),N.fetchers.set(r,D),A=De(e.history,N,S,d,_,q,V,z,$,Y,E,l,C({},o.route.id,w.data),void 0),R=f(A,2),M=R[0],(F=R[1]).filter((function(e){return e.key!==r})).forEach((function(e){var t=e.key,n=N.fetchers.get(t),r=ft(void 0,n?n.data:void 0);N.fetchers.set(t,r),K.has(t)&&Ne(t),e.controller&&K.set(t,e.controller)})),ee({fetchers:new Map(N.fetchers)}),j=function(){return F.forEach((function(e){return Ne(e.key)}))},y.signal.addEventListener("abort",j),n.next=47,me(N.matches,S,M,F,b);case 47:if(U=n.sent,B=U.results,J=U.loaderResults,Z=U.fetcherResults,!y.signal.aborted){n.next=53;break}return n.abrupt("return");case 53:if(y.signal.removeEventListener("abort",j),H.delete(r),K.delete(r),F.forEach((function(e){return K.delete(e.key)})),!(ne=Ge(B))){n.next=60;break}return n.abrupt("return",pe(N,ne));case 60:re=Ve(N,N.matches,M,J,void 0,F,Z,X),ie=re.loaderData,ae=re.errors,N.fetchers.has(r)&&(oe=dt(w.data),N.fetchers.set(r,oe)),ue=Re(T),"loading"===N.navigation.state&&T>Q?(L(O,"Expected pending action"),I&&I.abort(),te(N.navigation.location,{matches:S,loaderData:ie,errors:ae,fetchers:new Map(N.fetchers)})):(ee(P({errors:ae,loaderData:ze(N.loaderData,ie,S,ae)},ue||F.length>0?{fetchers:new Map(N.fetchers)}:{})),q=!1);case 64:case"end":return n.stop()}}),n)}))),he.apply(this,arguments)}function de(){return de=S(x().mark((function n(r,i,a,o,u,c){var f,h,d,p,v,m,y;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f=N.fetchers.get(r),h=ft(c,f?f.data:void 0),N.fetchers.set(r,h),ee({fetchers:new Map(N.fetchers)}),d=new AbortController,p=Fe(e.history,a,d.signal),K.set(r,d),n.next=9,Le("loader",p,o,u,s,t,l);case 9:if(!Ye(v=n.sent)){n.next=17;break}return n.next=13,it(v,p.signal,!0);case 13:if(n.t0=n.sent,n.t0){n.next=16;break}n.t0=v;case 16:v=n.t0;case 17:if(K.get(r)===d&&K.delete(r),!p.signal.aborted){n.next=20;break}return n.abrupt("return");case 20:if(!Xe(v)){n.next=25;break}return Y.add(r),n.next=24,pe(N,v);case 24:return n.abrupt("return");case 25:if(!$e(v)){n.next=30;break}return m=Be(N.matches,i),N.fetchers.delete(r),ee({fetchers:new Map(N.fetchers),errors:C({},m.route.id,v.error)}),n.abrupt("return");case 30:L(!Ye(v),"Unhandled fetcher deferred data"),y=dt(v.data),N.fetchers.set(r,y),ee({fetchers:new Map(N.fetchers)});case 34:case"end":return n.stop()}}),n)}))),de.apply(this,arguments)}function pe(e,t,n){return ve.apply(this,arguments)}function ve(){return ve=S(x().mark((function t(a,o,u){var s,c,f,h,d,p,v,m,y,g;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=(s=void 0===u?{}:u).submission,f=s.replace,h=s.isFetchActionRedirect,o.revalidate&&(q=!0),L(d=j(a.location,o.location,P({_isRedirect:!0},h?{_isFetchActionRedirect:!0}:{})),"Expected a location on the redirect navigation"),!Ee.test(o.location)||!i){t.next=10;break}if(p=e.history.createURL(o.location),v=null==ie(p.pathname,l),n.location.origin===p.origin&&!v){t.next=10;break}return f?n.location.replace(o.location):n.location.assign(o.location),t.abrupt("return");case 10:if(I=null,m=!0===f?r.Replace:r.Push,y=c||st(a.navigation),!(ke.has(o.status)&&y&&tt(y.formMethod))){t.next=18;break}return t.next=16,ae(m,d,{submission:P({},y,{formAction:o.location}),preventScrollReset:F});case 16:case 21:t.next=26;break;case 18:if(!h){t.next=23;break}return t.next=21,ae(m,d,{overrideNavigation:ct(d),fetcherSubmission:y,preventScrollReset:F});case 23:return g=ct(d,y),t.next=26,ae(m,d,{overrideNavigation:g,preventScrollReset:F});case 26:case"end":return t.stop()}}),t)}))),ve.apply(this,arguments)}function me(e,t,n,r,i){return ye.apply(this,arguments)}function ye(){return ye=S(x().mark((function n(r,i,a,o,u){var c,f,h;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([].concat(A(a.map((function(e){return Le("loader",u,e,i,s,t,l)}))),A(o.map((function(n){return n.matches&&n.match&&n.controller?Le("loader",Fe(e.history,n.path,n.controller.signal),n.match,n.matches,s,t,l):{type:R.error,error:Ke(404,{pathname:n.path})}})))));case 2:return c=n.sent,f=c.slice(0,a.length),h=c.slice(a.length),n.next=7,Promise.all([nt(r,a,f,f.map((function(){return u.signal})),!1,N.loaderData),nt(r,o.map((function(e){return e.match})),h,o.map((function(e){return e.controller?e.controller.signal:null})),!0)]);case 7:return n.abrupt("return",{results:c,loaderResults:f,fetcherResults:h});case 8:case"end":return n.stop()}}),n)}))),ye.apply(this,arguments)}function ge(){var e;q=!0,(e=V).push.apply(e,A(Ue())),$.forEach((function(e,t){K.has(t)&&(z.push(t),Ne(t))}))}function we(e,t,n){var r=Be(N.matches,t);Ce(e),ee({errors:C({},r.route.id,n),fetchers:new Map(N.fetchers)})}function Ce(e){var t=N.fetchers.get(e);!K.has(e)||t&&"loading"===t.state&&H.has(e)||Ne(e),$.delete(e),H.delete(e),Y.delete(e),N.fetchers.delete(e)}function Ne(e){var t=K.get(e);L(t,"Expected fetch controller: "+e),t.abort(),K.delete(e)}function Ae(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=dt(fe(r).data);N.fetchers.set(r,i)}}catch(a){n.e(a)}finally{n.f()}}function Pe(){var e,t=[],n=!1,r=D(Y);try{for(r.s();!(e=r.n()).done;){var i=e.value,a=N.fetchers.get(i);L(a,"Expected fetcher: "+i),"loading"===a.state&&(Y.delete(i),t.push(i),n=!0)}}catch(o){r.e(o)}finally{r.f()}return Ae(t),n}function Re(e){var t,n=[],r=D(H);try{for(r.s();!(t=r.n()).done;){var i=f(t.value,2),a=i[0];if(i[1]<e){var o=N.fetchers.get(a);L(o,"Expected fetcher: "+a),"loading"===o.state&&(Ne(a),H.delete(a),n.push(a))}}}catch(u){r.e(u)}finally{r.f()}return Ae(n),n.length>0}function Oe(e){N.blockers.delete(e),J.delete(e)}function Me(e,t){var n=N.blockers.get(e)||xe;L("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);var r=new Map(N.blockers);r.set(e,t),ee({blockers:r})}function je(e){var t=e.currentLocation,n=e.nextLocation,r=e.historyAction;if(0!==J.size){J.size>1&&M(!1,"A router only supports one blocker at a time");var i=Array.from(J.entries()),a=f(i[i.length-1],2),o=a[0],u=a[1],s=N.blockers.get(o);if(!s||"proceeding"!==s.state)return u({currentLocation:t,nextLocation:n,historyAction:r})?o:void 0}}function Ue(e){var t=[];return X.forEach((function(n,r){e&&!e(r)||(n.cancel(),t.push(r),X.delete(r))})),t}function qe(e,t){if(m){var n=m(e,t.map((function(e){return function(e,t){var n=e.route,r=e.pathname,i=e.params;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}(e,N.loaderData)})));return n||e.key}return e.key}function Qe(e,t){if(v&&y){var n=qe(e,t);v[n]=y()}}function Je(e,t){if(v){var n=qe(e,t),r=v[n];if("number"===typeof r)return r}return null}return E={get basename(){return l},get state(){return N},get routes(){return c},initialize:function(){return d=e.history.listen((function(t){var n=t.action,r=t.location,i=t.delta;if(!Z){M(0===J.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");var a=je({currentLocation:N.location,nextLocation:r,historyAction:n});return a&&null!=i?(Z=!0,e.history.go(-1*i),void Me(a,{state:"blocked",location:r,proceed:function(){Me(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(i)},reset:function(){var e=new Map(N.blockers);e.set(a,xe),ee({blockers:e})}})):ae(n,r)}Z=!1})),N.initialized||ae(r.Pop,N.location),E},subscribe:function(e){return p.add(e),function(){return p.delete(e)}},enableScrollRestoration:function(e,t,n){if(v=e,y=t,m=n||null,!g&&N.navigation===_e){g=!0;var r=Je(N.location,N.matches);null!=r&&ee({restoreScrollPosition:r})}return function(){v=null,y=null,m=null}},navigate:ne,fetch:function(e,t,n,r){if(a)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");K.has(e)&&Ne(e);var i=u||c,o=Ie(N.location,N.matches,l,h.v7_prependBasename,n,t,null==r?void 0:r.relative),s=W(i,o,l);if(s){var f=Te(h.v7_normalizeFormMethod,!0,o,r),d=f.path,p=f.submission,v=f.error;if(v)we(e,t,v);else{var m=ut(s,d);F=!0===(r&&r.preventScrollReset),p&&tt(p.formMethod)?function(e,t,n,r,i,a){he.apply(this,arguments)}(e,t,d,m,s,p):($.set(e,{routeId:t,path:d}),function(e,t,n,r,i,a){de.apply(this,arguments)}(e,t,d,m,s,p))}}else we(e,t,Ke(404,{pathname:o}))},revalidate:function(){ge(),ee({revalidation:"loading"}),"submitting"!==N.navigation.state&&("idle"!==N.navigation.state?ae(O||N.historyAction,N.navigation.location,{overrideNavigation:N.navigation}):ae(N.historyAction,N.location,{startUninterruptedRevalidation:!0}))},createHref:function(t){return e.history.createHref(t)},encodeLocation:function(t){return e.history.encodeLocation(t)},getFetcher:fe,deleteFetcher:Ce,dispose:function(){d&&d(),p.clear(),I&&I.abort(),N.fetchers.forEach((function(e,t){return Ce(t)})),N.blockers.forEach((function(e,t){return Oe(t)}))},getBlocker:function(e,t){var n=N.blockers.get(e)||xe;return J.get(e)!==t&&J.set(e,t),n},deleteBlocker:Oe,_internalFetchControllers:K,_internalActiveDeferreds:X,_internalSetRoutes:function(e){u=B(e,t,void 0,s={})}},E}Symbol("deferred");function Ie(e,t,n,r,i,a,o){var u,s;if(null!=a&&"path"!==o){u=[];var c,l=D(t);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(u.push(f),f.route.id===a){s=f;break}}}catch(d){l.e(d)}finally{l.f()}}else u=t,s=t[t.length-1];var h=ue(i||".",oe(u).map((function(e){return e.pathnameBase})),ie(e.pathname,n)||e.pathname,"path"===o);return null==i&&(h.search=e.search,h.hash=e.hash),null!=i&&""!==i&&"."!==i||!s||!s.route.index||ot(h.search)||(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==n&&(h.pathname="/"===h.pathname?n:se([n,h.pathname])),U(h)}function Te(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!et(r.formMethod))return{path:n,error:Ke(405,{method:r.formMethod})};var i,a,o=function(){return{path:n,error:Ke(400,{type:"invalid-body"})}},u=r.formMethod||"get",s=e?u.toUpperCase():u.toLowerCase(),c=Qe(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!tt(s))return o();var l="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((function(e,t){var n=f(t,2);return""+e+n[0]+"="+n[1]+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:s,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:l}}}if("application/json"===r.formEncType){if(!tt(s))return o();try{var h="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:c,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch(v){return o()}}}if(L("function"===typeof FormData,"FormData is not available in this environment"),r.formData)i=je(r.formData),a=r.formData;else if(r.body instanceof FormData)i=je(r.body),a=r.body;else if(r.body instanceof URLSearchParams)a=Ue(i=r.body);else if(null==r.body)i=new URLSearchParams,a=new FormData;else try{a=Ue(i=new URLSearchParams(r.body))}catch(v){return o()}var d={formMethod:s,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:a,json:void 0,text:void 0};if(tt(d.formMethod))return{path:n,submission:d};var p=q(n);return t&&p.search&&ot(p.search)&&i.append("index",""),p.search="?"+i,{path:U(p),submission:d}}function Ne(e,t){var n=e;if(t){var r=e.findIndex((function(e){return e.route.id===t}));r>=0&&(n=e.slice(0,r))}return n}function De(e,t,n,r,i,a,o,u,s,c,l,f,h,d){var p=d?Object.values(d)[0]:h?Object.values(h)[0]:void 0,v=e.createURL(t.location),m=e.createURL(i),y=d?Object.keys(d)[0]:void 0,g=Ne(n,y).filter((function(e,n){if(e.route.lazy)return!0;if(null==e.route.loader)return!1;if(function(e,t,n){var r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||o.some((function(t){return t===e.route.id})))return!0;var i=t.matches[n],u=e;return Pe(e,P({currentUrl:v,currentParams:i.params,nextUrl:m,nextParams:u.params},r,{actionResult:p,defaultShouldRevalidate:a||v.pathname+v.search===m.pathname+m.search||v.search!==m.search||Ae(i,u)}))})),w=[];return s.forEach((function(e,i){if(n.some((function(t){return t.route.id===e.routeId}))){var o=W(l,e.path,f);if(o){var s=t.fetchers.get(i),h=s&&"idle"!==s.state&&void 0===s.data&&!c.has(i),d=ut(o,e.path);(u.includes(i)||h||Pe(d,P({currentUrl:v,currentParams:t.matches[t.matches.length-1].params,nextUrl:m,nextParams:n[n.length-1].params},r,{actionResult:p,defaultShouldRevalidate:a})))&&w.push({key:i,routeId:e.routeId,path:e.path,matches:o,match:d,controller:new AbortController})}else w.push({key:i,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null})}})),[g,w]}function Ae(e,t){var n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Pe(e,t){if(e.route.shouldRevalidate){var n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}function Re(e,t,n){return Oe.apply(this,arguments)}function Oe(){return Oe=S(x().mark((function e(t,n,r){var i,a,o,u,s,c;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.lazy){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.lazy();case 4:if(i=e.sent,t.lazy){e.next=7;break}return e.abrupt("return");case 7:for(u in L(a=r[t.id],"No route found in manifest"),o={},i)s=a[u],M(!(c=void 0!==s&&"hasErrorBoundary"!==u),'Route "'+a.id+'" has a static property "'+u+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+u+'" will be ignored.'),c||z.has(u)||(o[u]=i[u]);Object.assign(a,o),Object.assign(a,P({},n(a),{lazy:void 0}));case 13:case"end":return e.stop()}}),e)}))),Oe.apply(this,arguments)}function Le(e,t,n,r,i,a,o,u){return Me.apply(this,arguments)}function Me(){return Me=S(x().mark((function e(t,n,r,i,a,o,u,s){var c,l,f,h,d,p,v,m,y,g,w,k,_,b,E,S,C,I;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===s&&(s={}),h=function(e){var t,i=new Promise((function(e,n){return t=n}));return f=function(){return t()},n.signal.addEventListener("abort",f),Promise.race([e({request:n,params:r.params,context:s.requestContext}),i])},e.prev=2,d=r.route[t],!r.route.lazy){e.next=30;break}if(!d){e.next=12;break}return e.next=8,Promise.all([h(d),Re(r.route,o,a)]);case 8:p=e.sent,l=p[0],e.next=28;break;case 12:return e.next=14,Re(r.route,o,a);case 14:if(!(d=r.route[t])){e.next=21;break}return e.next=18,h(d);case 18:l=e.sent,e.next=28;break;case 21:if("action"!==t){e.next=27;break}throw v=new URL(n.url),m=v.pathname+v.search,Ke(405,{method:n.method,pathname:m,routeId:r.route.id});case 27:return e.abrupt("return",{type:R.data,data:void 0});case 28:e.next=39;break;case 30:if(d){e.next=36;break}throw y=new URL(n.url),Ke(404,{pathname:y.pathname+y.search});case 36:return e.next=38,h(d);case 38:l=e.sent;case 39:L(void 0!==l,"You defined "+("action"===t?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`."),e.next=46;break;case 42:e.prev=42,e.t0=e.catch(2),c=R.error,l=e.t0;case 46:return e.prev=46,f&&n.signal.removeEventListener("abort",f),e.finish(46);case 49:if(!Ze(l)){e.next=74;break}if(g=l.status,!we.has(g)){e.next=59;break}if(L(w=l.headers.get("Location"),"Redirects returned/thrown from loaders/actions must have a Location header"),Ee.test(w)?s.isStaticRequest||(k=new URL(n.url),_=w.startsWith("//")?new URL(k.protocol+w):new URL(w),b=null!=ie(_.pathname,u),_.origin===k.origin&&b&&(w=_.pathname+_.search+_.hash)):w=Ie(new URL(n.url),i.slice(0,i.indexOf(r)+1),u,!0,w),!s.isStaticRequest){e.next=58;break}throw l.headers.set("Location",w),l;case 58:return e.abrupt("return",{type:R.redirect,status:g,location:w,revalidate:null!==l.headers.get("X-Remix-Revalidate")});case 59:if(!s.isRouteRequest){e.next=61;break}throw{type:c||R.data,response:l};case 61:if(!(S=l.headers.get("Content-Type"))||!/\bapplication\/json\b/.test(S)){e.next=68;break}return e.next=65,l.json();case 65:E=e.sent,e.next=71;break;case 68:return e.next=70,l.text();case 70:E=e.sent;case 71:if(c!==R.error){e.next=73;break}return e.abrupt("return",{type:c,error:new de(g,l.statusText,E),headers:l.headers});case 73:return e.abrupt("return",{type:R.data,data:E,statusCode:l.status,headers:l.headers});case 74:if(c!==R.error){e.next=76;break}return e.abrupt("return",{type:c,error:l});case 76:if(!Je(l)){e.next=78;break}return e.abrupt("return",{type:R.deferred,deferredData:l,statusCode:null==(C=l.init)?void 0:C.status,headers:(null==(I=l.init)?void 0:I.headers)&&new Headers(l.init.headers)});case 78:return e.abrupt("return",{type:R.data,data:l});case 79:case"end":return e.stop()}}),e,null,[[2,42,46,49]])}))),Me.apply(this,arguments)}function Fe(e,t,n,r){var i=e.createURL(Qe(t)).toString(),a={signal:n};if(r&&tt(r.formMethod)){var o=r.formMethod,u=r.formEncType;a.method=o.toUpperCase(),"application/json"===u?(a.headers=new Headers({"Content-Type":u}),a.body=JSON.stringify(r.json)):"text/plain"===u?a.body=r.text:"application/x-www-form-urlencoded"===u&&r.formData?a.body=je(r.formData):a.body=r.formData}return new Request(i,a)}function je(e){var t,n=new URLSearchParams,r=D(e.entries());try{for(r.s();!(t=r.n()).done;){var i=f(t.value,2),a=i[0],o=i[1];n.append(a,"string"===typeof o?o:o.name)}}catch(u){r.e(u)}finally{r.f()}return n}function Ue(e){var t,n=new FormData,r=D(e.entries());try{for(r.s();!(t=r.n()).done;){var i=f(t.value,2),a=i[0],o=i[1];n.append(a,o)}}catch(u){r.e(u)}finally{r.f()}return n}function qe(e,t,n,r,i){var a,o={},u=null,s=!1,c={};return n.forEach((function(n,l){var f=t[l].route.id;if(L(!Xe(n),"Cannot handle redirect results in processLoaderData"),$e(n)){var h=Be(e,f),d=n.error;r&&(d=Object.values(r)[0],r=void 0),null==(u=u||{})[h.route.id]&&(u[h.route.id]=d),o[f]=void 0,s||(s=!0,a=pe(n.error)?n.error.status:500),n.headers&&(c[f]=n.headers)}else Ye(n)?(i.set(f,n.deferredData),o[f]=n.deferredData.data):o[f]=n.data,null==n.statusCode||200===n.statusCode||s||(a=n.statusCode),n.headers&&(c[f]=n.headers)})),r&&(u=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:u,statusCode:a||200,loaderHeaders:c}}function Ve(e,t,n,r,i,a,o,u){for(var s=qe(t,n,r,i,u),c=s.loaderData,l=s.errors,f=0;f<a.length;f++){var h=a[f],d=h.key,p=h.match,v=h.controller;L(void 0!==o&&void 0!==o[f],"Did not find corresponding fetcher result");var m=o[f];if(!v||!v.signal.aborted)if($e(m)){var y=Be(e.matches,null==p?void 0:p.route.id);l&&l[y.route.id]||(l=P({},l,C({},y.route.id,m.error))),e.fetchers.delete(d)}else if(Xe(m))L(!1,"Unhandled fetcher revalidation redirect");else if(Ye(m))L(!1,"Unhandled fetcher deferred data");else{var g=dt(m.data);e.fetchers.set(d,g)}}return{loaderData:c,errors:l}}function ze(e,t,n,r){var i,a=P({},t),o=D(n);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.route.id;if(t.hasOwnProperty(s)?void 0!==t[s]&&(a[s]=t[s]):void 0!==e[s]&&u.route.loader&&(a[s]=e[s]),r&&r.hasOwnProperty(s))break}}catch(c){o.e(c)}finally{o.f()}return a}function Be(e,t){return(t?e.slice(0,e.findIndex((function(e){return e.route.id===t}))+1):A(e)).reverse().find((function(e){return!0===e.route.hasErrorBoundary}))||e[0]}function We(e){var t=e.find((function(e){return e.index||!e.path||"/"===e.path}))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ke(e,t){var n=void 0===t?{}:t,r=n.pathname,i=n.routeId,a=n.method,o=n.type,u="Unknown Server Error",s="Unknown @remix-run/router error";return 400===e?(u="Bad Request",a&&r&&i?s="You made a "+a+' request to "'+r+'" but did not provide a `loader` for route "'+i+'", so there is no way to handle the request.':"defer-action"===o?s="defer() is not supported in actions":"invalid-body"===o&&(s="Unable to encode submission body")):403===e?(u="Forbidden",s='Route "'+i+'" does not match URL "'+r+'"'):404===e?(u="Not Found",s='No route matches URL "'+r+'"'):405===e&&(u="Method Not Allowed",a&&r&&i?s="You made a "+a.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+i+'", so there is no way to handle the request.':a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new de(e||500,u,new Error(s),!0)}function Ge(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(Xe(n))return n}}function Qe(e){return U(P({},"string"===typeof e?q(e):e,{hash:""}))}function He(e,t){return e.pathname===t.pathname&&e.search===t.search&&(""===e.hash?""!==t.hash:e.hash===t.hash||""!==t.hash)}function Ye(e){return e.type===R.deferred}function $e(e){return e.type===R.error}function Xe(e){return(e&&e.type)===R.redirect}function Je(e){var t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}function Ze(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function et(e){return ge.has(e.toLowerCase())}function tt(e){return me.has(e.toLowerCase())}function nt(e,t,n,r,i,a){return rt.apply(this,arguments)}function rt(){return(rt=S(x().mark((function e(t,n,r,i,a,o){var u,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=x().mark((function e(u){var s,c,l,f,h;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r[u],c=n[u]){e.next=4;break}return e.abrupt("return","continue");case 4:if(l=t.find((function(e){return e.route.id===c.route.id})),f=null!=l&&!Ae(l,c)&&void 0!==(o&&o[c.route.id]),!Ye(s)||!a&&!f){e.next=11;break}return L(h=i[u],"Expected an AbortSignal for revalidating fetcher deferred result"),e.next=11,it(s,h,a).then((function(e){e&&(r[u]=e||r[u])}));case 11:case"end":return e.stop()}}),e)})),s=0;case 2:if(!(s<r.length)){e.next=10;break}return e.delegateYield(u(s),"t0",4);case 4:if("continue"!==e.t0){e.next=7;break}return e.abrupt("continue",7);case 7:s++,e.next=2;break;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t,n){return at.apply(this,arguments)}function at(){return at=S(x().mark((function e(t,n,r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,t.deferredData.resolveData(n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=14;break}return e.prev=7,e.abrupt("return",{type:R.data,data:t.deferredData.unwrappedData});case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",{type:R.error,error:e.t0});case 14:return e.abrupt("return",{type:R.data,data:t.deferredData.data});case 15:case"end":return e.stop()}}),e,null,[[7,11]])}))),at.apply(this,arguments)}function ot(e){return new URLSearchParams(e).getAll("index").some((function(e){return""===e}))}function ut(e,t){var n="string"===typeof t?q(t).search:t.search;if(e[e.length-1].route.index&&ot(n||""))return e[e.length-1];var r=oe(e);return r[r.length-1]}function st(e){var t=e.formMethod,n=e.formAction,r=e.formEncType,i=e.text,a=e.formData,o=e.json;if(t&&n&&r)return null!=i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i}:null!=a?{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0}:void 0!==o?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}:void 0}function ct(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function lt(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function ft(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t," _hasFetcherDoneAnything ":!0}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t," _hasFetcherDoneAnything ":!0}}function ht(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0," _hasFetcherDoneAnything ":!0}}function dt(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e," _hasFetcherDoneAnything ":!0}}function pt(){return pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pt.apply(this,arguments)}var vt=i.createContext(null);var mt=i.createContext(null);var yt=i.createContext(null);var gt=i.createContext(null);var wt=i.createContext(null);var kt=i.createContext({outlet:null,matches:[],isDataRoute:!1});var _t=i.createContext(null);function bt(){return null!=i.useContext(wt)}function xt(){return bt()||L(!1),i.useContext(wt).location}function Et(e){i.useContext(gt).static||i.useLayoutEffect(e)}function St(){return i.useContext(kt).isDataRoute?function(){var e=Mt(Dt.UseNavigateStable).router,t=jt(At.UseNavigateStable),n=i.useRef(!1);Et((function(){n.current=!0}));var r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,pt({fromRouteId:t},i)))}),[e,t]);return r}():function(){bt()||L(!1);var e=i.useContext(vt),t=i.useContext(gt),n=t.basename,r=t.navigator,a=i.useContext(kt).matches,o=xt().pathname,u=JSON.stringify(oe(a).map((function(e){return e.pathnameBase}))),s=i.useRef(!1);return Et((function(){s.current=!0})),i.useCallback((function(t,i){if(void 0===i&&(i={}),s.current)if("number"!==typeof t){var a=ue(t,JSON.parse(u),o,"path"===i.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:se([n,a.pathname])),(i.replace?r.replace:r.push)(a,i.state,i)}else r.go(t)}),[n,r,u,o,e])}()}var Ct=i.createContext(null);function It(e,t){var n=(void 0===t?{}:t).relative,r=i.useContext(kt).matches,a=xt().pathname,o=JSON.stringify(oe(r).map((function(e){return e.pathnameBase})));return i.useMemo((function(){return ue(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function Tt(e,t,n){bt()||L(!1);var a,o=i.useContext(gt).navigator,u=i.useContext(kt).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,xt());if(t){var h,d="string"===typeof t?q(t):t;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||L(!1),a=d}else a=f;var p=a.pathname||"/",v=W(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var m=Lt(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:se([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:se([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,n);return t&&m?i.createElement(wt.Provider,{value:{location:pt({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:r.Pop}},m):m}function Nt(){var e=function(){var e,t=i.useContext(_t),n=Ft(At.UseRouteError),r=jt(At.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=pe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}var Dt,At,Pt=i.createElement(Nt,null),Rt=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return m(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?i.createElement(kt.Provider,{value:this.props.routeContext},i.createElement(_t.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(i.Component);function Ot(e){var t=e.routeContext,n=e.match,r=e.children,a=i.useContext(vt);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(kt.Provider,{value:t},r)}function Lt(e,t,n){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,u=null==(r=n)?void 0:r.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||L(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,r,a){var s=r.route.id?null==u?void 0:u[r.route.id]:null,c=null;n&&(c=r.route.errorElement||Pt);var l=t.concat(o.slice(0,a+1)),f=function(){var t;return t=s?c:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(Ot,{match:r,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?i.createElement(Rt,{location:n.location,revalidation:n.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function Mt(e){var t=i.useContext(vt);return t||L(!1),t}function Ft(e){var t=i.useContext(mt);return t||L(!1),t}function jt(e){var t=function(e){var t=i.useContext(kt);return t||L(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||L(!1),n.route.id}function Ut(){var e=Ft(At.UseLoaderData),t=jt(At.UseLoaderData);if(!e.errors||null==e.errors[t])return e.loaderData[t];console.error("You cannot `useLoaderData` in an errorElement (routeId: "+t+")")}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Dt||(Dt={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(At||(At={}));var qt,Vt=a.startTransition;function zt(e){var t=e.fallbackElement,n=e.router,r=e.future,a=f(i.useState(n.state),2),o=a[0],u=a[1],s=(r||{}).v7_startTransition,c=i.useCallback((function(e){s&&Vt?Vt((function(){return u(e)})):u(e)}),[u,s]);i.useLayoutEffect((function(){return n.subscribe(c)}),[n,c]);var l=i.useMemo((function(){return{createHref:n.createHref,encodeLocation:n.encodeLocation,go:function(e){return n.navigate(e)},push:function(e,t,r){return n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})},replace:function(e,t,r){return n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})}}}),[n]),h=n.basename||"/",d=i.useMemo((function(){return{router:n,navigator:l,static:!1,basename:h}}),[n,l,h]);return i.createElement(i.Fragment,null,i.createElement(vt.Provider,{value:d},i.createElement(mt.Provider,{value:o},i.createElement(Gt,{basename:h,location:o.location,navigationType:o.historyAction,navigator:l},o.initialized?i.createElement(Bt,{routes:n.routes,state:o}):t))),null)}function Bt(e){return Tt(e.routes,void 0,e.state)}function Wt(e){var t=e.to,n=e.replace,r=e.state,a=e.relative;bt()||L(!1);var o=i.useContext(kt).matches,u=xt().pathname,s=St(),c=ue(t,oe(o).map((function(e){return e.pathnameBase})),u,"path"===a),l=JSON.stringify(c);return i.useEffect((function(){return s(JSON.parse(l),{replace:n,state:r,relative:a})}),[s,l,a,n,r]),null}function Kt(e){return function(e){var t=i.useContext(kt).outlet;return t?i.createElement(Ct.Provider,{value:e},t):t}(e.context)}function Gt(e){var t=e.basename,n=void 0===t?"/":t,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?r.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;bt()&&L(!1);var d=n.replace(/^\/*/,"/"),p=i.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=q(u));var v=u,m=v.pathname,y=void 0===m?"/":m,g=v.search,w=void 0===g?"":g,k=v.hash,_=void 0===k?"":k,b=v.state,x=void 0===b?null:b,E=v.key,S=void 0===E?"default":E,C=i.useMemo((function(){var e=ie(y,d);return null==e?null:{location:{pathname:e,search:w,hash:_,state:x,key:S},navigationType:c}}),[d,y,w,_,x,S,c]);return null==C?null:i.createElement(gt.Provider,{value:p},i.createElement(wt.Provider,{children:o,value:C}))}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(qt||(qt={}));var Qt=new Promise((function(){}));i.Component;function Ht(e){var t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:i.createElement(e.Component),Component:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:i.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yt.apply(this,arguments)}function $t(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Xt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Jt(){var e,t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Yt({},t,{errors:Zt(t.errors)})),t}function Zt(e){if(!e)return null;for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var i=f(r[n],2),a=i[0],o=i[1];if(o&&"RouteErrorResponse"===o.__type)t[a]=new de(o.status,o.statusText,o.data,!0===o.internal);else if(o&&"Error"===o.__type){var u=new Error(o.message);u.stack="",t[a]=u}else t[a]=o}return t}a.startTransition;var en="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,tn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nn=i.forwardRef((function(e,t){var n,r=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=$t(e,Xt),d=i.useContext(gt).basename,p=!1;if("string"===typeof l&&tn.test(l)&&(n=l,en))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=ie(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(k){}var g=function(e,t){var n=(void 0===t?{}:t).relative;bt()||L(!1);var r=i.useContext(gt),a=r.basename,o=r.navigator,u=It(e,{relative:n}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:se([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),w=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,o=n.state,u=n.preventScrollReset,s=n.relative,c=St(),l=xt(),f=It(e,{relative:s});return i.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==a?a:U(l)===U(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,r,e,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return i.createElement("a",Yt({},h,{href:n||g,onClick:p||o?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:c}))}));var rn,an;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(rn||(rn={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(an||(an={}));var on=n(184),un=function(e){var t=e.title,n=e.className,r=e.to;return(0,on.jsx)(nn,{className:"bg-black rounded-full p-2 text-[13px] px-4 sm:p-4 text-white text-center ".concat(n," transition-all duration-500 hover:bg-[#ecd870] hover:text-black hover:shadow-2xl "),to:r,children:t})},sn=!1,cn=!1,ln="${JSCORE_VERSION}",fn=function(e,t){if(!e)throw hn(t)},hn=function(e){return new Error("Firebase Database ("+ln+") INTERNAL ASSERT FAILED: "+e)},dn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},pn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(dn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new vn;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},vn=function(e){g(n,e);var t=b(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return m(n)}(T(Error)),mn=function(e){var t=dn(e);return pn.encodeByteArray(t,!0)},yn=function(e){return mn(e).replace(/\./g,"")},gn=function(e){try{return pn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function wn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=wn(e[n],t[n]));return e}var kn=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},_n=function(){try{return kn()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_EMAILJS_PUBLIC_KEY:"r-a4WdmKt1jr0njGg",REACT_APP_EMAILJS_SERVICE_KEY:"service_9k4k603",REACT_APP_EMAILJS_TEMPLATE_KEY:"template_wsaffu5",REACT_APP_FIREBASE_API_KEY:"AIzaSyDyUh44q0n5FfpE3h8xyVOBTHIJwR4NIPg",REACT_APP_VARIABLE:"value"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&gn(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},bn=function(){var e;return null===(e=_n())||void 0===e?void 0:e.config},xn=function(){function e(){var t=this;h(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return m(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function En(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[yn(JSON.stringify({alg:"none",type:"JWT"})),yn(JSON.stringify(a)),""].join(".")}function Sn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Cn(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function In(){return!0===sn||!0===cn}function Tn(){return!function(){var e,t=null===(e=_n())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nn(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Dn=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(_(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(_(a),An.prototype.create),a}return m(n)}(T(Error)),An=function(){function e(t,n,r){h(this,e),this.service=t,this.serviceName=n,this.errors=r}return m(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Pn,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Dn(n,a,t)}}]),e}();var Pn=/\{\$([^}]+)}/g;function Rn(e){return JSON.parse(e)}function On(e){return JSON.stringify(e)}var Ln=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Rn(gn(a[0])||""),n=Rn(gn(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Mn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fn(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function jn(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Un(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function qn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Vn(u)&&Vn(s)){if(!qn(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Vn(e){return null!==e&&"object"===typeof e}var zn=function(){function e(){h(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return m(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Bn(e,t){var n=new Wn(e,t);return n.subscribe.bind(n)}var Wn=function(){function e(t,n){var r=this;h(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return m(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=D(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Kn),void 0===r.error&&(r.error=Kn),void 0===r.complete&&(r.complete=Kn);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Kn(){}var Gn=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Qn(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Hn(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Qn(e,t)+"must be a valid function.")}function Yn(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Qn(e,t)+"must be a valid context object.")}var $n=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Xn(e){return e&&e._delegate?e._delegate:e}var Jn=function(){function e(t,n,r){h(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return m(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Zn="[DEFAULT]",er=function(){function e(t,n){h(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return m(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new xn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Zn})}catch(s){}var t,n=D(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=S(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(A(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),A(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=D(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=f(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Zn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn;return this.component?this.component.multipleInstances?e:Zn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var tr,nr,rr=function(){function e(t){h(this,e),this.name=t,this.providers=new Map}return m(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new er(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ir=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(nr||(nr={}));var ar={debug:nr.DEBUG,verbose:nr.VERBOSE,info:nr.INFO,warn:nr.WARN,error:nr.ERROR,silent:nr.SILENT},or=nr.INFO,ur=(C(tr={},nr.DEBUG,"log"),C(tr,nr.VERBOSE,"log"),C(tr,nr.INFO,"info"),C(tr,nr.WARN,"warn"),C(tr,nr.ERROR,"error"),tr),sr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ur[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},cr=function(){function e(t){h(this,e),this.name=t,this._logLevel=or,this._logHandler=sr,this._userLogHandler=null,ir.push(this)}return m(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in nr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ar[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nr.DEBUG].concat(t)),this._logHandler.apply(this,[this,nr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,nr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nr.INFO].concat(t)),this._logHandler.apply(this,[this,nr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nr.WARN].concat(t)),this._logHandler.apply(this,[this,nr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nr.ERROR].concat(t)),this._logHandler.apply(this,[this,nr.ERROR].concat(t))}}]),e}();function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hr,dr,pr=function(e,t){return t.some((function(t){return e instanceof t}))};var vr=new WeakMap,mr=new WeakMap,yr=new WeakMap,gr=new WeakMap,wr=new WeakMap;var kr={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return mr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||yr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function _r(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(dr||(dr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Er(this),n),xr(vr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xr(e.apply(Er(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Er(this),t].concat(r));return yr.set(a,t.sort?t.sort():[t]),xr(a)}}function br(e){return"function"===typeof e?_r(e):(e instanceof IDBTransaction&&function(e){if(!mr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));mr.set(e,t)}}(e),pr(e,hr||(hr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,kr):e)}function xr(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(xr(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&vr.set(t,e)})).catch((function(){})),wr.set(t,e),t}(e);if(gr.has(e))return gr.get(e);var t=br(e);return t!==e&&(gr.set(e,t),wr.set(t,e)),t}var Er=function(e){return wr.get(e)};var Sr,Cr,Ir=["get","getKey","getAll","getAllKeys","count"],Tr=["put","add","delete","clear"],Nr=new Map;function Dr(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Nr.get(t))return Nr.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Tr.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ir.includes(n))){var a=function(){var e=S(x().mark((function e(t){var a,o,u,s,c,l,f=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Nr.set(t,a),a}}}kr=function(e){return fr(fr({},e),{},{get:function(t,n,r){return Dr(t,n)||e.get(t,n,r)},has:function(t,n){return!!Dr(t,n)||e.has(t,n)}})}(kr);var Ar=function(){function e(t){h(this,e),this.container=t}return m(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Pr="@firebase/app",Rr="0.9.28",Or=new cr("@firebase/app"),Lr="[DEFAULT]",Mr=(C(Sr={},Pr,"fire-core"),C(Sr,"@firebase/app-compat","fire-core-compat"),C(Sr,"@firebase/analytics","fire-analytics"),C(Sr,"@firebase/analytics-compat","fire-analytics-compat"),C(Sr,"@firebase/app-check","fire-app-check"),C(Sr,"@firebase/app-check-compat","fire-app-check-compat"),C(Sr,"@firebase/auth","fire-auth"),C(Sr,"@firebase/auth-compat","fire-auth-compat"),C(Sr,"@firebase/database","fire-rtdb"),C(Sr,"@firebase/database-compat","fire-rtdb-compat"),C(Sr,"@firebase/functions","fire-fn"),C(Sr,"@firebase/functions-compat","fire-fn-compat"),C(Sr,"@firebase/installations","fire-iid"),C(Sr,"@firebase/installations-compat","fire-iid-compat"),C(Sr,"@firebase/messaging","fire-fcm"),C(Sr,"@firebase/messaging-compat","fire-fcm-compat"),C(Sr,"@firebase/performance","fire-perf"),C(Sr,"@firebase/performance-compat","fire-perf-compat"),C(Sr,"@firebase/remote-config","fire-rc"),C(Sr,"@firebase/remote-config-compat","fire-rc-compat"),C(Sr,"@firebase/storage","fire-gcs"),C(Sr,"@firebase/storage-compat","fire-gcs-compat"),C(Sr,"@firebase/firestore","fire-fst"),C(Sr,"@firebase/firestore-compat","fire-fst-compat"),C(Sr,"fire-js","fire-js"),C(Sr,"firebase","fire-js-all"),Sr),Fr=new Map,jr=new Map;function Ur(e,t){try{e.container.addComponent(t)}catch(n){Or.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function qr(e,t){e.container.addOrOverwriteComponent(t)}function Vr(e){var t=e.name;if(jr.has(t))return Or.debug("There were multiple attempts to register component ".concat(t,".")),!1;jr.set(t,e);var n,r=D(Fr.values());try{for(r.s();!(n=r.n()).done;){Ur(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function zr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Br(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lr;zr(e,t).clearInstance(n)}function Wr(){jr.clear()}var Kr=(C(Cr={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),C(Cr,"bad-app-name","Illegal App name: '{$appName}"),C(Cr,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),C(Cr,"app-deleted","Firebase App named '{$appName}' already deleted"),C(Cr,"no-options","Need to provide options, when not being deployed to hosting via source."),C(Cr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),C(Cr,"invalid-log-argument","First argument to `onLog` must be null or a function."),C(Cr,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),C(Cr,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),C(Cr,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),C(Cr,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Cr),Gr=new An("app","Firebase",Kr),Qr=function(){function e(t,n,r){var i=this;h(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jn("app",(function(){return i}),"PUBLIC"))}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}]),e}(),Hr="10.8.1";function Yr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Lr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Gr.create("bad-app-name",{appName:String(i)});if(n||(n=bn()),!n)throw Gr.create("no-options");var a=Fr.get(i);if(a){if(qn(n,a.options)&&qn(r,a.config))return a;throw Gr.create("duplicate-app",{appName:i})}var o,u=new rr(i),s=D(jr.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Qr(n,r,u);return Fr.set(i,l),l}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr,t=Fr.get(e);if(!t&&e===Lr&&bn())return Yr();if(!t)throw Gr.create("no-app",{appName:e});return t}function Xr(){return Array.from(Fr.values())}function Jr(e){return Zr.apply(this,arguments)}function Zr(){return(Zr=S(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Fr.has(n)){e.next=6;break}return Fr.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ei(e,t,n){var r,i=null!==(r=Mr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Or.warn(u.join(" "))}Vr(new Jn("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ti(e,t){if(null!==e&&"function"!==typeof e)throw Gr.create("invalid-log-argument");!function(e,t){var n,r=D(ir);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ar[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:nr[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ni(e){var t;t=e,ir.forEach((function(e){e.setLogLevel(t)}))}var ri="firebase-heartbeat-database",ii=1,ai="firebase-heartbeat-store",oi=null;function ui(){return oi||(oi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=xr(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(xr(u.result),e.oldVersion,e.newVersion,xr(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(ri,ii,{upgrade:function(e,t){if(0===t)try{e.createObjectStore(ai)}catch(n){console.warn(n)}}}).catch((function(e){throw Gr.create("idb-open",{originalErrorMessage:e.message})}))),oi}function si(e){return ci.apply(this,arguments)}function ci(){return ci=S(x().mark((function e(t){var n,r,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ui();case 3:return n=e.sent,r=n.transaction(ai),e.next=7,r.objectStore(ai).get(hi(t));case 7:return i=e.sent,e.next=10,r.done;case 10:return e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(0),e.t0 instanceof Dn?Or.warn(e.t0.message):(a=Gr.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Or.warn(a.message));case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),ci.apply(this,arguments)}function li(e,t){return fi.apply(this,arguments)}function fi(){return fi=S(x().mark((function e(t,n){var r,i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ui();case 3:return r=e.sent,i=r.transaction(ai,"readwrite"),a=i.objectStore(ai),e.next=8,a.put(n,hi(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Dn?Or.warn(e.t0.message):(o=Gr.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Or.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),fi.apply(this,arguments)}function hi(e){return"".concat(e.name,"!").concat(e.options.appId)}var di=function(){function e(t){var n=this;h(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new gi(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return m(e,[{key:"triggerHeartbeat",value:function(){var e=S(x().mark((function e(){var t,n,r,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),a=pi(),null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)){e.next=9;break}return e.next=6,this._heartbeatsCachePromise;case 6:if(this._heartbeatsCache=e.sent,null!=(null===(n=this._heartbeatsCache)||void 0===n?void 0:n.heartbeats)){e.next=9;break}return e.abrupt("return");case 9:if(this._heartbeatsCache.lastSentHeartbeatDate!==a&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===a}))){e.next=13;break}return e.abrupt("return");case 13:this._heartbeatsCache.heartbeats.push({date:a,agent:i});case 14:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=S(x().mark((function e(){var t,n,r,i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(n=pi(),r=vi(this._heartbeatsCache.heartbeats),i=r.heartbeatsToSend,a=r.unsentEntries,o=yn(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=n,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function pi(){return(new Date).toISOString().substring(0,10)}function vi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=D(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),wi(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),wi(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var mi,yi,gi=function(){function e(t){h(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return m(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nn()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Ki){t(Ki)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=S(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,si(this.app);case 9:if(!(null===(t=e.sent)||void 0===t?void 0:t.heartbeats)){e.next=14;break}return e.abrupt("return",t);case 14:return e.abrupt("return",{heartbeats:[]});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=S(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",li(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=S(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",li(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(A(r.heartbeats),A(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function wi(e){return yn(JSON.stringify({version:2,heartbeats:e})).length}mi="",Vr(new Jn("platform-logger",(function(e){return new Ar(e)}),"PRIVATE")),Vr(new Jn("heartbeat",(function(e){return new di(e)}),"PRIVATE")),ei(Pr,Rr,mi),ei(Pr,Rr,"esm2017"),ei("fire-js","");var ki=function(){function e(t,n){var r=this;h(this,e),this._delegate=t,this.firebase=n,Ur(t,new Jn("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Jr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ur(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){qr(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),_i=(C(yi={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),C(yi,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),yi),bi=new An("app-compat","Firebase",_i);var xi=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Yr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Mn(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ei,setLogLevel:ni,onLog:ti,apps:null,SDK_VERSION:Hr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Vr(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw bi.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&wn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Mn(n,e=e||Lr))throw bi.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ki);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){wn(n,e)},createSubscribe:Bn,ErrorFactory:An,deepExtend:wn}),n}(),Ei=new cr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ei.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Si=self.firebase.SDK_VERSION;Si&&Si.indexOf("LITE")>=0&&Ei.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ci=xi;!function(e){ei("@firebase/app-compat","0.2.28",e)}();Ci.registerVersion("firebase","10.8.1","app-compat");var Ii="@firebase/database",Ti="1.0.3",Ni="";function Di(e){Ni=e}var Ai=function(){function e(t){h(this,e),this.domStorage_=t,this.prefix_="firebase:"}return m(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),On(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Rn(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Pi=function(){function e(){h(this,e),this.cache_={},this.isInMemoryStorage=!0}return m(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Mn(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Ri=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ai(t)}}catch(n){}return new Pi},Oi=Ri("localStorage"),Li=Ri("sessionStorage"),Mi=new cr("@firebase/database"),Fi=function(){var e=1;return function(){return e++}}(),ji=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,fn(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new zn;n.update(t);var r=n.digest();return pn.encodeByteArray(r)},Ui=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?On(r):r,t+=" "}return t},qi=null,Vi=!0,zi=function(e,t){fn(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Mi.logLevel=nr.VERBOSE,qi=Mi.log.bind(Mi),t&&Li.set("logging_enabled",!0)):"function"===typeof e?qi=e:(qi=null,Li.remove("logging_enabled"))},Bi=function(){if(!0===Vi&&(Vi=!1,null===qi&&!0===Li.get("logging_enabled")&&zi(!0)),qi){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ui.apply(null,t);qi(r)}},Wi=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Bi.apply(void 0,[e].concat(n))}},Ki=function(){var e="FIREBASE INTERNAL ERROR: "+Ui.apply(void 0,arguments);Mi.error(e)},Gi=function(){var e="FIREBASE FATAL ERROR: ".concat(Ui.apply(void 0,arguments));throw Mi.error(e),new Error(e)},Qi=function(){var e="FIREBASE WARNING: "+Ui.apply(void 0,arguments);Mi.warn(e)},Hi=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Yi="[MIN_NAME]",$i="[MAX_NAME]",Xi=function(e,t){if(e===t)return 0;if(e===Yi||t===$i)return-1;if(t===Yi||e===$i)return 1;var n=aa(e),r=aa(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Ji=function(e,t){return e===t?0:e<t?-1:1},Zi=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+On(t))},ea=function e(t){if("object"!==typeof t||null===t)return On(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=On(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},ta=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function na(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var ra=function(e){fn(!Hi(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var ia=new RegExp("^-?(0*)\\d{1,10}$"),aa=function(e){if(ia.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},oa=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Qi("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ua=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},sa=function(){function e(t,n){var r=this;h(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Qi('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),ca=function(){function e(t,n,r){var i=this;h(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Bi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qi(e)}}]),e}(),la=function(){function e(t){h(this,e),this.accessToken=t}return m(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();la.OWNER="owner";var fa="5",ha=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,da="ac",pa="websocket",va="long_polling",ma=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];h(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Oi.get("host:"+t)||this._host}return m(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Oi.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function ya(e,t,n){var r;if(fn("string"===typeof t,"typeof type must == string"),fn("object"===typeof n,"typeof params must == object"),t===pa)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==va)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return na(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var ga=function(){function e(){h(this,e),this.counters_={}}return m(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Mn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return wn(void 0,this.counters_)}}]),e}(),wa={},ka={};function _a(e){var t=e.toString();return wa[t]||(wa[t]=new ga),wa[t]}var ba=function(){function e(t){h(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return m(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&oa((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),xa="start",Ea=function(){function e(t,n,r,i,a,o,u){var s=this;h(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Wi(t),this.stats_=_a(n),this.urlFn=function(e){return s.appCheckToken&&(e[da]=s.appCheckToken),ya(n,va,e)}}return m(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ba(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(In()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Sa((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===xa)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[xa]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=fa,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[da]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&ha.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=On(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=mn(t),r=ta(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!In()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=On(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!In()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Sa=function(){function e(t,n,r,i){if(h(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,In())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Fi(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Bi("frame writing exception"),u.stack&&Bi(u.stack),Bi(u)}}}return m(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;In()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Bi("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Bi("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Ca=null;"undefined"!==typeof MozWebSocket?Ca=MozWebSocket:"undefined"!==typeof WebSocket&&(Ca=WebSocket);var Ia=function(){function e(t,n,r,i,a,o,u){h(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Wi(this.connId),this.stats_=_a(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return m(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Oi.set("previous_websocket_failure",!0);try{var r;if(In()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(fa,"/").concat(Ni,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_EMAILJS_PUBLIC_KEY:"r-a4WdmKt1jr0njGg",REACT_APP_EMAILJS_SERVICE_KEY:"service_9k4k603",REACT_APP_EMAILJS_TEMPLATE_KEY:"template_wsaffu5",REACT_APP_FIREBASE_API_KEY:"AIzaSyDyUh44q0n5FfpE3h8xyVOBTHIJwR4NIPg",REACT_APP_VARIABLE:"value"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Ca(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Oi.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Rn(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(fn(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=On(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=ta(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=fa,!In()&&"undefined"!==typeof location&&location.hostname&&ha.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[da]=r),i&&(a.p=i),ya(e,pa,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Ca&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Oi.isInMemoryStorage||!0===Oi.get("previous_websocket_failure")}}]),e}();Ia.responsesRequiredToBeHealthy=2,Ia.healthyTimeout=3e4;var Ta=function(){function e(t){h(this,e),this.initTransports_(t)}return m(e,[{key:"initTransports_",value:function(t){var n=Ia&&Ia.isAvailable(),r=n&&!Ia.previouslyFailed();if(t.webSocketOnly&&(n||Qi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ia];else{var i,a=this.transports_=[],o=D(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Ea,Ia]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Ta.globalTransportInitialized_=!1;var Na=function(){function e(t,n,r,i,a,o,u,s,c,l){h(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Wi("c:"+this.id+":"),this.transportManager_=new Ta(n),this.log_("Connection created"),this.start_()}return m(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=ua((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Zi("t",e),n=Zi("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Zi("t",e),n=Zi("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Zi("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Ki("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ki("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),fa!==n&&Qi("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ua((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ua((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Oi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Da=function(){function e(){h(this,e)}return m(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Aa=function(){function e(t){h(this,e),this.allowedEvents_=t,this.listeners_={},fn(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return m(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=A(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){fn(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Pa=function(e){g(n,e);var t=b(n);function n(){var e;return h(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Cn()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return m(n,[{key:"getInitialEvent",value:function(e){return fn("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Aa),Ra=32,Oa=768,La=function(){function e(t,n){if(h(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return m(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Ma(){return new La("")}function Fa(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ja(e){return e.pieces_.length-e.pieceNum_}function Ua(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new La(e.pieces_,t)}function qa(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Va(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function za(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new La(t,0)}function Ba(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof La)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new La(n,0)}function Wa(e){return e.pieceNum_>=e.pieces_.length}function Ka(e,t){var n=Fa(e),r=Fa(t);if(null===n)return t;if(n===r)return Ka(Ua(e),Ua(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ga(e,t){for(var n=Va(e,0),r=Va(t,0),i=0;i<n.length&&i<r.length;i++){var a=Xi(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function Qa(e,t){if(ja(e)!==ja(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ha(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(ja(e)>ja(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ya=m((function e(t,n){h(this,e),this.errorPrefix_=n,this.parts_=Va(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=$n(this.parts_[r]);$a(this)}));function $a(e){if(e.byteLength_>Oa)throw new Error(e.errorPrefix_+"has a key path longer than "+Oa+" bytes ("+e.byteLength_+").");if(e.parts_.length>Ra)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ra+") or object contains a cycle "+Xa(e))}function Xa(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Ja=function(e){g(n,e);var t=b(n);function n(){var e,r,i;return h(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return m(n,[{key:"getInitialEvent",value:function(e){return fn("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Aa),Za=1e3,eo=function(e){g(n,e);var t=b(n);function n(e,r,i,a,o,u,s,c){var l;if(h(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Wi("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Za,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!In())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ja.getInstance().on("visible",l.onVisible_,_(l)),-1===e.host.indexOf("fblocal")&&Pa.getInstance().on("online",l.onOnline_,_(l)),l}return m(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(On(i)),fn(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new xn,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),fn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),fn(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Ln(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Ln(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),fn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+On(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Ki("Unrecognized action received from server: "+On(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;fn(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Za),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=S(x().mark((function e(){var t,r,i,a,o,u,s,c,l,h,d,p,v,m,y=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},l=function(e){fn(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:l},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=f(d,2),v=p[0],m=p[1],u?Bi("getToken() completed but was canceled"):(Bi("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,s=new Na(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Qi(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&Qi(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Bi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Bi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],jn(this.interruptReasons_)&&(this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return ea(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new La(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Bi("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Bi("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=D(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=D(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";In()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Ni.replace(/\./g,"-")]=1,Cn()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Pa.getInstance().currentlyOnline();return jn(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Mn(e,"w")){var n=Fn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Qi("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Da);eo.nextPersistentConnectionId_=0,eo.nextConnectionId_=0;var to,no=function(){function e(t,n){h(this,e),this.name=t,this.node=n}return m(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),ro=function(){function e(){h(this,e)}return m(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new no(Yi,e),r=new no(Yi,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return no.MIN}}]),e}(),io=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){return Xi(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw hn("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return no.MIN}},{key:"maxPost",value:function(){return new no($i,to)}},{key:"makePost",value:function(e,t){return fn("string"===typeof e,"KeyIndex indexValue must always be a string."),new no(e,to)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return to},set:function(e){to=e}}]),n}(ro),ao=new io,oo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;h(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return m(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),uo=function(){function e(t,n,r,i,a){h(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:lo.EMPTY_NODE,this.right=null!=a?a:lo.EMPTY_NODE}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return lo.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return lo.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();uo.RED=!0,uo.BLACK=!1;var so,co=function(){function e(){h(this,e)}return m(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new uo(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),lo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;h(this,e),this.comparator_=t,this.root_=n}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,uo.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,uo.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new oo(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new oo(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new oo(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new oo(this.root_,null,this.comparator_,!0,e)}}]),e}();function fo(e,t){return Xi(e.name,t.name)}function ho(e,t){return Xi(e,t)}lo.EMPTY_NODE=new co;var po,vo,mo,yo=function(e){return"number"===typeof e?"number:"+ra(e):"string:"+e},go=function(e){if(e.isLeafNode()){var t=e.val();fn("string"===typeof t||"number"===typeof t||"object"===typeof t&&Mn(t,".sv"),"Priority must be a string or number.")}else fn(e===so||e.isEmpty(),"priority of unexpected type.");fn(e===so||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},wo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;h(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,fn(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),go(this.priorityNode_)}return m(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Wa(t)?this:".priority"===Fa(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Fa(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(fn(".priority"!==r||1===ja(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ua(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+yo(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?ra(this.value_):this.value_,this.lazyHash_=ji(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(fn(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return fn(i>=0,"Unknown leaf type: "+n),fn(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return po},set:function(e){po=e}}]),e}();wo.VALUE_TYPE_ORDER=["object","boolean","number","string"];var ko,_o,bo=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Xi(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return no.MIN}},{key:"maxPost",value:function(){return new no($i,new wo("[PRIORITY-POST]",mo))}},{key:"makePost",value:function(e,t){var n=vo(e);return new no(t,new wo("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(ro),xo=new bo,Eo=Math.log(2),So=function(){function e(t){h(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Eo,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return m(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Co=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new uo(o,a.node,uo.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new uo(o,a.node,uo.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new uo(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,uo.BLACK):(u(f,uo.BLACK),u(f,uo.RED))}return a}(new So(e.length));return new lo(r||t,a)},Io={},To=function(){function e(t,n){h(this,e),this.indexes_=t,this.indexSet_=n}return m(e,[{key:"get",value:function(e){var t=Fn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof lo?t:null}},{key:"hasIndex",value:function(e){return Mn(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){fn(t!==ao,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(no.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?Co(i,t.getCompare()):Io;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Un(this.indexes_,(function(e,i){var a=Fn(r.indexSet_,i);if(fn(a,"Missing index implementation for "+i),e===Io){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(no.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),Co(o,a.getCompare())}return Io}var c=n.get(t.name),l=e;return c&&(l=l.remove(new no(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Un(this.indexes_,(function(e){if(e===Io)return e;var r=n.get(t.name);return r?e.remove(new no(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return fn(Io&&xo,"ChildrenNode.ts has not been loaded"),ko=ko||new e({".priority":Io},{".priority":xo})}}]),e}(),No=function(){function e(t,n,r){h(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&go(this.priorityNode_),this.children_.isEmpty()&&fn(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return m(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||_o}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?_o:t}},{key:"getChild",value:function(e){var t=Fa(e);return null===t?this:this.getImmediateChild(t).getChild(Ua(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(fn(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new no(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?_o:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Fa(e);if(null===n)return t;fn(".priority"!==Fa(e)||1===ja(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Ua(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(xo,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+yo(this.getPriority().val())+":"),this.forEachChild(xo,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ji(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new no(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new no(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new no(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,no.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,no.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Do?-1:0}},{key:"withIndex",value:function(t){if(t===ao||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===ao||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(xo),r=t.getIterator(xo),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===ao?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return _o||(_o=new e(new lo(ho),null,To.Default))}}]),e}();No.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Do=new(function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.call(this,new lo(ho),No.EMPTY_NODE,To.Default)}return m(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return No.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(No));Object.defineProperties(no,{MIN:{value:new no(Yi,No.EMPTY_NODE)},MAX:{value:new no($i,Do)}}),io.__EMPTY_NODE=No.EMPTY_NODE,wo.__childrenNodeConstructor=No,so=Do,function(e){mo=e}(Do);var Ao=!0;function Po(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return No.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),fn(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new wo(e,Po(t));if(e instanceof Array||!Ao){var n=No.EMPTY_NODE;return na(e,(function(t,r){if(Mn(e,t)&&"."!==t.substring(0,1)){var i=Po(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(Po(t))}var r=[],i=!1;if(na(e,(function(e,t){if("."!==e.substring(0,1)){var n=Po(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new no(e,n)))}})),0===r.length)return No.EMPTY_NODE;var a=Co(r,fo,(function(e){return e.name}),ho);if(i){var o=Co(r,xo.getCompare());return new No(a,Po(t),new To({".priority":o},{".priority":xo}))}return new No(a,Po(t),To.Default)}!function(e){vo=e}(Po);var Ro=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this)).indexPath_=e,fn(!Wa(e)&&".priority"!==Fa(e),"Can't create PathIndex with empty path or .priority key"),r}return m(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Xi(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Po(e),r=No.EMPTY_NODE.updateChild(this.indexPath_,n);return new no(t,r)}},{key:"maxPost",value:function(){var e=No.EMPTY_NODE.updateChild(this.indexPath_,Do);return new no($i,e)}},{key:"toString",value:function(){return Va(this.indexPath_,0).join("/")}}]),n}(ro),Oo=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Xi(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return no.MIN}},{key:"maxPost",value:function(){return no.MAX}},{key:"makePost",value:function(e,t){var n=Po(e);return new no(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(ro),Lo=new Oo;function Mo(e){return{type:"value",snapshotNode:e}}function Fo(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function jo(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Uo(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var qo=function(){function e(t){h(this,e),this.index_=t}return m(e,[{key:"updateChild",value:function(e,t,n,r,i,a){fn(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(jo(t,o)):fn(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Fo(t,n)):a.trackChildChange(Uo(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(xo,(function(e,r){t.hasChild(e)||n.trackChildChange(jo(e,r))})),t.isLeafNode()||t.forEachChild(xo,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Uo(t,r,i))}else n.trackChildChange(Fo(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?No.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Vo=function(){function e(t){h(this,e),this.indexedFilter_=new qo(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return m(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new no(t,n))||(n=No.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=No.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(No.EMPTY_NODE);var i=this;return t.forEachChild(xo,(function(e,t){i.matches(new no(e,t))||(r=r.updateImmediateChild(e,No.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),zo=function(){function e(t){var n=this;h(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Vo(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return m(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new no(t,n))||(n=No.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=No.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=No.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var u;r=(r=t.withIndex(this.index_)).updatePriority(No.EMPTY_NODE),u=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var s=0;u.hasNext();){var c=u.getNext();s<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?s++:r=r.updateImmediateChild(c.name,No.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;fn(u.numChildren()===this.limit_,"");var s=new no(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Uo(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(jo(t,f));var p=u.updateImmediateChild(t,No.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(Fo(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(jo(c.name,c.node)),i.trackChildChange(Fo(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,No.EMPTY_NODE)):e}}]),e}(),Bo=function(){function e(){h(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xo}return m(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return fn(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return fn(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yi}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return fn(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return fn(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$i}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return fn(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===xo}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Wo(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ko(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Go(e,t){var n=e.copy();return n.index_=t,n}function Qo(e){var t,n={};if(e.isDefault())return n;if(e.index_===xo?t="$priority":e.index_===Lo?t="$value":e.index_===ao?t="$key":(fn(e.index_ instanceof Ro,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=On(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=On(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+On(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=On(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+On(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Ho(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==xo&&(t.i=e.index_.toString()),t}var Yo=function(e){g(n,e);var t=b(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Wi("p:rest:"),o.listens_={},o}return m(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=Qo(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Fn(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Qo(e._queryParams),r=e._path.toString(),i=new xn;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=f(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+function(e){for(var t=[],n=function(){var e=f(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Rn(c.responseText)}catch(n){Qi("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Qi("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(fn(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Da),$o=function(){function e(){h(this,e),this.rootNode_=No.EMPTY_NODE}return m(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Xo(){return{value:null,children:new Map}}function Jo(e,t,n){if(Wa(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Fa(t);e.children.has(r)||e.children.set(r,Xo()),Jo(e.children.get(r),t=Ua(t),n)}}function Zo(e,t){if(Wa(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(xo,(function(t,n){Jo(e,new La(t),n)})),Zo(e,t)}if(e.children.size>0){var r=Fa(t);if(t=Ua(t),e.children.has(r))Zo(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function eu(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){eu(r,new La(t.toString()+"/"+e),n)}))}var tu,nu=function(){function e(t){h(this,e),this.collection_=t,this.last_=null}return m(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&na(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),ru=function(){function e(t,n){h(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new nu(t);var r=1e4+2e4*Math.random();ua(this.reportStats_.bind(this),Math.floor(r))}return m(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;na(t,(function(t,i){i>0&&Mn(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),ua(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function iu(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(tu||(tu={}));var au,ou=function(){function e(t,n,r){h(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=tu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return m(e,[{key:"operationForChild",value:function(t){if(Wa(this.path)){if(null!=this.affectedTree.value)return fn(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new La(t));return new e(Ma(),n,this.revert)}return fn(Fa(this.path)===t,"operationForChild called for unrelated child."),new e(Ua(this.path),this.affectedTree,this.revert)}}]),e}(),uu=function(){function e(t,n){h(this,e),this.source=t,this.path=n,this.type=tu.LISTEN_COMPLETE}return m(e,[{key:"operationForChild",value:function(t){return Wa(this.path)?new e(this.source,Ma()):new e(this.source,Ua(this.path))}}]),e}(),su=function(){function e(t,n,r){h(this,e),this.source=t,this.path=n,this.snap=r,this.type=tu.OVERWRITE}return m(e,[{key:"operationForChild",value:function(t){return Wa(this.path)?new e(this.source,Ma(),this.snap.getImmediateChild(t)):new e(this.source,Ua(this.path),this.snap)}}]),e}(),cu=function(){function e(t,n,r){h(this,e),this.source=t,this.path=n,this.children=r,this.type=tu.MERGE}return m(e,[{key:"operationForChild",value:function(t){if(Wa(this.path)){var n=this.children.subtree(new La(t));return n.isEmpty()?null:n.value?new su(this.source,Ma(),n.value):new e(this.source,Ma(),n)}return fn(Fa(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Ua(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),lu=function(){function e(t,n,r){h(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return m(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Wa(e))return this.isFullyInitialized()&&!this.filtered_;var t=Fa(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),fu=m((function e(t){h(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function hu(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw hn("Should only compare child_ events.");var r=new no(t.childName,t.snapshotNode),i=new no(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function du(e,t){return{eventCache:e,serverCache:t}}function pu(e,t,n,r){return du(new lu(t,n,r),e.serverCache)}function vu(e,t,n,r){return du(e.eventCache,new lu(t,n,r))}function mu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function yu(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var gu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(au||(au=new lo(Ji)),au);h(this,e),this.value=t,this.children=n}return m(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Ma(),value:this.value};if(Wa(e))return null;var n=Fa(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Ua(e),t);return null!=i?{path:Ba(new La(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Wa(t))return this;var n=Fa(t),r=this.children.get(n);return null!==r?r.subtree(Ua(t)):new e(null)}},{key:"set",value:function(t,n){if(Wa(t))return new e(n,this.children);var r=Fa(t),i=(this.children.get(r)||new e(null)).set(Ua(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Wa(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Fa(t),r=this.children.get(n);if(r){var i,a=r.remove(Ua(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Wa(e))return this.value;var t=Fa(e),n=this.children.get(t);return n?n.get(Ua(e)):null}},{key:"setTree",value:function(t,n){if(Wa(t))return n;var r,i=Fa(t),a=(this.children.get(i)||new e(null)).setTree(Ua(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Ma(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Ba(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Ma(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Wa(e))return null;var i=Fa(e),a=this.children.get(i);return a?a.findOnPath_(Ua(e),Ba(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Ma(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Wa(t))return this;this.value&&r(n,this.value);var i=Fa(t),a=this.children.get(i);return a?a.foreachOnPath_(Ua(t),Ba(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Ma(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Ba(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return na(t,(function(e,t){n=n.set(new La(e),t)})),n}}]),e}(),wu=function(){function e(t){h(this,e),this.writeTree_=t}return m(e,null,[{key:"empty",value:function(){return new e(new gu(null))}}]),e}();function ku(e,t,n){if(Wa(t))return new wu(new gu(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Ka(i,t);return a=a.updateChild(o,n),new wu(e.writeTree_.set(i,a))}var u=new gu(n),s=e.writeTree_.setTree(t,u);return new wu(s)}function _u(e,t,n){var r=e;return na(n,(function(e,n){r=ku(r,Ba(t,e),n)})),r}function bu(e,t){if(Wa(t))return wu.empty();var n=e.writeTree_.setTree(t,new gu(null));return new wu(n)}function xu(e,t){return null!=Eu(e,t)}function Eu(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Ka(n.path,t)):null}function Su(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(xo,(function(e,n){t.push(new no(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new no(e,n.value))})),t}function Cu(e,t){if(Wa(t))return e;var n=Eu(e,t);return new wu(null!=n?new gu(n):e.writeTree_.subtree(t))}function Iu(e){return e.writeTree_.isEmpty()}function Tu(e,t){return Nu(Ma(),e.writeTree_,t)}function Nu(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(fn(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Nu(Ba(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Ba(e,".priority"),r)),n}function Du(e,t){return Bu(t,e)}function Au(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));fn(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&Pu(u,r.path)?i=!1:Ha(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Ou(e.allWrites,Ru,Ma()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=bu(e.visibleWrites,r.path):na(r.children,(function(t){e.visibleWrites=bu(e.visibleWrites,Ba(r.path,t))}));return!0}return!1}function Pu(e,t){if(e.snap)return Ha(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Ha(Ba(e.path,n),t))return!0;return!1}function Ru(e){return e.visible}function Ou(e,t,n){for(var r=wu.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Ha(n,o)?r=ku(r,u=Ka(n,o),a.snap):Ha(o,n)&&(u=Ka(o,n),r=ku(r,Ma(),a.snap.getChild(u)));else{if(!a.children)throw hn("WriteRecord should have .snap or .children");if(Ha(n,o))r=_u(r,u=Ka(n,o),a.children);else if(Ha(o,n))if(Wa(u=Ka(o,n)))r=_u(r,Ma(),a.children);else{var s=Fn(a.children,Fa(u));if(s){var c=s.getChild(Ua(u));r=ku(r,Ma(),c)}}}}}return r}function Lu(e,t,n,r,i){if(r||i){var a=Cu(e.visibleWrites,t);if(!i&&Iu(a))return n;if(i||null!=n||xu(a,Ma())){return Tu(Ou(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ha(e.path,t)||Ha(t,e.path))}),t),n||No.EMPTY_NODE)}return null}var o=Eu(e.visibleWrites,t);if(null!=o)return o;var u=Cu(e.visibleWrites,t);return Iu(u)?n:null!=n||xu(u,Ma())?Tu(u,n||No.EMPTY_NODE):null}function Mu(e,t,n,r){return Lu(e.writeTree,e.treePath,t,n,r)}function Fu(e,t){return function(e,t,n){var r=No.EMPTY_NODE,i=Eu(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(xo,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Cu(e.visibleWrites,t);return n.forEachChild(xo,(function(e,t){var n=Tu(Cu(a,new La(e)),t);r=r.updateImmediateChild(e,n)})),Su(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Su(Cu(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ju(e,t,n,r){return function(e,t,n,r,i){fn(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Ba(t,n);if(xu(e.visibleWrites,a))return null;var o=Cu(e.visibleWrites,a);return Iu(o)?i.getChild(n):Tu(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Uu(e,t){return function(e,t){return Eu(e.visibleWrites,t)}(e.writeTree,Ba(e.treePath,t))}function qu(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=Cu(e.visibleWrites,t),c=Eu(s,Ma());if(null!=c)u=c;else{if(null==n)return[];u=Tu(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function Vu(e,t,n){return function(e,t,n,r){var i=Ba(t,n),a=Eu(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Tu(Cu(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function zu(e,t){return Bu(Ba(e.treePath,t),e.writeTree)}function Bu(e,t){return{treePath:e,writeTree:t}}var Wu=function(){function e(){h(this,e),this.changeMap=new Map}return m(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;fn("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),fn(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Uo(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,jo(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Fo(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw hn("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Uo(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Ku=new(function(){function e(){h(this,e)}return m(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Gu=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return m(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new lu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vu(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:yu(this.viewCache_),i=qu(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Qu(e,t,n,r,i){var a,o,u=new Wu;if(n.type===tu.OVERWRITE){var s=n;s.source.fromUser?a=$u(e,t,s.path,s.snap,r,i,u):(fn(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!Wa(s.path),a=Yu(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===tu.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=Ba(n,r);Xu(t,Fa(c))&&(u=$u(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=Ba(n,r);Xu(t,Fa(c))||(u=$u(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(fn(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Zu(e,t,c.path,c.children,r,i,o,u))}else if(n.type===tu.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Uu(r,n))return t;var u,s=new Gu(r,t,i),c=t.eventCache.getNode();if(Wa(n)||".priority"===Fa(n)){var l;if(t.serverCache.isFullyInitialized())l=Mu(r,yu(t));else{var f=t.serverCache.getNode();fn(f instanceof No,"serverChildren would be complete if leaf node"),l=Fu(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=Fa(n),d=Vu(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,Ua(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,No.EMPTY_NODE,Ua(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Mu(r,yu(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Uu(r,Ma()),pu(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=Uu(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(Wa(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return Yu(e,t,n,s.getNode().getChild(n),i,a,u,o);if(Wa(n)){var c=new gu(null);return s.getNode().forEachChild(ao,(function(e,t){c=c.set(new La(e),t)})),Zu(e,t,n,c,i,a,u,o)}return t}var l=new gu(null);return r.foreach((function(e,t){var r=Ba(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),Zu(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==tu.LISTEN_COMPLETE)throw hn("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=vu(t,a.getNode(),a.isFullyInitialized()||Wa(n),a.isFiltered());return Hu(e,o,n,r,Ku,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=mu(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Mo(mu(t)))}}(t,a,f),{viewCache:a,changes:f}}function Hu(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=Uu(r,n))return t;if(Wa(n))if(fn(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=yu(t),l=Fu(r,c instanceof No?c:No.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=Mu(r,yu(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=Fa(n);if(".priority"===h){fn(1===ja(n),"Can't have a priority with additional path components");var d=s.getNode(),p=ju(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,m=Ua(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var y=ju(r,n,s.getNode(),u);v=null!=y?s.getNode().getImmediateChild(h).updateChild(m,y):s.getNode().getImmediateChild(h)}else v=Vu(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,m,i,a):s.getNode()}}return pu(t,o,s.isFullyInitialized()||Wa(n),e.filter.filtersNodes())}function Yu(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Wa(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=Fa(n);if(!c.isCompleteForPath(n)&&ja(n)>1)return t;var d=Ua(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,Ku,null)}var v=vu(t,s,c.isFullyInitialized()||Wa(n),l.filtersNodes());return Hu(e,v,n,i,new Gu(i,v,a),u)}function $u(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new Gu(i,t,a);if(Wa(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=pu(t,s,!0,e.filter.filtersNodes());else{var f=Fa(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=pu(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=Ua(n),p=c.getNode().getImmediateChild(f);if(Wa(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===qa(d)&&v.getChild(za(d)).isEmpty()?v:v.updateChild(d,r):No.EMPTY_NODE}if(p.equals(h))u=t;else u=pu(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function Xu(e,t){return e.eventCache.isCompleteForChild(t)}function Ju(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Zu(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=Wa(n)?r:new gu(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=Ju(0,t.serverCache.getNode().getImmediateChild(n),r);c=Yu(e,c,new La(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var f=Ju(0,t.serverCache.getNode().getImmediateChild(n),r);c=Yu(e,c,new La(n),f,i,a,o,u)}})),c}var es,ts=function(){function e(t,n){h(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new qo(i.getIndex()),o=(r=i).loadsAllData()?new qo(r.getIndex()):r.hasLimit()?new zo(r):new Vo(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(No.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(No.EMPTY_NODE,s.getNode(),null),f=new lu(c,u.isFullyInitialized(),a.filtersNodes()),d=new lu(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=du(d,f),this.eventGenerator_=new fu(this.query_)}return m(e,[{key:"query",get:function(){return this.query_}}]),e}();function ns(e,t){var n=yu(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Wa(t)&&!n.getImmediateChild(Fa(t)).isEmpty())?n.getChild(t):null}function rs(e){return 0===e.eventRegistrations_.length}function is(e,t,n){var r=[];if(n){fn(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function as(e,t,n,r){t.type===tu.MERGE&&null!==t.source.queryId&&(fn(yu(e.viewCache_),"We should always have a full cache before handling merges"),fn(mu(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=Qu(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,fn(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),fn(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),fn(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,os(e,u.changes,u.viewCache.eventCache.getNode(),null)}function os(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),hu(e,i,"child_removed",t,r,n),hu(e,i,"child_added",t,r,n),hu(e,i,"child_moved",a,r,n),hu(e,i,"child_changed",t,r,n),hu(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var us,ss=m((function e(){h(this,e),this.views=new Map}));function cs(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return fn(null!=a,"SyncTree gave us an op for an invalid query."),as(a,t,n,r)}var o,u=[],s=D(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(as(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function ls(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=Mu(n,i?r:null),s=!1;u?s=!0:r instanceof No?(u=Fu(n,r),s=!1):(u=No.EMPTY_NODE,s=!1);var c=du(new lu(u,s,!1),new lu(r,i,!1));return new ts(t,c)}return o}function fs(e,t,n,r,i,a){var o=ls(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(xo,(function(e,t){r.push(Fo(e,t))})),n.isFullyInitialized()&&r.push(Mo(n.getNode())),os(e,r,n.getNode(),t)}(o,n)}function hs(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=ys(e);if("default"===i){var s,c=D(e.views.entries());try{for(c.s();!(s=c.n()).done;){var l=f(s.value,2),h=l[0],d=l[1];o=o.concat(is(d,n,r)),rs(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(is(p,n,r)),rs(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!ys(e)&&a.push(new(fn(es,"Reference.ts has not been loaded"),es)(t._repo,t._path)),{removed:a,events:o}}function ds(e){var t,n=[],r=D(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function ps(e,t){var n,r=null,i=D(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||ns(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function vs(e,t){if(t._queryParams.loadsAllData())return gs(e);var n=t._queryIdentifier;return e.views.get(n)}function ms(e,t){return null!=vs(e,t)}function ys(e){return null!=gs(e)}function gs(e){var t,n=D(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var ws=1,ks=m((function e(t){h(this,e),this.listenProvider_=t,this.syncPointTree_=new gu(null),this.pendingWriteTree_={visibleWrites:wu.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function _s(e,t,n,r,i){return function(e,t,n,r,i){fn(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=ku(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Ds(e,new su({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function bs(e,t,n,r){!function(e,t,n,r){fn(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=_u(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=gu.fromObject(n);return Ds(e,new cu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function xs(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Au(e.pendingWriteTree_,t)){var i=new gu(null);return null!=r.snap?i=i.set(Ma(),!0):na(r.children,(function(e){i=i.set(new La(e),!0)})),Ds(e,new ou(r.path,i,n))}return[]}function Es(e,t,n){return Ds(e,new su({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Ss(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||ms(o,t))){var s=hs(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return ys(t)}));if(l&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&ys(t))return[gs(t)];var r=[];return t&&(r=ds(t)),na(n,(function(e,t){r=r.concat(t)})),r}))}(h),p=0;p<d.length;++p){var v=d[p],m=v.query,y=Rs(e,v);e.listenProvider_.startListening(Us(m),Os(e,m),y.hashFn,y.onComplete)}}if(!f&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(Us(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(Ls(t));e.listenProvider_.stopListening(Us(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Ls(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return u}function Cs(e,t,n,r){var i=Ms(e,r);if(null!=i){var a=Fs(i),o=a.path,u=a.queryId,s=Ka(o,t);return js(e,o,new su(iu(u),s,n))}return[]}function Is(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=Ka(e,i);a=a||ps(t,n),o=o||ys(t)}));var u,s=e.syncPointTree_.get(i);(s?(o=o||ys(s),a=a||ps(s,Ma())):(s=new ss,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)?u=!0:(u=!1,a=No.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=ps(t,Ma());n&&(a=a.updateImmediateChild(e,n))})));var c=ms(s,t);if(!c&&!t._queryParams.loadsAllData()){var l=Ls(t);fn(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var f=ws++;e.queryToTagMap.set(l,f),e.tagToQueryMap.set(f,l)}var h=fs(s,t,n,Du(e.pendingWriteTree_,i),a,u);if(!c&&!o&&!r){var d=vs(s,t);h=h.concat(function(e,t,n){var r=t._path,i=Os(e,t),a=Rs(e,n),o=e.listenProvider_.startListening(Us(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)fn(!ys(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!Wa(e)&&t&&ys(t))return[gs(t).query];var r=[];return t&&(r=r.concat(ds(t).map((function(e){return e.query})))),na(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(Us(l),Os(e,l))}return o}(e,t,d))}return h}function Ts(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=ps(n,Ka(e,t));if(r)return r}));return Lu(r,t,i,n,!0)}function Ns(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Ka(e,n);r=r||ps(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||ps(i,Ma()):(i=new ss,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new lu(r,!0,!1):null;return function(e){return mu(e.viewCache_)}(ls(i,t,Du(e.pendingWriteTree_,t._path),a?o.getNode():No.EMPTY_NODE,a))}function Ds(e,t){return As(t,e.syncPointTree_,null,Du(e.pendingWriteTree_,Ma()))}function As(e,t,n,r){if(Wa(e.path))return Ps(e,t,n,r);var i=t.get(Ma());null==n&&null!=i&&(n=ps(i,Ma()));var a=[],o=Fa(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=zu(r,o);a=a.concat(As(u,s,c,l))}return i&&(a=a.concat(cs(i,e,r,n))),a}function Ps(e,t,n,r){var i=t.get(Ma());null==n&&null!=i&&(n=ps(i,Ma()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=zu(r,t),s=e.operationForChild(t);s&&(a=a.concat(Ps(s,i,o,u)))})),i&&(a=a.concat(cs(i,e,r,n))),a}function Rs(e,t){var n=t.query,r=Os(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||No.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Ms(e,n);if(r){var i=Fs(r),a=i.path,o=i.queryId,u=Ka(a,t);return js(e,a,new uu(iu(o),u))}return[]}(e,n._path,r):function(e,t){return Ds(e,new uu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Ss(e,n,null,i)}}}function Os(e,t){var n=Ls(t);return e.queryToTagMap.get(n)}function Ls(e){return e._path.toString()+"$"+e._queryIdentifier}function Ms(e,t){return e.tagToQueryMap.get(t)}function Fs(e){var t=e.indexOf("$");return fn(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new La(e.substr(0,t))}}function js(e,t,n){var r=e.syncPointTree_.get(t);return fn(r,"Missing sync point for query tag that we're tracking"),cs(r,n,Du(e.pendingWriteTree_,t),null)}function Us(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(fn(us,"Reference.ts has not been loaded"),us)(e._repo,e._path):e}var qs=function(){function e(t){h(this,e),this.node_=t}return m(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Vs=function(){function e(t,n){h(this,e),this.syncTree_=t,this.path_=n}return m(e,[{key:"getImmediateChild",value:function(t){var n=Ba(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Ts(this.syncTree_,this.path_)}}]),e}(),zs=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Bs=function(e,t,n){return e&&"object"===typeof e?(fn(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Ws(e[".sv"],t,n):"object"===typeof e[".sv"]?Ks(e[".sv"],t):void fn(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ws=function(e,t,n){if("timestamp"===e)return n.timestamp;fn(!1,"Unexpected server value: "+e)},Ks=function(e,t,n){e.hasOwnProperty("increment")||fn(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&fn(!1,"Unexpected increment value: "+r);var i=t.node();if(fn(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Gs=function(e,t,n,r){return Hs(t,new Vs(n,e),r)},Qs=function(e,t,n){return Hs(e,new qs(t),n)};function Hs(e,t,n){var r,i=e.getPriority().val(),a=Bs(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=Bs(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new wo(u,Po(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new wo(a))),s.forEachChild(xo,(function(e,i){var a=Hs(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Ys=m((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};h(this,e),this.name=t,this.parent=n,this.node=r}));function $s(e,t){for(var n=t instanceof La?t:new La(t),r=e,i=Fa(n);null!==i;){var a=Fn(r.node.children,i)||{children:{},childCount:0};r=new Ys(i,r,a),i=Fa(n=Ua(n))}return r}function Xs(e){return e.node.value}function Js(e,t){e.node.value=t,rc(e)}function Zs(e){return e.node.childCount>0}function ec(e,t){na(e.node.children,(function(n,r){t(new Ys(n,e,r))}))}function tc(e,t,n,r){n&&!r&&t(e),ec(e,(function(e){tc(e,t,!0,r)})),n&&r&&t(e)}function nc(e){return new La(null===e.parent?e.name:nc(e.parent)+"/"+e.name)}function rc(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Xs(e)&&!Zs(e)}(n),i=Mn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,rc(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,rc(e))}(e.parent,e.name,e)}var ic=/[\[\].#$\/\u0000-\u001F\u007F]/,ac=/[\[\].#$\u0000-\u001F\u007F]/,oc=10485760,uc=function(e){return"string"===typeof e&&0!==e.length&&!ic.test(e)},sc=function(e){return"string"===typeof e&&0!==e.length&&!ac.test(e)},cc=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Hi(e)||e&&"object"===typeof e&&Mn(e,".sv")},lc=function(e,t,n,r){r&&void 0===t||fc(Qn(e,"value"),t,n)},fc=function e(t,n,r){var i=r instanceof La?new Ya(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Xa(i));if("function"===typeof n)throw new Error(t+"contains a function "+Xa(i)+" with contents = "+n.toString());if(Hi(n))throw new Error(t+"contains "+n.toString()+" "+Xa(i));if("string"===typeof n&&n.length>oc/3&&$n(n)>oc)throw new Error(t+"contains a string greater than "+oc+" utf8 bytes "+Xa(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(na(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!uc(n)))throw new Error(t+" contains an invalid key ("+n+") "+Xa(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=$n(s),$a(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=$n(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Xa(i)+" in addition to actual children.")}},hc=function(e,t,n,r){if(!r||void 0!==t){var i=Qn(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];na(t,(function(e,t){var r=new La(e);if(fc(i,t,Ba(n,r)),".priority"===qa(r)&&!cc(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Va(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!uc(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Ga);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&Ha(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},dc=function(e,t,n){if(!n||void 0!==t){if(Hi(t))throw new Error(Qn(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!cc(t))throw new Error(Qn(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pc=function(e,t,n,r){if((!r||void 0!==n)&&!uc(n))throw new Error(Qn(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},vc=function(e,t,n,r){if((!r||void 0!==n)&&!sc(n))throw new Error(Qn(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},mc=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),vc(e,t,n,r)},yc=function(e,t){if(".info"===Fa(t))throw new Error(e+" failed = Can't modify data under /.info/")},gc=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!uc(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),sc(e)}(n))throw new Error(Qn(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},wc=m((function e(){h(this,e),this.eventLists_=[],this.recursionDepth_=0}));function kc(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Qa(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function _c(e,t,n){kc(e,n),xc(e,(function(e){return Qa(e,t)}))}function bc(e,t,n){kc(e,n),xc(e,(function(e){return Ha(e,t)||Ha(t,e)}))}function xc(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Ec(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Ec(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();qi&&Bi("event: "+n.toString()),oa(r)}}}var Sc="repo_interrupt",Cc=25,Ic=function(){function e(t,n,r,i){h(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xo(),this.transactionQueueTree_=new Ys,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return m(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Tc(e,t,n){if(e.stats_=_a(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Yo(e.repoInfo_,(function(t,n,r,i){Ac(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Pc(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{On(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new eo(e.repoInfo_,t,(function(t,n,r,i){Ac(e,t,n,r,i)}),(function(t){Pc(e,t)}),(function(t){!function(e,t){na(t,(function(t,n){Rc(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return ka[n]||(ka[n]=t()),ka[n]}(e.repoInfo_,(function(){return new ru(e.stats_,e.server_)})),e.infoData_=new $o,e.infoSyncTree_=new ks({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Es(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Rc(e,"connected",!1),e.serverSyncTree_=new ks({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);bc(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Nc(e){var t=e.infoData_.getNode(new La(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Dc(e){return zs({timestamp:Nc(e)})}function Ac(e,t,n,r,i){e.dataUpdateCount++;var a=new La(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Un(n,(function(e){return Po(e)}));o=function(e,t,n,r){var i=Ms(e,r);if(i){var a=Fs(i),o=a.path,u=a.queryId,s=Ka(o,t),c=gu.fromObject(n);return js(e,o,new cu(iu(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=Po(n);o=Cs(e.serverSyncTree_,a,s,i)}else if(r){var c=Un(n,(function(e){return Po(e)}));o=function(e,t,n){var r=gu.fromObject(n);return Ds(e,new cu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Po(n);o=Es(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=Wc(e,a)),bc(e.eventQueue_,f,o)}function Pc(e,t){Rc(e,"connected",t),!1===t&&function(e){qc(e,"onDisconnectEvents");var t=Dc(e),n=Xo();eu(e.onDisconnect_,Ma(),(function(r,i){var a=Gs(r,i,e.serverSyncTree_,t);Jo(n,r,a)}));var r=[];eu(n,Ma(),(function(t,n){r=r.concat(Es(e.serverSyncTree_,t,n));var i=Yc(e,t);Wc(e,i)})),e.onDisconnect_=Xo(),bc(e.eventQueue_,Ma(),r)}(e)}function Rc(e,t,n){var r=new La("/.info/"+t),i=Po(n);e.infoData_.updateSnapshot(r,i);var a=Es(e.infoSyncTree_,r,i);bc(e.eventQueue_,r,a)}function Oc(e){return e.nextWriteId_++}function Lc(e,t,n,r,i){qc(e,"set",{path:t.toString(),value:n,priority:r});var a=Dc(e),o=Po(n,r),u=Ts(e.serverSyncTree_,t),s=Qs(o,u,a),c=Oc(e),l=_s(e.serverSyncTree_,t,s,c,!0);kc(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Qi("set at "+t+" failed: "+n);var o=xs(e.serverSyncTree_,c,!a);bc(e.eventQueue_,t,o),Vc(e,i,n,r)}));var f=Yc(e,t);Wc(e,f),bc(e.eventQueue_,f,[])}function Mc(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Zo(e.onDisconnect_,t),Vc(e,n,r,i)}))}function Fc(e,t,n,r){var i=Po(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&Jo(e.onDisconnect_,t,i),Vc(e,r,n,a)}))}function jc(e,t,n){var r;r=".info"===Fa(t._path)?Ss(e.infoSyncTree_,t,n):Ss(e.serverSyncTree_,t,n),_c(e.eventQueue_,t._path,r)}function Uc(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Sc)}function qc(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Bi.apply(void 0,[t].concat(r))}function Vc(e,t,n,r){t&&oa((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function zc(e,t,n){return Ts(e.serverSyncTree_,t,n)||No.EMPTY_NODE}function Bc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Hc(e,t),Xs(t)){var n=Gc(e,t);fn(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=zc(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];fn(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=Ka(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){qc(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(xs(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);Hc(e,$s(e.transactionQueueTree_,t)),Bc(e,e.transactionQueueTree_),bc(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)oa(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Qi("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Wc(e,t)}}),o)}(e,nc(t),n)}else Zs(t)&&ec(t,(function(t){Bc(e,t)}))}function Wc(e,t){var n=Kc(e,t),r=nc(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,c=t[a],l=Ka(n,c.path),f=!1;if(fn(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,u=c.abortReason,i=i.concat(xs(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=Cc)f=!0,u="maxretry",i=i.concat(xs(e.serverSyncTree_,c.currentWriteId,!0));else{var h=zc(e,c.path,o);c.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){fc("transaction failed: Data returned ",d,c.path);var p=Po(d);"object"===typeof d&&null!=d&&Mn(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=c.currentWriteId,m=Dc(e),y=Qs(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=Oc(e),o.splice(o.indexOf(v),1),i=(i=i.concat(_s(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(xs(e.serverSyncTree_,v,!0))}else f=!0,u="nodata",i=i.concat(xs(e.serverSyncTree_,c.currentWriteId,!0))}bc(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);Hc(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)oa(r[c]);Bc(e,e.transactionQueueTree_)}(e,Gc(e,n),r),r}function Kc(e,t){var n,r=e.transactionQueueTree_;for(n=Fa(t);null!==n&&void 0===Xs(r);)r=$s(r,n),n=Fa(t=Ua(t));return r}function Gc(e,t){var n=[];return Qc(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Qc(e,t,n){var r=Xs(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);ec(t,(function(t){Qc(e,t,n)}))}function Hc(e,t){var n=Xs(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Js(t,n.length>0?n:void 0)}ec(t,(function(t){Hc(e,t)}))}function Yc(e,t){var n=nc(Kc(e,t)),r=$s(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){$c(e,t)})),$c(e,r),tc(r,(function(t){$c(e,t)})),n}function $c(e,t){var n=Xs(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(fn(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(fn(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(xs(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Js(t,void 0):n.length=a+1,bc(e.eventQueue_,nc(t),i);for(var u=0;u<r.length;u++)oa(r[u])}}var Xc=function(e,t){var n=Jc(e),r=n.namespace;"firebase.com"===n.domain&&Gi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Gi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ma(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new La(n.pathString)}},Jc=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=D(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Qi("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},Zc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",el=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Zc.charAt(n%64),n=Math.floor(n/64);fn(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Zc.charAt(t[r]);return fn(20===o.length,"nextPushId: Length should be 20."),o}}(),tl=function(){function e(t,n,r,i){h(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return m(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+On(this.snapshot.exportVal())}}]),e}(),nl=function(){function e(t,n,r){h(this,e),this.eventRegistration=t,this.error=n,this.path=r}return m(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),rl=function(){function e(t,n){h(this,e),this.snapshotCallback=t,this.cancelCallback=n}return m(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return fn(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),il=function(){function e(t,n){h(this,e),this._repo=t,this._path=n}return m(e,[{key:"cancel",value:function(){var e=new xn;return Mc(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){yc("OnDisconnect.remove",this._path);var e=new xn;return Fc(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){yc("OnDisconnect.set",this._path),lc("OnDisconnect.set",e,this._path,!1);var t=new xn;return Fc(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){yc("OnDisconnect.setWithPriority",this._path),lc("OnDisconnect.setWithPriority",e,this._path,!1),dc("OnDisconnect.setWithPriority",t,!1);var n=new xn;return function(e,t,n,r,i){var a=Po(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&Jo(e.onDisconnect_,t,a),Vc(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){yc("OnDisconnect.update",this._path),hc("OnDisconnect.update",e,this._path,!1);var t=new xn;return function(e,t,n,r){if(jn(n))return Bi("onDisconnect().update() called with empty data.  Don't do anything."),void Vc(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&na(n,(function(n,r){var i=Po(r);Jo(e.onDisconnect_,Ba(t,n),i)})),Vc(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),al=function(){function e(t,n,r,i){h(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return m(e,[{key:"key",get:function(){return Wa(this._path)?null:qa(this._path)}},{key:"ref",get:function(){return new cl(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Ho(this._queryParams),t=ea(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Ho(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Xn(t))instanceof e))return!1;var n=this._repo===t._repo,r=Qa(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function ol(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function ul(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ao){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Yi)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==$i)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===xo){if(null!=t&&!cc(t)||null!=n&&!cc(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(fn(e.getIndex()instanceof Ro||e.getIndex()===Lo,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function sl(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var cl=function(e){g(n,e);var t=b(n);function n(e,r){return h(this,n),t.call(this,e,r,new Bo,!1)}return m(n,[{key:"parent",get:function(){var e=za(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(al),ll=function(){function e(t,n,r){h(this,e),this._node=t,this.ref=n,this._index=r}return m(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new La(t),r=dl(this.ref,t);return new e(this._node.getChild(n),r,xo)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,dl(n.ref,r),xo))}))}},{key:"hasChild",value:function(e){var t=new La(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function fl(e,t){return(e=Xn(e))._checkNotDeleted("ref"),void 0!==t?dl(e._root,t):e._root}function hl(e,t){(e=Xn(e))._checkNotDeleted("refFromURL");var n=Xc(t,e._repo.repoInfo_.nodeAdmin);gc("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Gi("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),fl(e,n.path.toString())}function dl(e,t){return null===Fa((e=Xn(e))._path)?mc("child","path",t,!1):vc("child","path",t,!1),new cl(e._repo,Ba(e._path,t))}function pl(e,t){e=Xn(e),yc("set",e._path),lc("set",t,e._path,!1);var n=new xn;return Lc(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function vl(e,t){hc("update",t,e._path,!1);var n=new xn;return function(e,t,n,r){qc(e,"update",{path:t.toString(),value:n});var i=!0,a=Dc(e),o={};if(na(n,(function(n,r){i=!1,o[n]=Gs(Ba(t,n),Po(r),e.serverSyncTree_,a)})),i)Bi("update() called with empty data.  Don't do anything."),Vc(0,r,"ok",void 0);else{var u=Oc(e),s=bs(e.serverSyncTree_,t,o,u);kc(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||Qi("update at "+t+" failed: "+n);var o=xs(e.serverSyncTree_,u,!a),s=o.length>0?Wc(e,t):t;bc(e.eventQueue_,s,o),Vc(0,r,n,i)})),na(n,(function(n){var r=Yc(e,Ba(t,n));Wc(e,r)})),bc(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function ml(e){e=Xn(e);var t=new rl((function(){})),n=new yl(t);return function(e,t,n){var r=Ns(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=Po(r).withIndex(t._queryParams.getIndex());if(Is(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=Es(e.serverSyncTree_,t._path,a);else{var o=Os(e.serverSyncTree_,t);i=Cs(e.serverSyncTree_,t._path,a,o)}return bc(e.eventQueue_,t._path,i),Ss(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return qc(e,"get for query "+On(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new ll(t,new cl(e._repo,e._path),e._queryParams.getIndex())}))}var yl=function(){function e(t){h(this,e),this.callbackContext=t}return m(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new tl("value",this,new ll(e.snapshotNode,new cl(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new nl(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),gl=function(){function e(t,n){h(this,e),this.eventType=t,this.callbackContext=n}return m(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new nl(this,e,t):null}},{key:"createEvent",value:function(e,t){fn(null!=e.childName,"Child events should have a childName.");var n=dl(new cl(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new tl(e.type,this,new ll(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function wl(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){jc(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new rl(n,a||void 0),c="value"===t?new yl(s):new gl(t,s);return function(e,t,n){var r;r=".info"===Fa(t._path)?Is(e.infoSyncTree_,t,n):Is(e.serverSyncTree_,t,n),_c(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return jc(e._repo,e,c)}}function kl(e,t,n,r){return wl(e,"value",t,n,r)}function _l(e,t,n,r){return wl(e,"child_added",t,n,r)}function bl(e,t,n,r){return wl(e,"child_changed",t,n,r)}function xl(e,t,n,r){return wl(e,"child_moved",t,n,r)}function El(e,t,n,r){return wl(e,"child_removed",t,n,r)}function Sl(e,t,n){var r=null,i=n?new rl(n):null;"value"===t?r=new yl(i):t&&(r=new gl(t,i)),jc(e._repo,e,r)}var Cl=m((function e(){h(this,e)})),Il=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i.type="endAt",i}return m(n,[{key:"_apply",value:function(e){lc("endAt",this._value,e._path,!0);var t=Ko(e._queryParams,this._value,this._key);if(sl(t),ul(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new al(e._repo,e._path,t,e._orderByCalled)}}]),n}(Cl);var Tl=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i.type="endBefore",i}return m(n,[{key:"_apply",value:function(e){lc("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===ao||n?Ko(e,t,n):Ko(e,t,Yi)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(sl(t),ul(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new al(e._repo,e._path,t,e._orderByCalled)}}]),n}(Cl);var Nl=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i.type="startAt",i}return m(n,[{key:"_apply",value:function(e){lc("startAt",this._value,e._path,!0);var t=Wo(e._queryParams,this._value,this._key);if(sl(t),ul(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new al(e._repo,e._path,t,e._orderByCalled)}}]),n}(Cl);var Dl=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i.type="startAfter",i}return m(n,[{key:"_apply",value:function(e){lc("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===ao||n?Wo(e,t,n):Wo(e,t,$i)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(sl(t),ul(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new al(e._repo,e._path,t,e._orderByCalled)}}]),n}(Cl);var Al=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this))._limit=e,r.type="limitToFirst",r}return m(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new al(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(Cl);var Pl=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this))._limit=e,r.type="limitToLast",r}return m(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new al(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(Cl);var Rl=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this))._path=e,r.type="orderByChild",r}return m(n,[{key:"_apply",value:function(e){ol(e,"orderByChild");var t=new La(this._path);if(Wa(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Ro(t),r=Go(e._queryParams,n);return ul(r),new al(e._repo,e._path,r,!0)}}]),n}(Cl);var Ol=function(e){g(n,e);var t=b(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).type="orderByKey",e}return m(n,[{key:"_apply",value:function(e){ol(e,"orderByKey");var t=Go(e._queryParams,ao);return ul(t),new al(e._repo,e._path,t,!0)}}]),n}(Cl);var Ll=function(e){g(n,e);var t=b(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).type="orderByPriority",e}return m(n,[{key:"_apply",value:function(e){ol(e,"orderByPriority");var t=Go(e._queryParams,xo);return ul(t),new al(e._repo,e._path,t,!0)}}]),n}(Cl);var Ml=function(e){g(n,e);var t=b(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).type="orderByValue",e}return m(n,[{key:"_apply",value:function(e){ol(e,"orderByValue");var t=Go(e._queryParams,Lo);return ul(t),new al(e._repo,e._path,t,!0)}}]),n}(Cl);var Fl=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i.type="equalTo",i}return m(n,[{key:"_apply",value:function(e){if(lc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Il(this._value,this._key)._apply(new Nl(this._value,this._key)._apply(e))}}]),n}(Cl);function jl(e){for(var t=Xn(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){fn(!es,"__referenceConstructor has already been defined"),es=e}(cl),function(e){fn(!us,"__referenceConstructor has already been defined"),us=e}(cl);var Ul="FIREBASE_DATABASE_EMULATOR_HOST",ql={},Vl=!1;function zl(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Gi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bi("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=Xc(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_EMAILJS_PUBLIC_KEY:"r-a4WdmKt1jr0njGg",REACT_APP_EMAILJS_SERVICE_KEY:"service_9k4k603",REACT_APP_EMAILJS_TEMPLATE_KEY:"template_wsaffu5",REACT_APP_FIREBASE_API_KEY:"AIzaSyDyUh44q0n5FfpE3h8xyVOBTHIJwR4NIPg",REACT_APP_VARIABLE:"value"}[Ul]),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=Xc(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new la(la.OWNER):new ca(e.name,e.options,t);gc("Invalid Firebase Database URL",u),Wa(u.path)||Gi("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=ql[t.name];i||(i={},ql[t.name]=i);var a=i[e.toURLString()];a&&Gi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Ic(e,Vl,n,r),i[e.toURLString()]=a,a}(s,e,l,new sa(e.name,n));return new Bl(f,e)}var Bl=function(){function e(t,n){h(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return m(e,[{key:"_repo",get:function(){return this._instanceStarted||(Tc(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new cl(this._repo,Ma())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=ql[t];n&&n[e.key]===e||Gi("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Uc(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Gi("Cannot call "+e+" on a deleted database.")}}]),e}();function Wl(){Ta.IS_TRANSPORT_INITIALIZED&&Qi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Kl(){Wl(),Ea.forceDisallow()}function Gl(){Wl(),Ia.forceDisallow(),Ea.forceAllow()}function Ql(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Xn(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Gi("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new la(la.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:En(r.mockUserToken,e.app.options.projectId);a=new la(o)}!function(e,t,n,r){e.repoInfo_=new ma("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function Hl(e){var t;(e=Xn(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Sc)}function Yl(e,t){zi(e,t)}var $l={".sv":"timestamp"};var Xl=function(){function e(t,n){h(this,e),this.committed=t,this.snapshot=n}return m(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Jl(e,t,n){var r;if(e=Xn(e),yc("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new xn,o=kl(e,(function(){}));return function(e,t,n,r,i,a){qc(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:Fi(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=zc(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{fc("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=$s(e.transactionQueueTree_,t),f=Xs(l)||[];f.push(o),Js(l,f),"object"===typeof s&&null!==s&&Mn(s,".priority")?(c=Fn(s,".priority"),fn(cc(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(Ts(e.serverSyncTree_,t)||No.EMPTY_NODE).getPriority().val();var h=Dc(e),d=Po(s,c),p=Qs(d,u,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=Oc(e);var v=_s(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);bc(e.eventQueue_,t,v),Bc(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new ll(r,new cl(e._repo,e._path),xo),a.resolve(new Xl(n,i)))}),o,i),a.promise}eo.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},eo.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Di(Hr),Vr(new Jn("database",(function(e,t){var n=t.instanceIdentifier;return zl(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ei(Ii,Ti,e),ei(Ii,Ti,"esm2017")}();var Zl=new cr("@firebase/database-compat"),ef=function(e){var t="FIREBASE WARNING: "+e;Zl.warn(t)},tf=function(){function e(t){h(this,e),this._delegate=t}return m(e,[{key:"cancel",value:function(e){Gn("OnDisconnect.cancel",0,1,arguments.length),Hn("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Gn("OnDisconnect.remove",0,1,arguments.length),Hn("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Gn("OnDisconnect.set",1,2,arguments.length),Hn("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Gn("OnDisconnect.setWithPriority",2,3,arguments.length),Hn("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Gn("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ef("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Hn("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),nf=function(){function e(t,n){h(this,e),this.committed=t,this.snapshot=n}return m(e,[{key:"toJSON",value:function(){return Gn("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),rf=function(){function e(t,n){h(this,e),this._database=t,this._delegate=n}return m(e,[{key:"val",value:function(){return Gn("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Gn("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Gn("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Gn("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Gn("DataSnapshot.child",0,1,arguments.length),t=String(t),vc("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Gn("DataSnapshot.hasChild",1,1,arguments.length),vc("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Gn("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Gn("DataSnapshot.forEach",1,1,arguments.length),Hn("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Gn("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Gn("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Gn("DataSnapshot.ref",0,0,arguments.length),new of(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),af=function(){function e(t,n){h(this,e),this.database=t,this._delegate=n}return m(e,[{key:"on",value:function(t,n,r,i){var a,o=this;Gn("Query.on",2,4,arguments.length),Hn("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new rf(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return kl(this._delegate,s,c),n;case"child_added":return _l(this._delegate,s,c),n;case"child_removed":return El(this._delegate,s,c),n;case"child_changed":return bl(this._delegate,s,c),n;case"child_moved":return xl(this._delegate,s,c),n;default:throw new Error(Qn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Gn("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Qn(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Hn("Query.off","callback",t,!0),Yn("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,Sl(this._delegate,e,r)}else Sl(this._delegate,e)}},{key:"get",value:function(){var e=this;return ml(this._delegate).then((function(t){return new rf(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;Gn("Query.once",1,4,arguments.length),Hn("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new xn,s=function(e,t){var r=new rf(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":kl(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":_l(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":El(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":bl(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":xl(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(Qn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return Gn("Query.limitToFirst",1,1,arguments.length),new e(this.database,jl(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Al(e)}(t)))}},{key:"limitToLast",value:function(t){return Gn("Query.limitToLast",1,1,arguments.length),new e(this.database,jl(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Pl(e)}(t)))}},{key:"orderByChild",value:function(t){return Gn("Query.orderByChild",1,1,arguments.length),new e(this.database,jl(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return vc("orderByChild","path",e,!1),new Rl(e)}(t)))}},{key:"orderByKey",value:function(){return Gn("Query.orderByKey",0,0,arguments.length),new e(this.database,jl(this._delegate,new Ol))}},{key:"orderByPriority",value:function(){return Gn("Query.orderByPriority",0,0,arguments.length),new e(this.database,jl(this._delegate,new Ll))}},{key:"orderByValue",value:function(){return Gn("Query.orderByValue",0,0,arguments.length),new e(this.database,jl(this._delegate,new Ml))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gn("Query.startAt",0,2,arguments.length),new e(this.database,jl(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return pc("startAt","key",t,!0),new Nl(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gn("Query.startAfter",0,2,arguments.length),new e(this.database,jl(this._delegate,function(e,t){return pc("startAfter","key",t,!0),new Dl(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gn("Query.endAt",0,2,arguments.length),new e(this.database,jl(this._delegate,function(e,t){return pc("endAt","key",t,!0),new Il(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gn("Query.endBefore",0,2,arguments.length),new e(this.database,jl(this._delegate,function(e,t){return pc("endBefore","key",t,!0),new Tl(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return Gn("Query.equalTo",1,2,arguments.length),new e(this.database,jl(this._delegate,function(e,t){return pc("equalTo","key",t,!0),new Fl(e,t)}(t,n)))}},{key:"toString",value:function(){return Gn("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Gn("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Gn("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new of(this.database,new cl(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Hn(e,"cancel",r.cancel,!0),r.context=n,Yn(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Qn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),of=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,new al(r._repo,r._path,new Bo,!1))).database=e,i._delegate=r,i}return m(n,[{key:"getKey",value:function(){return Gn("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Gn("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,dl(this._delegate,e))}},{key:"getParent",value:function(){Gn("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Gn("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Gn("Reference.set",1,2,arguments.length),Hn("Reference.set","onComplete",t,!0);var n=pl(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Gn("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ef("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yc("Reference.update",this._delegate._path),Hn("Reference.update","onComplete",t,!0);var i=vl(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Gn("Reference.setWithPriority",2,3,arguments.length),Hn("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(yc("setWithPriority",e._path),lc("setWithPriority",t,e._path,!1),dc("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new xn;return Lc(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Gn("Reference.remove",0,1,arguments.length),Hn("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,yc("remove",t._path),pl(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;Gn("Reference.transaction",1,3,arguments.length),Hn("Reference.transaction","transactionUpdate",e,!1),Hn("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Qn(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=Jl(this._delegate,e,{applyLocally:n}).then((function(e){return new nf(e.committed,new rf(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Gn("Reference.setPriority",1,2,arguments.length),Hn("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=Xn(e),yc("setPriority",e._path),dc("setPriority",t,!1);var n=new xn;return Lc(e._repo,Ba(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Gn("Reference.push",0,2,arguments.length),Hn("Reference.push","onComplete",t,!0);var i=function(e,t){e=Xn(e),yc("push",e._path),lc("push",t,e._path,!0);var n,r=Nc(e._repo),i=el(r),a=dl(e,i),o=dl(e,i);return n=null!=t?pl(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return yc("Reference.onDisconnect",this._delegate._path),new tf(new il(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(af),uf=function(){function e(t,n){var r=this;h(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:Kl,forceLongPolling:Gl}}return m(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ql(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Gn("database.ref",0,1,arguments.length),e instanceof of){var t=hl(this._delegate,e.toString());return new of(this,t)}var n=fl(this._delegate,e);return new of(this,n)}},{key:"refFromURL",value:function(e){Gn("database.refFromURL",1,1,arguments.length);var t=hl(this._delegate,e);return new of(this,t)}},{key:"goOffline",value:function(){return Gn("database.goOffline",0,0,arguments.length),function(e){(e=Xn(e))._checkNotDeleted("goOffline"),Uc(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return Gn("database.goOnline",0,0,arguments.length),Hl(this._delegate)}}]),e}();uf.ServerValue={TIMESTAMP:$l,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var sf,cf=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.customAppCheckImpl,o=e.namespace,u=e.nodeAdmin,s=void 0!==u&&u;Di(r);var c=new rr("database-standalone"),l=new er("auth-internal",c);l.setComponent(new Jn("auth-internal",(function(){return i}),"PRIVATE"));var f=void 0;return a&&(f=new er("app-check-internal",c)).setComponent(new Jn("app-check-internal",(function(){return a}),"PRIVATE")),{instance:new uf(zl(t,l,f,n,s),t),namespace:o}}}),lf=uf.ServerValue;function ff(){return ff="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ff.apply(this,arguments)}(sf=Ci).INTERNAL.registerComponent(new Jn("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new uf(i,r)}),"PUBLIC").setServiceProps({Reference:of,Query:af,Database:uf,DataSnapshot:rf,enableLogging:Yl,INTERNAL:cf,ServerValue:lf}).setMultipleInstances(!0)),sf.registerVersion("@firebase/database-compat","1.0.3");var hf,df="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},pf={},vf=vf||{},mf=df||self;function yf(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function gf(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var wf="closure_uid_"+(1e9*Math.random()>>>0),kf=0;function _f(e,t,n){return e.call.apply(e.bind,arguments)}function bf(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function xf(e,t,n){return(xf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_f:bf).apply(null,arguments)}function Ef(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Sf(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Cf(){this.s=this.s,this.o=this.o}Cf.prototype.s=!1,Cf.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,wf)&&e[wf]||(e[wf]=++kf))},Cf.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var If=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Tf(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Nf(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(yf(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Df(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Df.prototype.h=function(){this.defaultPrevented=!0};var Af=function(){if(!mf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{var n=function(){};mf.addEventListener("test",n,t),mf.removeEventListener("test",n,t)}catch(n){}return e}();function Pf(e){return/^[\s\xa0]*$/.test(e)}function Rf(){var e=mf.navigator;return e&&(e=e.userAgent)?e:""}function Of(e){return-1!=Rf().indexOf(e)}function Lf(e){return Lf[" "](e),e}Lf[" "]=function(){};var Mf,Ff,jf=Of("Opera"),Uf=Of("Trident")||Of("MSIE"),qf=Of("Edge"),Vf=qf||Uf,zf=Of("Gecko")&&!(-1!=Rf().toLowerCase().indexOf("webkit")&&!Of("Edge"))&&!(Of("Trident")||Of("MSIE"))&&!Of("Edge"),Bf=-1!=Rf().toLowerCase().indexOf("webkit")&&!Of("Edge");function Wf(){var e=mf.document;return e?e.documentMode:void 0}e:{var Kf="",Gf=function(){var e=Rf();return zf?/rv:([^\);]+)(\)|;)/.exec(e):qf?/Edge\/([\d\.]+)/.exec(e):Uf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Bf?/WebKit\/(\S+)/.exec(e):jf?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Gf&&(Kf=Gf?Gf[1]:""),Uf){var Qf=Wf();if(null!=Qf&&Qf>parseFloat(Kf)){Mf=String(Qf);break e}}Mf=Kf}if(mf.document&&Uf){var Hf=Wf();Ff=Hf||(parseInt(Mf,10)||void 0)}else Ff=void 0;var Yf=Ff;function $f(e,t){if(Df.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(zf){e:{try{Lf(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Xf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$f.$.h.call(this)}}Sf($f,Df);var Xf={2:"touch",3:"pen",4:"mouse"};$f.prototype.h=function(){$f.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Jf="closure_listenable_"+(1e6*Math.random()|0),Zf=0;function eh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Zf,this.fa=this.ia=!1}function th(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function nh(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function rh(e){var t={};for(var n in e)t[n]=e[n];return t}var ih="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ah(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ih.length;a++)n=ih[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function oh(e){this.src=e,this.g={},this.h=0}function uh(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=If(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(th(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function sh(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}oh.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=sh(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new eh(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var ch="closure_lm_"+(1e6*Math.random()|0),lh={};function fh(e,t,n,r,i){if(r&&r.once)return dh(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)fh(e,t[a],n,r,i);return null}return n=kh(n),e&&e[Jf]?e.O(t,n,gf(r)?!!r.capture:!!r,i):hh(e,t,n,!1,r,i)}function hh(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=gf(i)?!!i.capture:!!i,u=gh(e);if(u||(e[ch]=u=new oh(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=yh;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Af||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(mh(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function dh(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)dh(e,t[a],n,r,i);return null}return n=kh(n),e&&e[Jf]?e.P(t,n,gf(r)?!!r.capture:!!r,i):hh(e,t,n,!0,r,i)}function ph(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ph(e,t[a],n,r,i);else r=gf(r)?!!r.capture:!!r,n=kh(n),e&&e[Jf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=sh(a=e.g[t],n,r,i))&&(th(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=gh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=sh(t,n,r,i)),(n=-1<e?t[e]:null)&&vh(n))}function vh(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Jf])uh(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(mh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=gh(t))?(uh(n,e),0==n.h&&(n.src=null,t[ch]=null)):th(e)}}}function mh(e){return e in lh?lh[e]:lh[e]="on"+e}function yh(e,t){if(e.fa)e=!0;else{t=new $f(t,this);var n=e.listener,r=e.la||e.src;e.ia&&vh(e),e=n.call(r,t)}return e}function gh(e){return(e=e[ch])instanceof oh?e:null}var wh="__closure_events_fn_"+(1e9*Math.random()>>>0);function kh(e){return"function"===typeof e?e:(e[wh]||(e[wh]=function(t){return e.handleEvent(t)}),e[wh])}function _h(){Cf.call(this),this.i=new oh(this),this.S=this,this.J=null}function bh(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Df(t,e);else if(t instanceof Df)t.target=t.target||e;else{var i=t;ah(t=new Df(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=xh(o,r,!0,t)&&i}if(i=xh(o=t.g=e,r,!0,t)&&i,i=xh(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=xh(o=t.g=n[a],r,!1,t)&&i}function xh(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&uh(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Sf(_h,Cf),_h.prototype[Jf]=!0,_h.prototype.removeEventListener=function(e,t,n,r){ph(this,e,t,n,r)},_h.prototype.N=function(){if(_h.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)th(n[r]);delete t.g[e],t.h--}}this.J=null},_h.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},_h.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Eh=mf.JSON.stringify,Sh=function(){function e(t,n){h(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return m(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Ch(){var e=Oh,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ih=function(){function e(){h(this,e),this.h=this.g=null}return m(e,[{key:"add",value:function(e,t){var n=Th.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Th=new Sh((function(){return new Nh}),(function(e){return e.reset()})),Nh=function(){function e(){h(this,e),this.next=this.g=this.h=null}return m(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Dh(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ah(e){mf.setTimeout((function(){throw e}),0)}var Ph,Rh=!1,Oh=new Ih,Lh=function(){var e=mf.Promise.resolve(void 0);Ph=function(){e.then(Mh)}},Mh=function(){for(var e;e=Ch();){try{e.h.call(e.g)}catch(n){Ah(n)}var t=Th;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Rh=!1};function Fh(e,t){_h.call(this),this.h=e||1,this.g=t||mf,this.j=xf(this.qb,this),this.l=Date.now()}function jh(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Uh(e,t,n){if("function"===typeof e)n&&(e=xf(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=xf(e.handleEvent,e)}return 2147483647<Number(t)?-1:mf.setTimeout(e,t||0)}function qh(e){e.g=Uh((function(){e.g=null,e.i&&(e.i=!1,qh(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Sf(Fh,_h),(hf=Fh.prototype).ga=!1,hf.T=null,hf.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bh(this,"tick"),this.ga&&(jh(this),this.start()))}},hf.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},hf.N=function(){Fh.$.N.call(this),jh(this),delete this.g};var Vh=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return m(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:qh(this)}},{key:"N",value:function(){ff(w(n.prototype),"N",this).call(this),this.g&&(mf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Cf);function zh(e){Cf.call(this),this.h=e,this.g={}}Sf(zh,Cf);var Bh=[];function Wh(e,t,n,r){Array.isArray(n)||(n&&(Bh[0]=n.toString()),n=Bh);for(var i=0;i<n.length;i++){var a=fh(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Kh(e){nh(e.g,(function(e,t){this.g.hasOwnProperty(t)&&vh(e)}),e),e.g={}}function Gh(){this.g=!0}function Qh(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Eh(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}zh.prototype.N=function(){zh.$.N.call(this),Kh(this)},zh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gh.prototype.Ea=function(){this.g=!1},Gh.prototype.info=function(){};var Hh={},Yh=null;function $h(){return Yh=Yh||new _h}function Xh(e){Df.call(this,Hh.Ta,e)}function Jh(e){var t=$h();bh(t,new Xh(t))}function Zh(e,t){Df.call(this,Hh.STAT_EVENT,e),this.stat=t}function ed(e){var t=$h();bh(t,new Zh(t,e))}function td(e,t){Df.call(this,Hh.Ua,e),this.size=t}function nd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return mf.setTimeout((function(){e()}),t)}Hh.Ta="serverreachability",Sf(Xh,Df),Hh.STAT_EVENT="statevent",Sf(Zh,Df),Hh.Ua="timingevent",Sf(td,Df);var rd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},id={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ad(){}function od(e){return e.h||(e.h=e.i())}function ud(){}ad.prototype.h=null;var sd,cd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ld(){Df.call(this,"d")}function fd(){Df.call(this,"c")}function hd(){}function dd(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new zh(this),this.P=vd,e=Vf?125:void 0,this.V=new Fh(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new pd}function pd(){this.i=null,this.g="",this.h=!1}Sf(ld,Df),Sf(fd,Df),Sf(hd,ad),hd.prototype.g=function(){return new XMLHttpRequest},hd.prototype.i=function(){return{}},sd=new hd;var vd=45e3,md={},yd={};function gd(e,t,n){e.L=1,e.A=Fd(Pd(t)),e.u=n,e.S=!0,wd(e,null)}function wd(e,t){e.G=Date.now(),xd(e),e.B=Pd(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),$d(n.i,"t",r),e.o=0,n=e.l.J,e.h=new pd,e.g=Xp(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Vh(xf(e.Pa,e,e.g),e.O)),Wh(e.U,e.g,"readystatechange",e.nb),t=e.I?rh(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Jh(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function kd(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function _d(e,t,n){for(var r,i=!0;!e.J&&e.o<n.length;){if((r=bd(e,n))==yd){4==t&&(e.s=4,ed(14),i=!1),Qh(e.j,e.m,null,"[Incomplete Response]");break}if(r==md){e.s=4,ed(15),Qh(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Qh(e.j,e.m,r,null),Td(e,r)}kd(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,ed(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bp(t),t.M=!0,ed(11))):(Qh(e.j,e.m,n,"[Invalid Chunked Response]"),Id(e),Cd(e))}function bd(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?yd:(n=Number(t.substring(n,r)),isNaN(n)?md:(r+=1)+n>t.length?yd:(t=t.slice(r,r+n),e.o=r+n,t))}function xd(e){e.Y=Date.now()+e.P,Ed(e,e.P)}function Ed(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=nd(xf(e.lb,e),t)}function Sd(e){e.C&&(mf.clearTimeout(e.C),e.C=null)}function Cd(e){0==e.l.H||e.J||Gp(e.l,e)}function Id(e){Sd(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,jh(e.V),Kh(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Td(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||rp(n.i,e)))if(!e.K&&rp(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Kp(n),Lp(n)}zp(n),ed(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=nd(xf(n.ib,n),6e3));if(1>=np(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Hp(n,11)}else if((e.K||n.g==e)&&Kp(n),!Pf(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(ip(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Md(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=$p(r,r.J?r.pa:null,r.Y),d.K){ap(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.C&&(Sd(p),xd(p)),r.g=d}else Vp(r);0<n.j.length&&Fp(n)}else"stop"!=a[0]&&"close"!=a[0]||Hp(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Hp(n,7):Op(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Jh()}catch(a){}}function Nd(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(yf(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(yf(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(yf(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(hf=dd.prototype).setTimeout=function(e){this.P=e},hf.nb=function(e){e=e.target;var t=this.M;t&&3==Tp(e)?t.l():this.Pa(e)},hf.Pa=function(e){try{if(e==this.g)e:{var t=Tp(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Vf||this.g&&(this.h.h||this.g.ja()||Np(this.g)))){this.J||4!=t||7==n||Jh(),Sd(this);var r=this.g.da();this.ca=r;t:if(kd(this)){var i=Np(this.g);e="";var a=i.length,o=4==Tp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Id(this),Cd(this);var u="";break t}this.h.i=new mf.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.length=0,this.h.g+=e,this.o=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.v,this.B,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pf(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.s=3,ed(12),Id(this),Cd(this);break e}Qh(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Td(this,r)}this.S?(_d(this,t,u),Vf&&this.i&&3==t&&(Wh(this.U,this.V,"tick",this.mb),this.V.start())):(Qh(this.j,this.m,u,null),Td(this,u)),4==t&&Id(this),this.i&&!this.J&&(4==t?Gp(this.l,this):(this.i=!1,xd(this)))}else(function(e){var t={};e=(e.g&&2<=Tp(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Pf(e[n])){var r=Dh(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.s=3,ed(12)):(this.s=0,ed(13)),Id(this),Cd(this)}}}catch(t){}},hf.mb=function(){if(this.g){var e=Tp(this.g),t=this.g.ja();this.o<t.length&&(Sd(this),_d(this,e,t),this.i&&4!=e&&xd(this))}},hf.cancel=function(){this.J=!0,Id(this)},hf.lb=function(){this.C=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Jh(),ed(17)),Id(this),this.s=2,Cd(this)):Ed(this,this.Y-e)};var Dd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ad(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ad){this.h=e.h,Rd(this,e.j),this.s=e.s,this.g=e.g,Od(this,e.m),this.l=e.l;var t=e.i,n=new Gd;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ld(this,n),this.o=e.o}else e&&(t=String(e).match(Dd))?(this.h=!1,Rd(this,t[1]||"",!0),this.s=jd(t[2]||""),this.g=jd(t[3]||"",!0),Od(this,t[4]),this.l=jd(t[5]||"",!0),Ld(this,t[6]||"",!0),this.o=jd(t[7]||"")):(this.h=!1,this.i=new Gd(null,this.h))}function Pd(e){return new Ad(e)}function Rd(e,t,n){e.j=n?jd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Od(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ld(e,t,n){t instanceof Gd?(e.i=t,function(e,t){t&&!e.j&&(Qd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Hd(this,t),$d(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ud(t,Wd)),e.i=new Gd(t,e.h))}function Md(e,t,n){e.i.set(t,n)}function Fd(e){return Md(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function jd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ud(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,qd),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function qd(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ad.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ud(t,Vd,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ud(t,Vd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ud(n,"/"==n.charAt(0)?Bd:zd,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ud(n,Kd)),e.join("")};var Vd=/[#\/\?@]/g,zd=/[#\?:]/g,Bd=/[#\?]/g,Wd=/[#\?@]/g,Kd=/#/g;function Gd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qd(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Hd(e,t){Qd(e),t=Xd(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Yd(e,t){return Qd(e),t=Xd(e,t),e.g.has(t)}function $d(e,t,n){Hd(e,t),0<n.length&&(e.i=null,e.g.set(Xd(e,t),Tf(n)),e.h+=n.length)}function Xd(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(hf=Gd.prototype).add=function(e,t){Qd(this),this.i=null,e=Xd(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},hf.forEach=function(e,t){Qd(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},hf.ta=function(){Qd(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},hf.Z=function(e){Qd(this);var t=[];if("string"===typeof e)Yd(this,e)&&(t=t.concat(this.g.get(Xd(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},hf.set=function(e,t){return Qd(this),this.i=null,Yd(this,e=Xd(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},hf.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},hf.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Jd=m((function e(t,n){h(this,e),this.g=t,this.map=n}));function Zd(e){this.l=e||ep,mf.PerformanceNavigationTiming?e=0<(e=mf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(mf.g&&mf.g.Ka&&mf.g.Ka()&&mf.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ep=10;function tp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function np(e){return e.h?1:e.g?e.g.size:0}function rp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ip(e,t){e.g?e.g.add(t):e.h=t}function ap(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function op(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=D(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Tf(e.i)}Zd.prototype.cancel=function(){if(this.i=op(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=D(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var up,sp=function(){function e(){h(this,e)}return m(e,[{key:"stringify",value:function(e){return mf.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return mf.JSON.parse(e,void 0)}}]),e}();function cp(){this.g=new sp}function lp(e,t,n){var r=n||"";try{Nd(e,(function(e,n){var i=e;gf(e)&&(i=Eh(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function fp(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function hp(e){this.l=e.ec||null,this.j=e.ob||!1}function dp(e,t){_h.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=pp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Sf(hp,ad),hp.prototype.g=function(){return new dp(this.l,this.j)},hp.prototype.i=(up={},function(){return up}),Sf(dp,_h);var pp=0;function vp(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function mp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,yp(e)}function yp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(hf=dp.prototype).open=function(e,t){if(this.readyState!=pp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,yp(this)},hf.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||mf).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},hf.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mp(this)),this.readyState=pp},hf.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,yp(this)),this.g&&(this.readyState=3,yp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof mf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vp(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},hf.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?mp(this):yp(this),3==this.readyState&&vp(this)}},hf.Za=function(e){this.g&&(this.response=this.responseText=e,mp(this))},hf.Ya=function(e){this.g&&(this.response=e,mp(this))},hf.ka=function(){this.g&&mp(this)},hf.setRequestHeader=function(e,t){this.v.append(e,t)},hf.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},hf.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(dp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var gp=mf.JSON.parse;function wp(e){_h.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=kp,this.L=this.M=!1}Sf(wp,_h);var kp="",_p=/^https?$/i,bp=["POST","PUT"];function xp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ep(e),Cp(e)}function Ep(e){e.F||(e.F=!0,bh(e,"complete"),bh(e,"error"))}function Sp(e){if(e.h&&"undefined"!=typeof vf&&(!e.C[1]||4!=Tp(e)||2!=e.da()))if(e.v&&4==Tp(e))Uh(e.La,0,e);else if(bh(e,"readystatechange"),4==Tp(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Dd)[1]||null;!a&&mf.self&&mf.self.location&&(a=mf.self.location.protocol.slice(0,-1)),i=!_p.test(a?a.toLowerCase():"")}t=i}if(t)bh(e,"complete"),bh(e,"success");else{e.m=6;try{var o=2<Tp(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Ep(e)}}finally{Cp(e)}}}function Cp(e,t){if(e.g){Ip(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||bh(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ip(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(mf.clearTimeout(e.A),e.A=null)}function Tp(e){return e.g?e.g.readyState:0}function Np(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case kp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Mv){return null}}function Dp(e){var t="";return nh(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ap(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dp(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Md(e,t,n))}function Pp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Rp(e){this.Ga=0,this.j=[],this.l=new Gh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pp("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pp("baseRetryDelayMs",5e3,e),this.hb=Pp("retryDelaySeedMs",1e4,e),this.eb=Pp("forwardChannelMaxRetries",2,e),this.xa=Pp("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Zd(e&&e.concurrentRequestLimit),this.Ja=new cp,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Op(e){if(Mp(e),3==e.H){var t=e.W++,n=Pd(e.I);if(Md(n,"SID",e.K),Md(n,"RID",t),Md(n,"TYPE","terminate"),Up(e,n),(t=new dd(e,e.l,t)).L=2,t.A=Fd(Pd(n)),n=!1,mf.navigator&&mf.navigator.sendBeacon)try{n=mf.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&mf.Image&&((new Image).src=t.A,n=!0),n||(t.g=Xp(t.l,null),t.g.ha(t.A)),t.G=Date.now(),xd(t)}Yp(e)}function Lp(e){e.g&&(Bp(e),e.g.cancel(),e.g=null)}function Mp(e){Lp(e),e.u&&(mf.clearTimeout(e.u),e.u=null),Kp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&mf.clearTimeout(e.m),e.m=null)}function Fp(e){if(!tp(e.i)&&!e.m){e.m=!0;var t=e.Na;Ph||Lh(),Rh||(Ph(),Rh=!0),Oh.add(t,e),e.C=0}}function jp(e,t){var n;n=t?t.m:e.W++;var r=Pd(e.I);Md(r,"SID",e.K),Md(r,"RID",n),Md(r,"AID",e.V),Up(e,r),e.o&&e.s&&Ap(r,e.o,e.s),n=new dd(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=qp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ip(e.i,n),gd(n,r,t)}function Up(e,t){e.na&&nh(e.na,(function(e,n){Md(t,n,e)})),e.h&&Nd({},(function(e,n){Md(t,n,e)}))}function qp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?xf(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{lp(l,o,"req"+c+"_")}catch(ey){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Vp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ph||Lh(),Rh||(Ph(),Rh=!0),Oh.add(t,e),e.A=0}}function zp(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=nd(xf(e.Ma,e),Qp(e,e.A)),e.A++,!0)}function Bp(e){null!=e.B&&(mf.clearTimeout(e.B),e.B=null)}function Wp(e){e.g=new dd(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Pd(e.wa);Md(t,"RID","rpc"),Md(t,"SID",e.K),Md(t,"AID",e.V),Md(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Md(t,"TO",e.qa),Md(t,"TYPE","xmlhttp"),Up(e,t),e.o&&e.s&&Ap(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Fd(Pd(t)),n.u=null,n.S=!0,wd(n,e)}function Kp(e){null!=e.v&&(mf.clearTimeout(e.v),e.v=null)}function Gp(e,t){var n=null;if(e.g==t){Kp(e),Bp(e),e.g=null;var r=2}else{if(!rp(e.i,t))return;n=t.F,ap(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;bh(r=$h(),new td(r,n)),Fp(e)}else Vp(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(np(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=nd(xf(e.Na,e,t),Qp(e,e.C)),e.C++,!0))}(e,t)||2==r&&zp(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Hp(e,5);break;case 4:Hp(e,10);break;case 3:Hp(e,6);break;default:Hp(e,2)}}function Qp(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Hp(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=xf(e.pb,e);n||(n=new Ad("//www.google.com/images/cleardot.gif"),mf.location&&"http"==mf.location.protocol||Rd(n,"https"),Fd(n)),function(e,t){var n=new Gh;if(mf.Image){var r=new Image;r.onload=Ef(fp,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ef(fp,n,r,"TestLoadImage: error",!1,t),r.onabort=Ef(fp,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ef(fp,n,r,"TestLoadImage: timeout",!1,t),mf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ed(2);e.H=0,e.h&&e.h.za(t),Yp(e),Mp(e)}function Yp(e){if(e.H=0,e.ma=[],e.h){var t=op(e.i);0==t.length&&0==e.j.length||(Nf(e.ma,t),Nf(e.ma,e.j),e.i.i.length=0,Tf(e.j),e.j.length=0),e.h.ya()}}function $p(e,t,n){var r=n instanceof Ad?Pd(n):new Ad(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Od(r,r.m);else{var i=mf.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Ad(null);r&&Rd(a,r),t&&(a.g=t),i&&Od(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Md(r,n,t),Md(r,"VER",e.ra),Up(e,r),r}function Xp(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new wp(new hp({ob:n})):new wp(e.va)).Oa(e.J),t}function Jp(){}function Zp(){if(Uf&&!(10<=Number(Yf)))throw Error("Environmental error: no available transport.")}function ev(e,t){_h.call(this),this.g=new Rp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Pf(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Pf(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new rv(this)}function tv(e){ld.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function nv(){fd.call(this),this.status=1}function rv(e){this.g=e}function iv(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function av(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function ov(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(hf=wp.prototype).Oa=function(e){this.M=e},hf.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sd.g(),this.C=this.u?od(this.u):od(sd),this.g.onreadystatechange=xf(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void xp(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=D(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=mf.FormData&&e instanceof mf.FormData,!(0<=If(bp,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=D(n);try{for(c.s();!(s=c.n()).done;){var l=f(s.value,2),h=l[0],d=l[1];this.g.setRequestHeader(h,d)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ip(this),0<this.B&&((this.L=function(e){return Uf&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xf(this.ua,this)):this.A=Uh(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){xp(this,u)}},hf.ua=function(){"undefined"!=typeof vf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bh(this,"timeout"),this.abort(8))},hf.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,bh(this,"complete"),bh(this,"abort"),Cp(this))},hf.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cp(this,!0)),wp.$.N.call(this)},hf.La=function(){this.s||(this.G||this.v||this.l?Sp(this):this.kb())},hf.kb=function(){Sp(this)},hf.isActive=function(){return!!this.g},hf.da=function(){try{return 2<Tp(this)?this.g.status:-1}catch(up){return-1}},hf.ja=function(){try{return this.g?this.g.responseText:""}catch(up){return""}},hf.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),gp(t)}},hf.Ia=function(){return this.m},hf.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(hf=Rp.prototype).ra=8,hf.H=1,hf.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new dd(this,this.l,e),n=this.s;if(this.U&&(n?ah(n=rh(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=qp(this,t,r),Md(i=Pd(this.I),"RID",e),Md(i,"CVER",22),this.F&&Md(i,"X-HTTP-Session-Id",this.F),Up(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Dp(n)))+"&"+r:this.o&&Ap(i,this.o,n)),ip(this.i,t),this.bb&&Md(i,"TYPE","init"),this.P?(Md(i,"$req",r),Md(i,"SID","null"),t.aa=!0,gd(t,i,null)):gd(t,i,r),this.H=2}}else 3==this.H&&(e?jp(this,e):0==this.j.length||tp(this.i)||jp(this))},hf.Ma=function(){if(this.u=null,Wp(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=nd(xf(this.jb,this),e)}},hf.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ed(10),Lp(this),Wp(this))},hf.ib=function(){null!=this.v&&(this.v=null,Lp(this),zp(this),ed(19))},hf.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ed(2)):(this.l.info("Failed to ping google.com"),ed(1))},hf.isActive=function(){return!!this.h&&this.h.isActive(this)},(hf=Jp.prototype).Ba=function(){},hf.Aa=function(){},hf.za=function(){},hf.ya=function(){},hf.isActive=function(){return!0},hf.Va=function(){},Zp.prototype.g=function(e,t){return new ev(e,t)},Sf(ev,_h),ev.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ed(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=$p(e,null,e.Y),Fp(e)},ev.prototype.close=function(){Op(this.g)},ev.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Eh(e),e=n);t.j.push(new Jd(t.fb++,e)),3==t.H&&Fp(t)},ev.prototype.N=function(){this.g.h=null,delete this.j,Op(this.g),delete this.g,ev.$.N.call(this)},Sf(tv,ld),Sf(nv,fd),Sf(rv,Jp),rv.prototype.Ba=function(){bh(this.g,"a")},rv.prototype.Aa=function(e){bh(this.g,new tv(e))},rv.prototype.za=function(e){bh(this.g,new nv)},rv.prototype.ya=function(){bh(this.g,"b")},Sf(iv,(function(){this.blockSize=-1})),iv.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},iv.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)av(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){av(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){av(this,r),i=0;break}}this.h=i,this.i+=t},iv.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var uv={};function sv(e){return-128<=e&&128>e?function(e,t){var n=uv;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new ov([0|e],0>e?-1:0)})):new ov([0|e],0>e?-1:0)}function cv(e){if(isNaN(e)||!isFinite(e))return fv;if(0>e)return mv(cv(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=lv;return new ov(t,0)}var lv=4294967296,fv=sv(0),hv=sv(1),dv=sv(16777216);function pv(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function vv(e){return-1==e.h}function mv(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ov(n,~e.h).add(hv)}function yv(e,t){return e.add(mv(t))}function gv(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function wv(e,t){this.g=e,this.h=t}function kv(e,t){if(pv(t))throw Error("division by zero");if(pv(e))return new wv(fv,fv);if(vv(e))return t=kv(mv(e),t),new wv(mv(t.g),mv(t.h));if(vv(t))return t=kv(e,mv(t)),new wv(mv(t.g),t.h);if(30<e.g.length){if(vv(e)||vv(t))throw Error("slowDivide_ only works with positive integers.");for(var n=hv,r=t;0>=r.X(e);)n=_v(n),r=_v(r);var i=bv(n,1),a=bv(r,1);for(r=bv(r,2),n=bv(n,2);!pv(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=bv(r,1),n=bv(n,1)}return t=yv(e,i.R(t)),new wv(i,t)}for(i=fv;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=cv(n)).R(t);vv(o)||0<o.X(e);)o=(a=cv(n-=r)).R(t);pv(a)&&(a=hv),i=i.add(a),e=yv(e,o)}return new wv(i,e)}function _v(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ov(n,e.h)}function bv(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new ov(i,e.h)}(hf=ov.prototype).ea=function(){if(vv(this))return-mv(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:lv+r)*t,t*=lv}return e},hf.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(pv(this))return"0";if(vv(this))return"-"+mv(this).toString(e);for(var t=cv(Math.pow(e,6)),n=this,r="";;){var i=kv(n,t).g,a=((0<(n=yv(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(pv(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},hf.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},hf.X=function(e){return vv(e=yv(this,e))?-1:pv(e)?0:1},hf.abs=function(){return vv(this)?mv(this):this},hf.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new ov(n,-2147483648&n[n.length-1]?-1:0)},hf.R=function(e){if(pv(this)||pv(e))return fv;if(vv(this))return vv(e)?mv(this).R(mv(e)):mv(mv(this).R(e));if(vv(e))return mv(this.R(mv(e)));if(0>this.X(dv)&&0>e.X(dv))return cv(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,gv(n,2*r+2*i),n[2*r+2*i+1]+=a*s,gv(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,gv(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,gv(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ov(n,0)},hf.gb=function(e){return kv(this,e).h},hf.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ov(n,this.h&e.h)},hf.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ov(n,this.h|e.h)},hf.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ov(n,this.h^e.h)},Zp.prototype.createWebChannel=Zp.prototype.g,ev.prototype.send=ev.prototype.u,ev.prototype.open=ev.prototype.m,ev.prototype.close=ev.prototype.close,rd.NO_ERROR=0,rd.TIMEOUT=8,rd.HTTP_ERROR=6,id.COMPLETE="complete",ud.EventType=cd,cd.OPEN="a",cd.CLOSE="b",cd.ERROR="c",cd.MESSAGE="d",_h.prototype.listen=_h.prototype.O,wp.prototype.listenOnce=wp.prototype.P,wp.prototype.getLastError=wp.prototype.Sa,wp.prototype.getLastErrorCode=wp.prototype.Ia,wp.prototype.getStatus=wp.prototype.da,wp.prototype.getResponseJson=wp.prototype.Wa,wp.prototype.getResponseText=wp.prototype.ja,wp.prototype.send=wp.prototype.ha,wp.prototype.setWithCredentials=wp.prototype.Oa,iv.prototype.digest=iv.prototype.l,iv.prototype.reset=iv.prototype.reset,iv.prototype.update=iv.prototype.j,ov.prototype.add=ov.prototype.add,ov.prototype.multiply=ov.prototype.R,ov.prototype.modulo=ov.prototype.gb,ov.prototype.compare=ov.prototype.X,ov.prototype.toNumber=ov.prototype.ea,ov.prototype.toString=ov.prototype.toString,ov.prototype.getBits=ov.prototype.D,ov.fromNumber=cv,ov.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return mv(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=cv(Math.pow(n,8)),i=fv,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=cv(Math.pow(n,o)),i=i.R(o).add(cv(u))):i=(i=i.R(r)).add(cv(u))}return i};var xv=pf.createWebChannelTransport=function(){return new Zp},Ev=pf.getStatEventTarget=function(){return $h()},Sv=pf.ErrorCode=rd,Cv=pf.EventType=id,Iv=pf.Event=Hh,Tv=pf.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Nv=(pf.FetchXmlHttpFactory=hp,pf.WebChannel=ud),Dv=pf.XhrIo=wp,Av=pf.Md5=iv,Pv=pf.Integer=ov,Rv="@firebase/firestore",Ov=function(){function e(t){h(this,e),this.uid=t}return m(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ov.UNAUTHENTICATED=new Ov(null),Ov.GOOGLE_CREDENTIALS=new Ov("google-credentials-uid"),Ov.FIRST_PARTY=new Ov("first-party-uid"),Ov.MOCK_USER=new Ov("mock-user");var Lv="10.8.1",Mv=new cr("@firebase/firestore");function Fv(){return Mv.logLevel}function jv(e){if(Mv.logLevel<=nr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vv);Mv.debug.apply(Mv,["Firestore (".concat(Lv,"): ").concat(e)].concat(A(i)))}}function Uv(e){if(Mv.logLevel<=nr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vv);Mv.error.apply(Mv,["Firestore (".concat(Lv,"): ").concat(e)].concat(A(i)))}}function qv(e){if(Mv.logLevel<=nr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vv);Mv.warn.apply(Mv,["Firestore (".concat(Lv,"): ").concat(e)].concat(A(i)))}}function Vv(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function zv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Lv,") INTERNAL ASSERTION FAILED: ")+e;throw Uv(t),new Error(t)}function Bv(e,t){e||zv()}function Wv(e,t){return e}var Kv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gv=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return m(n)}(Dn),Qv=m((function e(){var t=this;h(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Hv=m((function e(t,n){h(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Yv=function(){function e(){h(this,e)}return m(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ov.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),$v=function(){function e(t){h(this,e),this.token=t,this.changeListener=null}return m(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Xv=function(){function e(t){h(this,e),this.t=t,this.currentUser=Ov.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Qv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Qv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){jv("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(jv("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(jv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Bv("string"==typeof n.accessToken),new Hv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Bv(null===e||"string"==typeof e),new Ov(e)}}]),e}(),Jv=function(){function e(t,n,r){h(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ov.FIRST_PARTY,this.I=new Map}return m(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),Zv=function(){function e(t,n,r){h(this,e),this.l=t,this.h=n,this.P=r}return m(e,[{key:"getToken",value:function(){return Promise.resolve(new Jv(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ov.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),em=m((function e(t){h(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),tm=function(){function e(t){h(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&jv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,jv("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){jv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):jv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Bv("string"==typeof t.token),e.R=t.token,new em(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function nm(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var rm=function(){function e(){h(this,e)}return m(e,null,[{key:"newId",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=nm(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function im(e,t){return e<t?-1:e>t?1:0}function am(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function om(e){return e+"\0"}var um=function(){function e(t,n){if(h(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Gv(Kv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Gv(Kv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Gv(Kv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Gv(Kv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return m(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?im(this.nanoseconds,e.nanoseconds):im(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),sm=function(){function e(t){h(this,e),this.timestamp=t}return m(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new um(0,0))}},{key:"max",value:function(){return new e(new um(253402300799,999999999))}}]),e}(),cm=function(){function e(t,n,r){h(this,e),void 0===n?n=0:n>t.length&&zv(),void 0===r?r=t.length-n:r>t.length-n&&zv(),this.segments=t,this.offset=n,this.len=r}return m(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),lm=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"toUriEncodedString",value:function(){return this.toArray().map(encodeURIComponent).join("/")}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Gv(Kv.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,A(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(cm),fm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,hm=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return fm.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Gv(Kv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Gv(Kv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Gv(Kv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Gv(Kv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(cm),dm=function(){function e(t){h(this,e),this.path=t}return m(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===lm.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(lm.fromString(t))}},{key:"fromName",value:function(t){return new e(lm.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(lm.emptyPath())}},{key:"comparator",value:function(e,t){return lm.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new lm(t.slice()))}}]),e}(),pm=m((function e(t,n,r,i){h(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function vm(e){return e.fields.find((function(e){return 2===e.kind}))}function mm(e){return e.fields.filter((function(e){return 2!==e.kind}))}pm.UNKNOWN_ID=-1;var ym=m((function e(t,n){h(this,e),this.fieldPath=t,this.kind=n}));var gm=function(){function e(t,n){h(this,e),this.sequenceNumber=t,this.offset=n}return m(e,null,[{key:"empty",value:function(){return new e(0,_m.min())}}]),e}();function wm(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=sm.fromTimestamp(1e9===r?new um(n+1,0):new um(n,r));return new _m(i,dm.empty(),t)}function km(e){return new _m(e.readTime,e.key,-1)}var _m=function(){function e(t,n,r){h(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return m(e,null,[{key:"min",value:function(){return new e(sm.min(),dm.empty(),-1)}},{key:"max",value:function(){return new e(sm.max(),dm.empty(),-1)}}]),e}();function bm(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=dm.comparator(e.documentKey,t.documentKey))?n:im(e.largestBatchId,t.largestBatchId)}var xm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Em=function(){function e(){h(this,e),this.onCommittedListeners=[]}return m(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Sm(e){return Cm.apply(this,arguments)}function Cm(){return(Cm=S(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Kv.FAILED_PRECONDITION&&t.message===xm){e.next=2;break}throw t;case 2:jv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Im=function(){function e(t){var n=this;h(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return m(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&zv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=D(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Tm=function(){function e(t,n){var r=this;h(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.V=new Qv,this.transaction.oncomplete=function(){r.V.resolve()},this.transaction.onabort=function(){n.error?r.V.reject(new Am(t,n.error)):r.V.resolve()},this.transaction.onerror=function(e){var n=Mm(e.target.error);r.V.reject(new Am(t,n))}}return m(e,[{key:"m",get:function(){return this.V.promise}},{key:"abort",value:function(e){e&&this.V.reject(e),this.aborted||(jv("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"g",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Rm(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Am(n,t)}}}]),e}(),Nm=function(){function e(t,n,r){h(this,e),this.name=t,this.version=n,this.p=r,12.2===e.S(Sn())&&Uv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return m(e,[{key:"O",value:function(){var e=S(x().mark((function e(t){var n=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return jv("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Am(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Gv(Kv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Gv(Kv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Am(t,n))},i.onupgradeneeded=function(e){jv("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.p.N(t,i.transaction,e.oldVersion,n.version).next((function(){jv("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=S(x().mark((function e(t,n,r,i){var a,o,u,s,c=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=x().mark((function e(){var n,u,s,l;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=Tm.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.g(),e})).catch((function(e){return n.abort(e),Im.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.m;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,jv("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return jv("SimpleDb","Removing database:",e),Om(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!Nn())return!1;if(e.C())return!0;var t=Sn(),n=e.S(t),r=0<n&&n<10,i=e.v(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"v",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Dm=function(){function e(t){h(this,e),this.k=t,this.q=!1,this.K=null}return m(e,[{key:"isDone",get:function(){return this.q}},{key:"$",get:function(){return this.K}},{key:"cursor",set:function(e){this.k=e}},{key:"done",value:function(){this.q=!0}},{key:"U",value:function(e){this.K=e}},{key:"delete",value:function(){return Om(this.k.delete())}}]),e}(),Am=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this,Kv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return m(n)}(Gv);function Pm(e){return"IndexedDbTransactionError"===e.name}var Rm=function(){function e(t){h(this,e),this.store=t}return m(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(jv("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(jv("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Om(n)}},{key:"add",value:function(e){return jv("SimpleDb","ADD",this.store.name,e,e),Om(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Om(this.store.get(e)).next((function(n){return void 0===n&&(n=null),jv("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return jv("SimpleDb","DELETE",this.store.name,e),Om(this.store.delete(e))}},{key:"count",value:function(){return jv("SimpleDb","COUNT",this.store.name),Om(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){var i=r.getAll(n.range);return new Im((function(e,t){i.onerror=function(e){t(e.target.error)},i.onsuccess=function(t){e(t.target.result)}}))}var a=this.cursor(n),o=[];return this.G(a,(function(e,t){o.push(t)})).next((function(){return o}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Im((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){jv("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.J=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"Y",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new Im((function(n,r){t.onerror=function(e){var t=Mm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Im((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Dm(i),o=t(i.primaryKey,i.value,a);if(o instanceof Im){var u=o.catch((function(e){return a.done(),Im.reject(e)}));n.push(u)}a.isDone?r():null===a.$?i.continue():i.continue(a.$)}else r()}})).next((function(){return Im.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Om(e){return new Im((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Mm(e.target.error);n(t)}}))}var Lm=!1;function Mm(e){var t=Nm.S(Sn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Gv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Lm||(Lm=!0,setTimeout((function(){throw r}),0)),r}}return e}var Fm=function(){function e(t,n){h(this,e),this.asyncQueue=t,this.X=n,this.task=null}return m(e,[{key:"start",value:function(){this.ee(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"ee",value:function(e){var t=this;jv("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=jv,e.t1="Documents written: ",e.next=6,t.X.te();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackfiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Pm(e.t4)){e.next=17;break}jv("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Sm(e.t4);case 19:return e.next=21,t.ee(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),jm=function(){function e(t,n){h(this,e),this.localStore=t,this.persistence=n}return m(e,[{key:"te",value:function(){var e=S(x().mark((function e(){var t,n=this,r=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.ne(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ne",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Im.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return jv("IndexBackfiller","Processing collection: ".concat(t)),n.re(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"re",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ie(i,n)})).next((function(n){return jv("IndexBackfiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ie",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=km(t);bm(r,n)>0&&(n=r)})),new _m(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Um=function(){function e(t,n){var r=this;h(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.se(e)},this.oe=function(e){return n.writeSequenceNumber(e)})}return m(e,[{key:"se",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.oe&&this.oe(e),e}}]),e}();function qm(e){return null==e}function Vm(e){return 0===e&&1/e==-1/0}function zm(e){return"number"==typeof e&&Number.isInteger(e)&&!Vm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Bm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Km(t)),t=Wm(e.get(n),t);return Km(t)}function Wm(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Km(e){return e+"\x01\x01"}function Gm(e){var t=e.length;if(Bv(t>=2),2===t)return Bv("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),lm.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&zv(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:zv()}a=o+2}return new lm(r)}Um._e=-1;var Qm=["userId","batchId"];function Hm(e,t){return[e,Bm(t)]}function Ym(e,t,n){return[e,Bm(t),n]}var $m={},Xm=["prefixPath","collectionGroup","readTime","documentId"],Jm=["prefixPath","collectionGroup","documentId"],Zm=["collectionGroup","readTime","prefixPath","documentId"],ey=["canonicalId","targetId"],ty=["targetId","path"],ny=["path","targetId"],ry=["collectionId","parent"],iy=["indexId","uid"],ay=["uid","sequenceNumber"],oy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uy=["indexId","uid","orderedDocumentKey"],sy=["userId","collectionPath","documentId"],cy=["userId","collectionPath","largestBatchId"],ly=["userId","collectionGroup","largestBatchId"],fy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),hy=[].concat(A(fy),["documentOverlays"]),dy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],py=dy,vy=[].concat(py,["indexConfiguration","indexState","indexEntries"]),my=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).ae=e,i.currentSequenceNumber=r,i}return m(n)}(Em);function yy(e,t){var n=Wv(e);return Nm.M(n.ae,t)}function gy(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wy(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ky(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var _y=function(){function e(t,n){h(this,e),this.comparator=t,this.root=n||xy.EMPTY}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,xy.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xy.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new by(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new by(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new by(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new by(this.root,e,this.comparator,!0)}}]),e}(),by=function(){function e(t,n,r,i){h(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return m(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),xy=function(){function e(t,n,r,i,a){h(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw zv();if(this.right.isRed())throw zv();var e=this.left.check();if(e!==this.right.check())throw zv();return e+(this.isRed()?0:1)}}]),e}();xy.EMPTY=null,xy.RED=!0,xy.BLACK=!1,xy.EMPTY=new(function(){function e(){h(this,e),this.size=0}return m(e,[{key:"key",get:function(){throw zv()}},{key:"value",get:function(){throw zv()}},{key:"color",get:function(){throw zv()}},{key:"left",get:function(){throw zv()}},{key:"right",get:function(){throw zv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new xy(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Ey=function(){function e(t){h(this,e),this.comparator=t,this.data=new _y(this.comparator)}return m(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Sy(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Sy(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Sy=function(){function e(t){h(this,e),this.iter=t}return m(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Cy(e){return e.hasNext()?e.getNext():void 0}var Iy=function(){function e(t){h(this,e),this.fields=t,t.sort(hm.comparator)}return m(e,[{key:"unionWith",value:function(t){var n,r=new Ey(hm.comparator),i=D(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=D(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=D(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return am(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Ty=function(e){g(n,e);var t=b(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return m(n)}(T(Error));var Ny=function(e){function t(e){h(this,t),this.binaryString=e}return m(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return im(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ty("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ny.EMPTY_BYTE_STRING=new Ny("");var Dy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ay(e){if(Bv(!!e),"string"==typeof e){var t=0,n=Dy.exec(e);if(Bv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Py(e.seconds),nanos:Py(e.nanos)}}function Py(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ry(e){return"string"==typeof e?Ny.fromBase64String(e):Ny.fromUint8Array(e)}function Oy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ly(e){var t=e.mapValue.fields.__previous_value__;return Oy(t)?Ly(t):t}function My(e){var t=Ay(e.mapValue.fields.__local_write_time__.timestampValue);return new um(t.seconds,t.nanos)}var Fy=m((function e(t,n,r,i,a,o,u,s,c){h(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),jy=function(){function e(t,n){h(this,e),this.projectId=t,this.database=n||"(default)"}return m(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Uy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qy={nullValue:"NULL_VALUE"};function Vy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Oy(e)?4:tg(e)?9007199254740991:10:zv()}function zy(e,t){if(e===t)return!0;var n=Vy(e);if(n!==Vy(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return My(e).isEqual(My(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ay(e.timestampValue),r=Ay(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ry(e.bytesValue).isEqual(Ry(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Py(e.geoPointValue.latitude)===Py(t.geoPointValue.latitude)&&Py(e.geoPointValue.longitude)===Py(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Py(e.integerValue)===Py(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Py(e.doubleValue),r=Py(t.doubleValue);return n===r?Vm(n)===Vm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return am(e.arrayValue.values||[],t.arrayValue.values||[],zy);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(gy(n)!==gy(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!zy(n[i],r[i])))return!1;return!0}(e,t);default:return zv()}}function By(e,t){return void 0!==(e.values||[]).find((function(e){return zy(e,t)}))}function Wy(e,t){if(e===t)return 0;var n=Vy(e),r=Vy(t);if(n!==r)return im(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return im(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Py(e.integerValue||e.doubleValue),r=Py(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ky(e.timestampValue,t.timestampValue);case 4:return Ky(My(e),My(t));case 5:return im(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Ry(e),r=Ry(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=im(n[i],r[i]);if(0!==a)return a}return im(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=im(Py(e.latitude),Py(t.latitude));return 0!==n?n:im(Py(e.longitude),Py(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Wy(n[i],r[i]);if(a)return a}return im(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Uy.mapValue&&t===Uy.mapValue)return 0;if(e===Uy.mapValue)return 1;if(t===Uy.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=im(r[o],a[o]);if(0!==u)return u;var s=Wy(n[r[o]],i[a[o]]);if(0!==s)return s}return im(r.length,a.length)}(e.mapValue,t.mapValue);default:throw zv()}}function Ky(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return im(e,t);var n=Ay(e),r=Ay(t),i=im(n.seconds,r.seconds);return 0!==i?i:im(n.nanos,r.nanos)}function Gy(e){return Qy(e)}function Qy(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ay(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ry(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return dm.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=D(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Qy(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=D(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Qy(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):zv()}function Hy(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Yy(e){return!!e&&"integerValue"in e}function $y(e){return!!e&&"arrayValue"in e}function Xy(e){return!!e&&"nullValue"in e}function Jy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zy(e){return!!e&&"mapValue"in e}function eg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return wy(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=eg(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=eg(e.arrayValue.values[r]);return n}return Object.assign({},e)}function tg(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ng(e){return"nullValue"in e?qy:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Hy(jy.empty(),dm.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:zv()}function rg(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Hy(jy.empty(),dm.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Uy:zv()}function ig(e,t){var n=Wy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ag(e,t){var n=Wy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var og=function(){function e(t){h(this,e),this.value=t}return m(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Zy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eg(t)}},{key:"setAll",value:function(e){var t=this,n=hm.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=eg(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Zy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return zy(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Zy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){wy(t,(function(t,n){return e[t]=n}));var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(eg(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function ug(e){var t=[];return wy(e.fields,(function(e,n){var r=new hm([e]);if(Zy(n)){var i=ug(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=D(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Iy(t)}var sg=function(){function e(t,n,r,i,a,o,u){h(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return m(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(sm.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=og.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=og.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=sm.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,sm.min(),sm.min(),sm.min(),og.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,sm.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,sm.min(),sm.min(),og.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,sm.min(),sm.min(),og.empty(),2)}}]),e}(),cg=m((function e(t,n){h(this,e),this.position=t,this.inclusive=n}));function lg(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?dm.comparator(dm.fromName(o.referenceValue),n.key):Wy(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function fg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!zy(e.position[n],t.position[n]))return!1;return!0}var hg=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";h(this,e),this.field=t,this.dir=n}));function dg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var pg=m((function e(){h(this,e)})),vg=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Wy(t,this.value)):null!==t&&Vy(this.value)===Vy(t)&&this.matchesComparison(Wy(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zv()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Sg(e,t,r):"array-contains"===t?new Ng(e,r):"in"===t?new Dg(e,r):"not-in"===t?new Ag(e,r):"array-contains-any"===t?new Pg(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Cg(e,n):new Ig(e,n)}}]),n}(pg),mg=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).filters=e,i.op=r,i.ue=null,i}return m(n,[{key:"matches",value:function(e){return yg(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ue||(this.ue=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ue}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(pg);function yg(e){return"and"===e.op}function gg(e){return"or"===e.op}function wg(e){return kg(e)&&yg(e)}function kg(e){var t,n=D(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof mg)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function _g(e){if(e instanceof vg)return e.field.canonicalString()+e.op.toString()+Gy(e.value);if(wg(e))return e.filters.map((function(e){return _g(e)})).join(",");var t=e.filters.map((function(e){return _g(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function bg(e,t){return e instanceof vg?function(e,t){return t instanceof vg&&e.op===t.op&&e.field.isEqual(t.field)&&zy(e.value,t.value)}(e,t):e instanceof mg?function(e,t){return t instanceof mg&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&bg(n,t.filters[r])}),!0)}(e,t):void zv()}function xg(e,t){var n=e.filters.concat(t);return mg.create(n,e.op)}function Eg(e){return e instanceof vg?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Gy(e.value))}(e):e instanceof mg?function(e){return e.op.toString()+" {"+e.getFilters().map(Eg).join(" ,")+"}"}(e):"Filter"}var Sg=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,i)).key=dm.fromName(i.referenceValue),a}return m(n,[{key:"matches",value:function(e){var t=dm.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(vg),Cg=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,"in",r)).keys=Tg("in",r),i}return m(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(vg),Ig=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,"not-in",r)).keys=Tg("not-in",r),i}return m(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(vg);function Tg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return dm.fromName(e.referenceValue)}))}var Ng=function(e){g(n,e);var t=b(n);function n(e,r){return h(this,n),t.call(this,e,"array-contains",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return $y(t)&&By(t.arrayValue,this.value)}}]),n}(vg),Dg=function(e){g(n,e);var t=b(n);function n(e,r){return h(this,n),t.call(this,e,"in",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&By(this.value.arrayValue,t)}}]),n}(vg),Ag=function(e){g(n,e);var t=b(n);function n(e,r){return h(this,n),t.call(this,e,"not-in",r)}return m(n,[{key:"matches",value:function(e){if(By(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!By(this.value.arrayValue,t)}}]),n}(vg),Pg=function(e){g(n,e);var t=b(n);function n(e,r){return h(this,n),t.call(this,e,"array-contains-any",r)}return m(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!$y(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return By(t.value.arrayValue,e)}))}}]),n}(vg),Rg=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;h(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ce=null}));function Og(e){return new Rg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Lg(e){var t=Wv(e);if(null===t.ce){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return _g(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),qm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Gy(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Gy(e)})).join(",")),t.ce=n}return t.ce}function Mg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!dg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!bg(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fg(e.startAt,t.startAt)&&fg(e.endAt,t.endAt)}function Fg(e){return dm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function jg(e,t){return e.filters.filter((function(e){return e instanceof vg&&e.field.isEqual(t)}))}function Ug(e,t,n){var r,i=qy,a=!0,o=D(jg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=qy,c=!0;switch(u.op){case"<":case"<=":s=ng(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=qy}ig({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];ig({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function qg(e,t,n){var r,i=Uy,a=!0,o=D(jg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Uy,c=!0;switch(u.op){case">=":case">":s=rg(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Uy}ag({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];ag({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Vg=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;h(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}));function zg(e,t,n,r,i,a,o,u){return new Vg(e,t,n,r,i,a,o,u)}function Bg(e){return new Vg(e)}function Wg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Kg(e){return null!==e.collectionGroup}function Gg(e){var t=Wv(e);if(null===t.le){t.le=[];var n,r=new Set,i=D(t.explicitOrderBy);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.le.push(a),r.add(a.field.canonicalString())}}catch(s){i.e(s)}finally{i.f()}var o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",u=function(e){var t=new Ey(hm.comparator);return e.filters.forEach((function(e){e.getFlattenedFilters().forEach((function(e){e.isInequality()&&(t=t.add(e.field))}))})),t}(t);u.forEach((function(e){r.has(e.canonicalString())||e.isKeyField()||t.le.push(new hg(e,o))})),r.has(hm.keyField().canonicalString())||t.le.push(new hg(hm.keyField(),o))}return t.le}function Qg(e){var t=Wv(e);return t.he||(t.he=Hg(t,Gg(e))),t.he}function Hg(e,t){if("F"===e.limitType)return Og(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new hg(e.field,t)}));var n=e.endAt?new cg(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new cg(e.startAt.position,e.startAt.inclusive):null;return Og(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function Yg(e,t){var n=e.filters.concat([t]);return new Vg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $g(e,t,n){return new Vg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xg(e,t){return Mg(Qg(e),Qg(t))&&e.limitType===t.limitType}function Jg(e){return"".concat(Lg(Qg(e)),"|lt:").concat(e.limitType)}function Zg(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Eg(e)})).join(", "),"]")),qm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Gy(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Gy(e)})).join(",")),"Target(".concat(t,")")}(Qg(e)),"; limitType=").concat(e.limitType,")")}function ew(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):dm.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=D(Gg(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=D(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=lg(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Gg(e),t))&&!(e.endAt&&!function(e,t,n){var r=lg(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Gg(e),t))}(e,t)}function tw(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function nw(e){return function(t,n){var r,i=!1,a=D(Gg(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=rw(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function rw(e,t,n){var r=e.field.isKeyField()?dm.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Wy(r,i):zv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return zv()}}var iw=function(){function e(t,n){h(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return m(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){wy(this.inner,(function(t,n){var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ky(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),aw=new _y(dm.comparator);function ow(){return aw}var uw=new _y(dm.comparator);function sw(){for(var e=uw,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function cw(e){var t=uw;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function lw(){return hw()}function fw(){return hw()}function hw(){return new iw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var dw=new _y(dm.comparator),pw=new Ey(dm.comparator);function vw(){for(var e=pw,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var mw=new Ey(im);function yw(){return mw}function gw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vm(t)?"-0":t}}function ww(e){return{integerValue:""+e}}function kw(e,t){return zm(t)?ww(t):gw(e,t)}var _w=m((function e(){h(this,e),this._=void 0}));function bw(e,t,n){return e instanceof Sw?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Oy(t)&&(t=Ly(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Cw?Iw(e,t):e instanceof Tw?Nw(e,t):function(e,t){var n=Ew(e,t),r=Aw(n)+Aw(e.Ie);return Yy(n)&&Yy(e.Ie)?ww(r):gw(e.serializer,r)}(e,t)}function xw(e,t,n){return e instanceof Cw?Iw(e,t):e instanceof Tw?Nw(e,t):n}function Ew(e,t){return e instanceof Dw?function(e){return Yy(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Sw=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n)}(_w),Cw=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this)).elements=e,r}return m(n)}(_w);function Iw(e,t){var n,r=Pw(t),i=D(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return zy(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Tw=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this)).elements=e,r}return m(n)}(_w);function Nw(e,t){var n,r=Pw(t),i=D(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!zy(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Dw=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).serializer=e,i.Ie=r,i}return m(n)}(_w);function Aw(e){return Py(e.integerValue||e.doubleValue)}function Pw(e){return $y(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Rw=m((function e(t,n){h(this,e),this.field=t,this.transform=n}));var Ow=m((function e(t,n){h(this,e),this.version=t,this.transformResults=n})),Lw=function(){function e(t,n){h(this,e),this.updateTime=t,this.exists=n}return m(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Mw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Fw=m((function e(){h(this,e)}));function jw(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new $w(e.key,Lw.none()):new Bw(e.key,e.data,Lw.none());var n,r=e.data,i=og.empty(),a=new Ey(hm.comparator),o=D(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Ww(e.key,i,new Iy(a.toArray()),Lw.none())}function Uw(e,t,n){e instanceof Bw?function(e,t,n){var r=e.value.clone(),i=Gw(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ww?function(e,t,n){if(Mw(e.precondition,t)){var r=Gw(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Kw(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function qw(e,t,n,r){return e instanceof Bw?function(e,t,n,r){if(!Mw(e.precondition,t))return n;var i=e.value.clone(),a=Qw(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ww?function(e,t,n,r){if(!Mw(e.precondition,t))return n;var i=Qw(e.fieldTransforms,r,t),a=t.data;return a.setAll(Kw(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Mw(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Vw(e,t){var n,r=null,i=D(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Ew(a.transform,o||null);null!=u&&(null===r&&(r=og.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function zw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&am(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Cw&&t instanceof Cw||e instanceof Tw&&t instanceof Tw?am(e.elements,t.elements,zy):e instanceof Dw&&t instanceof Dw?zy(e.Ie,t.Ie):e instanceof Sw&&t instanceof Sw}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Bw=function(e){g(n,e);var t=b(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return h(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Fw),Ww=function(e){g(n,e);var t=b(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return h(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return m(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Fw);function Kw(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Gw(e,t,n){var r=new Map;Bv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,xw(o,u,n[i]))}return r}function Qw(e,t,n){var r,i=new Map,a=D(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,bw(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Hw,Yw,$w=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Fw),Xw=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Fw),Jw=function(){function e(t,n,r,i){h(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return m(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Uw(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=D(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=qw(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=D(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=qw(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=fw();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=jw(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(sm.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),vw())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&am(this.mutations,e.mutations,(function(e,t){return zw(e,t)}))&&am(this.baseMutations,e.baseMutations,(function(e,t){return zw(e,t)}))}}]),e}(),Zw=function(){function e(t,n,r,i){h(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return m(e,null,[{key:"from",value:function(t,n,r){Bv(t.mutations.length===r.length);for(var i=dw,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),ek=function(){function e(t,n){h(this,e),this.largestBatchId=t,this.mutation=n}return m(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),tk=m((function e(t,n){h(this,e),this.count=t,this.unchangedNames=n}));function nk(e){switch(e){default:return zv();case Kv.CANCELLED:case Kv.UNKNOWN:case Kv.DEADLINE_EXCEEDED:case Kv.RESOURCE_EXHAUSTED:case Kv.INTERNAL:case Kv.UNAVAILABLE:case Kv.UNAUTHENTICATED:return!1;case Kv.INVALID_ARGUMENT:case Kv.NOT_FOUND:case Kv.ALREADY_EXISTS:case Kv.PERMISSION_DENIED:case Kv.FAILED_PRECONDITION:case Kv.ABORTED:case Kv.OUT_OF_RANGE:case Kv.UNIMPLEMENTED:case Kv.DATA_LOSS:return!0}}function rk(e){if(void 0===e)return Uv("GRPC error has no .code"),Kv.UNKNOWN;switch(e){case Hw.OK:return Kv.OK;case Hw.CANCELLED:return Kv.CANCELLED;case Hw.UNKNOWN:return Kv.UNKNOWN;case Hw.DEADLINE_EXCEEDED:return Kv.DEADLINE_EXCEEDED;case Hw.RESOURCE_EXHAUSTED:return Kv.RESOURCE_EXHAUSTED;case Hw.INTERNAL:return Kv.INTERNAL;case Hw.UNAVAILABLE:return Kv.UNAVAILABLE;case Hw.UNAUTHENTICATED:return Kv.UNAUTHENTICATED;case Hw.INVALID_ARGUMENT:return Kv.INVALID_ARGUMENT;case Hw.NOT_FOUND:return Kv.NOT_FOUND;case Hw.ALREADY_EXISTS:return Kv.ALREADY_EXISTS;case Hw.PERMISSION_DENIED:return Kv.PERMISSION_DENIED;case Hw.FAILED_PRECONDITION:return Kv.FAILED_PRECONDITION;case Hw.ABORTED:return Kv.ABORTED;case Hw.OUT_OF_RANGE:return Kv.OUT_OF_RANGE;case Hw.UNIMPLEMENTED:return Kv.UNIMPLEMENTED;case Hw.DATA_LOSS:return Kv.DATA_LOSS;default:return zv()}}(Yw=Hw||(Hw={}))[Yw.OK=0]="OK",Yw[Yw.CANCELLED=1]="CANCELLED",Yw[Yw.UNKNOWN=2]="UNKNOWN",Yw[Yw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yw[Yw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yw[Yw.NOT_FOUND=5]="NOT_FOUND",Yw[Yw.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yw[Yw.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yw[Yw.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yw[Yw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yw[Yw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yw[Yw.ABORTED=10]="ABORTED",Yw[Yw.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yw[Yw.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yw[Yw.INTERNAL=13]="INTERNAL",Yw[Yw.UNAVAILABLE=14]="UNAVAILABLE",Yw[Yw.DATA_LOSS=15]="DATA_LOSS";var ik=null;function ak(){return new TextEncoder}var ok=new Pv([4294967295,4294967295],0);function uk(e){var t=ak().encode(e),n=new Av;return n.update(t),new Uint8Array(n.digest())}function sk(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Pv([n,r],0),new Pv([i,a],0)]}var ck=function(){function e(t,n,r){if(h(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lk("Invalid padding: ".concat(n));if(r<0)throw new lk("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new lk("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new lk("Invalid padding when bitmap length is 0: ".concat(n));this.Te=8*t.length-n,this.Ee=Pv.fromNumber(this.Te)}return m(e,[{key:"de",value:function(e,t,n){var r=e.add(t.multiply(Pv.fromNumber(n)));return 1===r.compare(ok)&&(r=new Pv([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}},{key:"Ae",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Te)return!1;for(var t=f(sk(uk(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.de(n,r,i);if(!this.Ae(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Te)for(var t=f(sk(uk(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.de(n,r,i);this.Re(a)}}},{key:"Re",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),lk=function(e){g(n,e);var t=b(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return m(n)}(T(Error)),fk=function(){function e(t,n,r,i,a){h(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return m(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,hk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(sm.min(),i,new _y(im),ow(),vw())}}]),e}(),hk=function(){function e(t,n,r,i,a){h(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return m(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,vw(),vw(),vw())}}]),e}(),dk=m((function e(t,n,r,i){h(this,e),this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i})),pk=m((function e(t,n){h(this,e),this.targetId=t,this.fe=n})),vk=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ny.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),mk=function(){function e(){h(this,e),this.ge=0,this.pe=wk(),this.ye=Ny.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}return m(e,[{key:"current",get:function(){return this.we}},{key:"resumeToken",get:function(){return this.ye}},{key:"be",get:function(){return 0!==this.ge}},{key:"De",get:function(){return this.Se}},{key:"Ce",value:function(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}},{key:"ve",value:function(){var e=vw(),t=vw(),n=vw();return this.pe.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:zv()}})),new hk(this.ye,this.we,e,t,n)}},{key:"Fe",value:function(){this.Se=!1,this.pe=wk()}},{key:"Me",value:function(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}},{key:"xe",value:function(e){this.Se=!0,this.pe=this.pe.remove(e)}},{key:"Oe",value:function(){this.ge+=1}},{key:"Ne",value:function(){this.ge-=1,Bv(this.ge>=0)}},{key:"Be",value:function(){this.Se=!0,this.we=!0}}]),e}(),yk=function(){function e(t){h(this,e),this.Le=t,this.ke=new Map,this.qe=ow(),this.Qe=gk(),this.Ke=new _y(im)}return m(e,[{key:"$e",value:function(e){var t,n=D(e.Ve);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.me&&e.me.isFoundDocument()?this.Ue(r,e.me):this.We(r,e.key,e.me)}}catch(u){n.e(u)}finally{n.f()}var i,a=D(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.We(o,e.key,e.me)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Ge",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ze(n);switch(e.state){case 0:t.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||t.removeTarget(n);break;case 3:t.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:t.je(n)&&(t.He(n),r.Ce(e.resumeToken));break;default:zv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((function(e,r){n.je(r)&&t(r)}))}},{key:"Je",value:function(e){var t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){var i=r.target;if(Fg(i))if(0===n){var a=new dm(i.path);this.We(t,a,sg.newNoDocument(a,sm.min()))}else Bv(1===n);else{var o=this.Ze(t);if(o!==n){var u=this.Xe(e),s=u?this.et(u,e,o):1;if(0!==s){this.He(t);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}null==ik||ik.tt(function(e,t,n,r,i){var a,o,u,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.fe,this.Le.nt(),u,s))}}}}},{key:"Xe",value:function(e){var t=e.fe.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,c=t.hashCount,l=void 0===c?0:c;try{n=Ry(o).toUint8Array()}catch(e){if(e instanceof Ty)return qv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new ck(n,s,l)}catch(e){return qv(e instanceof lk?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Te?null:r}},{key:"et",value:function(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}},{key:"rt",value:function(e,t){var n=this,r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Le.nt(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.We(t,r,null),i++)})),i}},{key:"it",value:function(e){var t=this,n=new Map;this.ke.forEach((function(r,i){var a=t.Ye(i);if(a){if(r.current&&Fg(a.target)){var o=new dm(a.target.path);null!==t.qe.get(o)||t.st(i,o)||t.We(i,o,sg.newNoDocument(o,e))}r.De&&(n.set(i,r.ve()),r.Fe())}}));var r=vw();this.Qe.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ye(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.qe.forEach((function(t,n){return n.setReadTime(e)}));var i=new fk(e,n,this.Ke,this.qe,r);return this.qe=ow(),this.Qe=gk(),this.Ke=new _y(im),i}},{key:"Ue",value:function(e,t){if(this.je(e)){var n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}}},{key:"We",value:function(e,t,n){if(this.je(e)){var r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}}},{key:"removeTarget",value:function(e){this.ke.delete(e)}},{key:"Ze",value:function(e){var t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Oe",value:function(e){this.ze(e).Oe()}},{key:"ze",value:function(e){var t=this.ke.get(e);return t||(t=new mk,this.ke.set(e,t)),t}},{key:"ot",value:function(e){var t=this.Qe.get(e);return t||(t=new Ey(im),this.Qe=this.Qe.insert(e,t)),t}},{key:"je",value:function(e){var t=null!==this.Ye(e);return t||jv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ye",value:function(e){var t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}},{key:"He",value:function(e){var t=this;this.ke.set(e,new mk),this.Le.getRemoteKeysForTarget(e).forEach((function(n){t.We(e,n,null)}))}},{key:"st",value:function(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}]),e}();function gk(){return new _y(dm.comparator)}function wk(){return new _y(dm.comparator)}var kk={asc:"ASCENDING",desc:"DESCENDING"},_k={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bk={and:"AND",or:"OR"},xk=m((function e(t,n){h(this,e),this.databaseId=t,this.useProto3Json=n}));function Ek(e,t){return e.useProto3Json||qm(t)?t:{value:t}}function Sk(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ck(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ik(e,t){return Sk(e,t.toTimestamp())}function Tk(e){return Bv(!!e),sm.fromTimestamp(function(e){var t=Ay(e);return new um(t.seconds,t.nanos)}(e))}function Nk(e,t){return Dk(e,t).canonicalString()}function Dk(e,t){var n=function(e){return new lm(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ak(e){var t=lm.fromString(e);return Bv(e_(t)),t}function Pk(e,t){return Nk(e.databaseId,t.path)}function Rk(e,t){var n=Ak(t);if(n.get(1)!==e.databaseId.projectId)throw new Gv(Kv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Gv(Kv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new dm(Fk(n))}function Ok(e,t){return Nk(e.databaseId,t)}function Lk(e){var t=Ak(e);return 4===t.length?lm.emptyPath():Fk(t)}function Mk(e){return new lm(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fk(e){return Bv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function jk(e,t,n){return{name:Pk(e,t),fields:n.value.mapValue.fields}}function Uk(e,t,n){var r=Rk(e,t.name),i=Tk(t.updateTime),a=t.createTime?Tk(t.createTime):sm.min(),o=new og({mapValue:{fields:t.fields}}),u=sg.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function qk(e,t){return"found"in t?function(e,t){Bv(!!t.found),t.found.name,t.found.updateTime;var n=Rk(e,t.found.name),r=Tk(t.found.updateTime),i=t.found.createTime?Tk(t.found.createTime):sm.min(),a=new og({mapValue:{fields:t.found.fields}});return sg.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Bv(!!t.missing),Bv(!!t.readTime);var n=Rk(e,t.missing),r=Tk(t.readTime);return sg.newNoDocument(n,r)}(e,t):zv()}function Vk(e,t){var n;if(t instanceof Bw)n={update:jk(e,t.key,t.value)};else if(t instanceof $w)n={delete:Pk(e,t.key)};else if(t instanceof Ww)n={update:jk(e,t.key,t.data),updateMask:Zk(t.fieldMask)};else{if(!(t instanceof Xw))return zv();n={verify:Pk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Sw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Cw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Tw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Dw)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw zv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ik(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zv()}(e,t.precondition)),n}function zk(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Lw.updateTime(Tk(e.updateTime)):void 0!==e.exists?Lw.exists(e.exists):Lw.none()}(t.currentDocument):Lw.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Bv("REQUEST_TIME"===t.setToServerValue),n=new Sw;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Cw(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Tw(i)}else"increment"in t?n=new Dw(e,t.increment):zv();var a=hm.fromServerFormat(t.fieldPath);return new Rw(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Rk(e,t.update.name),a=new og({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Iy(t.map((function(e){return hm.fromServerFormat(e)})))}(t.updateMask);return new Ww(i,a,o,n,r)}return new Bw(i,a,n,r)}if(t.delete){var u=Rk(e,t.delete);return new $w(u,n)}if(t.verify){var s=Rk(e,t.verify);return new Xw(s,n)}return zv()}function Bk(e,t){return{documents:[Ok(e,t.path)]}}function Wk(e,t){var n,r={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n=i,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=Ok(e,n);var a=function(e){if(0!==e.length)return Jk(mg.create(e,"and"))}(t.filters);a&&(r.structuredQuery.where=a);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:$k(e.field),direction:Qk(e.dir)}}(e)}))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);var u=Ek(e,t.limit);return null!==u&&(r.structuredQuery.limit=u),t.startAt&&(r.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:r,parent:n}}function Kk(e){var t=Lk(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Bv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Gk(e);return t instanceof mg&&wg(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new hg(Xk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return qm(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new cg(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new cg(n,t)}(n.endAt)),zg(t,i,u,o,s,"F",c,l)}function Gk(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Xk(e.unaryFilter.field);return vg.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Xk(e.unaryFilter.field);return vg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xk(e.unaryFilter.field);return vg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xk(e.unaryFilter.field);return vg.create(i,"!=",{nullValue:"NULL_VALUE"});default:return zv()}}(e):void 0!==e.fieldFilter?function(e){return vg.create(Xk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zv()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return mg.create(e.compositeFilter.filters.map((function(e){return Gk(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return zv()}}(e.compositeFilter.op))}(e):zv()}function Qk(e){return kk[e]}function Hk(e){return _k[e]}function Yk(e){return bk[e]}function $k(e){return{fieldPath:e.canonicalString()}}function Xk(e){return hm.fromServerFormat(e.fieldPath)}function Jk(e){return e instanceof vg?function(e){if("=="===e.op){if(Jy(e.value))return{unaryFilter:{field:$k(e.field),op:"IS_NAN"}};if(Xy(e.value))return{unaryFilter:{field:$k(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jy(e.value))return{unaryFilter:{field:$k(e.field),op:"IS_NOT_NAN"}};if(Xy(e.value))return{unaryFilter:{field:$k(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$k(e.field),op:Hk(e.op),value:e.value}}}(e):e instanceof mg?function(e){var t=e.getFilters().map((function(e){return Jk(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Yk(e.op),filters:t}}}(e):zv()}function Zk(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function e_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var t_=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:sm.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:sm.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ny.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;h(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return m(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),n_=m((function e(t){h(this,e),this.ct=t}));function r_(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:i_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Pk(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Sk(e,t.version.toTimestamp()),createTime:Sk(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:a_(t.version)};else{if(!t.isUnknownDocument())return zv();r.unknownDocument={path:n.path.toArray(),version:a_(t.version)}}return r}function i_(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function a_(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function o_(e){var t=new um(e.seconds,e.nanoseconds);return sm.fromTimestamp(t)}function u_(e,t){for(var n=(t.baseMutations||[]).map((function(t){return zk(e.ct,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return zk(e.ct,t)})),u=um.fromMillis(t.localWriteTimeMs);return new Jw(t.batchId,u,n,o)}function s_(e){var t,n=o_(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?o_(e.lastLimboFreeSnapshotVersion):sm.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return Bv(1===e.documents.length),Qg(Bg(Lk(e.documents[0])))}(e.query):function(e){return Qg(Kk(e))}(e.query),new t_(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,Ny.fromBase64String(e.resumeToken))}function c_(e,t){var n,r=a_(t.snapshotVersion),i=a_(t.lastLimboFreeSnapshotVersion);n=Fg(t.target)?Bk(e.ct,t.target):Wk(e.ct,t.target).ut;var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Lg(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function l_(e){var t=Kk({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$g(t,t.limit,"L"):t}function f_(e,t){return new ek(t.largestBatchId,zk(e.ct,t.overlayMutation))}function h_(e,t){var n=t.path.lastSegment();return[e,Bm(t.path.popLast()),n]}function d_(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:a_(r.readTime),documentKey:Bm(r.documentKey.path),largestBatchId:r.largestBatchId}}var p_=function(){function e(){h(this,e)}return m(e,[{key:"getBundleMetadata",value:function(e,t){return v_(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:o_(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return v_(e).put(function(e){return{bundleId:e.id,createTime:a_(Tk(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return m_(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:l_(e.bundledQuery),readTime:o_(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return m_(e).put(function(e){return{name:e.name,readTime:a_(Tk(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function v_(e){return yy(e,"bundles")}function m_(e){return yy(e,"namedQueries")}var y_=function(){function e(t,n){h(this,e),this.serializer=t,this.userId=n}return m(e,[{key:"getOverlay",value:function(e,t){var n=this;return g_(e).get(h_(this.userId,t)).next((function(e){return e?f_(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=lw();return Im.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new ek(t,a);i.push(r.ht(e,o))})),Im.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Bm(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(g_(e).H("collectionPathOverlayIndex",i))})),Im.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=lw(),a=Bm(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return g_(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=f_(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=lw(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return g_(e).Y({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=f_(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ht",value:function(e,t){return g_(e).put(function(e,t,n){var r=f(h_(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Vk(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"lt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function g_(e){return yy(e,"documentOverlays")}var w_=function(){function e(){h(this,e)}return m(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Py(e.integerValue));else if("doubleValue"in e){var n=Py(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Vm(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ry(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?tg(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):zv()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),dm.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();function k_(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function __(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=k_(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}w_.bt=new w_;var b_=function(){function e(){h(this,e),this.buffer=new Uint8Array(1024),this.position=0}return m(e,[{key:"Dt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ct(n.value),n=t.next();this.vt()}},{key:"Ft",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Mt(n.value),n=t.next();this.xt()}},{key:"Ot",value:function(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{var a=r.codePointAt(0);this.Ct(240|a>>>18),this.Ct(128|63&a>>>12),this.Ct(128|63&a>>>6),this.Ct(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.vt()}},{key:"Nt",value:function(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{var a=r.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.xt()}},{key:"Bt",value:function(e){var t=this.Lt(e),n=__(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"qt",value:function(e){var t=this.Lt(e),n=__(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Qt",value:function(){this.Kt(255),this.Kt(255)}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Wt",value:function(){return this.buffer.slice(0,this.position)}},{key:"Lt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ct",value:function(e){var t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}},{key:"Mt",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}},{key:"vt",value:function(){this.Kt(0),this.Kt(1)}},{key:"xt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Kt",value:function(e){this.kt(1),this.buffer[this.position++]=e}},{key:"Ut",value:function(e){this.kt(1),this.buffer[this.position++]=~e}},{key:"kt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),x_=function(){function e(t){h(this,e),this.Gt=t}return m(e,[{key:"ft",value:function(e){this.Gt.Dt(e)}},{key:"At",value:function(e){this.Gt.Ot(e)}},{key:"dt",value:function(e){this.Gt.Bt(e)}},{key:"Tt",value:function(){this.Gt.Qt()}}]),e}(),E_=function(){function e(t){h(this,e),this.Gt=t}return m(e,[{key:"ft",value:function(e){this.Gt.Ft(e)}},{key:"At",value:function(e){this.Gt.Nt(e)}},{key:"dt",value:function(e){this.Gt.qt(e)}},{key:"Tt",value:function(){this.Gt.$t()}}]),e}(),S_=function(){function e(){h(this,e),this.Gt=new b_,this.zt=new x_(this.Gt),this.jt=new E_(this.Gt)}return m(e,[{key:"seed",value:function(e){this.Gt.seed(e)}},{key:"Ht",value:function(e){return 0===e?this.zt:this.jt}},{key:"Wt",value:function(){return this.Gt.Wt()}},{key:"reset",value:function(){this.Gt.reset()}}]),e}(),C_=function(){function e(t,n,r,i){h(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return m(e,[{key:"Jt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function I_(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=T_(e.arrayValue,t.arrayValue))?n:0!==(n=T_(e.directionalValue,t.directionalValue))?n:dm.comparator(e.documentKey,t.documentKey)}function T_(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var N_=function(){function e(t){h(this,e),this.Yt=new Ey((function(e,t){return hm.comparator(e.field,t.field)})),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];var n,r=D(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return m(e,[{key:"en",get:function(){return this.Yt.size>1}},{key:"tn",value:function(e){if(Bv(e.collectionGroup===this.collectionId),this.en)return!1;var t=vm(e);if(void 0!==t&&!this.nn(t))return!1;for(var n=mm(e),r=new Set,i=0,a=0;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){var o=this.Yt.getIterator().getNext();if(!r.has(o.field.canonicalString())){var u=n[i];if(!this.rn(o,u)||!this.sn(this.Zt[a++],u))return!1}++i}for(;i<n.length;++i){var s=n[i];if(a>=this.Zt.length||!this.sn(this.Zt[a++],s))return!1}return!0}},{key:"on",value:function(){if(this.en)return null;var e,t=new Ey(hm.comparator),n=[],r=D(this.Xt);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new ym(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new ym(i.field,0))}}}catch(s){r.e(s)}finally{r.f()}var a,o=D(this.Zt);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||t.has(u.field)||(t=t.add(u.field),n.push(new ym(u.field,"asc"===u.dir?0:1)))}}catch(s){o.e(s)}finally{o.f()}return new pm(pm.UNKNOWN_ID,this.collectionId,n,gm.empty())}},{key:"nn",value:function(e){var t,n=D(this.Xt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.rn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"rn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function D_(e){var t,n;if(Bv(e instanceof vg||e instanceof mg),e instanceof vg){if(e instanceof Dg){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return vg.create(e.field,"==",t)})))||[];return mg.create(r,"or")}return e}var i=e.filters.map((function(e){return D_(e)}));return mg.create(i,e.op)}function A_(e){if(0===e.getFilters().length)return[];var t=L_(D_(e));return Bv(O_(t)),P_(t)||R_(t)?[t]:t.getFilters()}function P_(e){return e instanceof vg}function R_(e){return e instanceof mg&&wg(e)}function O_(e){return P_(e)||R_(e)||function(e){if(e instanceof mg&&gg(e)){var t,n=D(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!P_(r)&&!R_(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function L_(e){if(Bv(e instanceof vg||e instanceof mg),e instanceof vg)return e;if(1===e.filters.length)return L_(e.filters[0]);var t=e.filters.map((function(e){return L_(e)})),n=mg.create(t,e.op);return O_(n=j_(n))?n:(Bv(n instanceof mg),Bv(yg(n)),Bv(n.filters.length>1),n.filters.reduce((function(e,t){return M_(e,t)})))}function M_(e,t){var n;return Bv(e instanceof vg||e instanceof mg),Bv(t instanceof vg||t instanceof mg),n=e instanceof vg?t instanceof vg?function(e,t){return mg.create([e,t],"and")}(e,t):F_(e,t):t instanceof vg?F_(t,e):function(e,t){if(Bv(e.filters.length>0&&t.filters.length>0),yg(e)&&yg(t))return xg(e,t.getFilters());var n=gg(e)?e:t,r=gg(e)?t:e,i=n.filters.map((function(e){return M_(e,r)}));return mg.create(i,"or")}(e,t),j_(n)}function F_(e,t){if(yg(t))return xg(t,e.getFilters());var n=t.filters.map((function(t){return M_(e,t)}));return mg.create(n,"or")}function j_(e){if(Bv(e instanceof vg||e instanceof mg),e instanceof vg)return e;var t=e.getFilters();if(1===t.length)return j_(t[0]);if(kg(e))return e;var n=t.map((function(e){return j_(e)})),r=[];return n.forEach((function(t){t instanceof vg?r.push(t):t instanceof mg&&(t.op===e.op?r.push.apply(r,A(t.filters)):r.push(t))})),1===r.length?r[0]:mg.create(r,e.op)}var U_=function(){function e(){h(this,e),this._n=new q_}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this._n.add(t),Im.resolve()}},{key:"getCollectionParents",value:function(e,t){return Im.resolve(this._n.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Im.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Im.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return Im.resolve()}},{key:"createTargetIndexes",value:function(e,t){return Im.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Im.resolve(null)}},{key:"getIndexType",value:function(e,t){return Im.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Im.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Im.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Im.resolve(_m.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Im.resolve(_m.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Im.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Im.resolve()}}]),e}(),q_=function(){function e(){h(this,e),this.index={}}return m(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ey(lm.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Ey(lm.comparator)).toArray()}}]),e}(),V_=new Uint8Array(0),z_=function(){function e(t,n){h(this,e),this.databaseId=n,this.an=new q_,this.un=new iw((function(e){return Lg(e)}),(function(e,t){return Mg(e,t)})),this.uid=t.uid||""}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.an.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.an.add(t)}));var a={collectionId:r,parent:Bm(i)};return B_(e).put(a)}return Im.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[om(t),""],!1,!0);return B_(e).W(r).next((function(e){var r,i=D(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Gm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=K_(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=G_(e);return a.next((function(e){o.put(d_(e,n.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=K_(e),r=G_(e),i=W_(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"deleteAllFieldIndexes",value:function(e){var t=K_(e),n=W_(e),r=G_(e);return t.H().next((function(){return n.H()})).next((function(){return r.H()}))}},{key:"createTargetIndexes",value:function(e,t){var n=this;return Im.forEach(this.cn(t),(function(t){return n.getIndexType(e,t).next((function(r){if(0===r||1===r){var i=new N_(t).on();if(null!=i)return n.addFieldIndex(e,i)}}))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=W_(e),i=!0,a=new Map;return Im.forEach(this.cn(t),(function(t){return n.ln(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=vw(),o=[];return Im.forEach(a,(function(i,a){jv("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(Lg(t)));var u=function(e,t){var n=vm(t);if(void 0===n)return null;var r,i=D(jg(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=D(mm(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=D(jg(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=D(mm(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ug(e,o.fieldPath,e.startAt):qg(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new cg(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=D(mm(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?qg(e,o.fieldPath,e.endAt):Ug(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new cg(r,i)}(a,i),f=n.hn(i,a,c),h=n.hn(i,a,l),d=n.Pn(i,a,s),p=n.In(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return Im.forEach(p,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=dm.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Im.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:A_(mg.create(e.filters,"and")).map((function(t){return Og(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"In",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.Tn(t[h/c]):V_,f=u.En(e,s,n[h%c],r),d=u.dn(e,s,i[h%c],a),p=o.map((function(t){return u.En(e,s,t,!0)}));l.push.apply(l,A(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"En",value:function(e,t,n,r){var i=new C_(e,dm.empty(),t,n);return r?i:i.Jt()}},{key:"dn",value:function(e,t,n,r){var i=new C_(e,dm.empty(),t,n);return r?i.Jt():i}},{key:"ln",value:function(e,t){var n=new N_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=D(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return Im.forEach(i,(function(t){return n.ln(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Ey(hm.comparator),r=!1,i=D(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=D(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=D(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"An",value:function(e,t){var n,r=new S_,i=D(mm(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ht(a.kind);w_.bt.Pt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Wt()}},{key:"Tn",value:function(e){var t=new S_;return w_.bt.Pt(e,t.Ht(0)),t.Wt()}},{key:"Rn",value:function(e,t){var n=new S_;return w_.bt.Pt(Hy(this.databaseId,t),n.Ht(function(e){var t=mm(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}},{key:"Pn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new S_);var i,a=0,o=D(mm(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=D(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.Vn(t,s.fieldPath)&&$y(c))r=this.mn(r,s,c);else{var h=f.Ht(s.kind);w_.bt.Pt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"hn",value:function(e,t,n){return this.Pn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Wt();return t}},{key:"mn",value:function(e,t,n){var r,i=A(e),a=[],o=D(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=D(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new S_;f.seed(l.Wt()),w_.bt.Pt(s,f.Ht(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"Vn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof vg&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=K_(e),i=G_(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Im.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new gm(t.sequenceNumber,new _m(o_(t.readTime),new dm(Gm(t.documentKey)),t.largestBatchId)):gm.empty(),r=e.fields.map((function(e){var t=f(e,2),n=t[0],r=t[1];return new ym(hm.fromServerFormat(n),r)}));return new pm(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:im(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=K_(e),a=G_(e);return this.gn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Im.forEach(t,(function(t){return a.put(d_(t.indexId,r.uid,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Im.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Im.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Im.forEach(a,(function(r){return n.pn(e,t,r).next((function(t){var a=n.yn(i,r);return t.isEqual(a)?Im.resolve():n.wn(e,i,r,t,a)}))}))}))}))}},{key:"Sn",value:function(e,t,n,r){return W_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"bn",value:function(e,t,n,r){return W_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}},{key:"pn",value:function(e,t,n){var r=W_(e),i=new Ey(I_);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},(function(e,r){i=i.add(new C_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"yn",value:function(e,t){var n=new Ey(I_),r=this.An(t,e);if(null==r)return n;var i=vm(t);if(null!=i){var a=e.data.field(i.fieldPath);if($y(a)){var o,u=D(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new C_(t.indexId,e.key,this.Tn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new C_(t.indexId,e.key,V_,r));return n}},{key:"wn",value:function(e,t,n,r,i){var a=this;jv("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Cy(a),s=Cy(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Cy(o)):l?(i(u),u=Cy(a)):(u=Cy(a),s=Cy(o))}}(r,i,I_,(function(r){o.push(a.Sn(e,t,n,r))}),(function(r){o.push(a.bn(e,t,n,r))})),Im.waitFor(o)}},{key:"gn",value:function(e){var t=1;return G_(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return I_(e,t)})).filter((function(e,t,n){return!t||0!==I_(e,n[t-1])}));var r=[];r.push(e);var i,a=D(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=I_(o,e),s=I_(o,t);if(0===u)r[0]=e.Jt();else if(u>0&&s<0)r.push(o),r.push(o.Jt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Dn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,V_,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,V_,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Dn",value:function(e,t){return I_(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Q_)}},{key:"getMinOffset",value:function(e,t){var n=this;return Im.mapArray(this.cn(t),(function(t){return n.ln(e,t).next((function(e){return e||zv()}))})).next(Q_)}}]),e}();function B_(e){return yy(e,"collectionParents")}function W_(e){return yy(e,"indexEntries")}function K_(e){return yy(e,"indexConfiguration")}function G_(e){return yy(e,"indexState")}function Q_(e){Bv(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;bm(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new _m(t.readTime,t.documentKey,n)}var H_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y_=function(){function e(t,n,r){h(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return m(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function $_(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Y({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Bv(1===u)})));var c,l=[],f=D(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Ym(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Im.waitFor(a).next((function(){return l}))}function X_(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw zv();t=e.noDocument}return JSON.stringify(t).length}Y_.DEFAULT_COLLECTION_PERCENTILE=10,Y_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Y_.DEFAULT=new Y_(41943040,Y_.DEFAULT_COLLECTION_PERCENTILE,Y_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Y_.DISABLED=new Y_(-1,0,0);var J_=function(){function e(t,n,r,i){h(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}return m(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eb(e).Y({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=tb(e),o=eb(e);return o.add({}).next((function(u){Bv("number"==typeof u);var s,c=new Jw(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Vk(e.ct,t)})),i=n.mutations.map((function(t){return Vk(e.ct,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Ey((function(e,t){return im(e.canonicalString(),t.canonicalString())})),d=D(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Ym(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,$m))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Cn[u]=c.keys()})),Im.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return eb(e).get(t).next((function(e){return e?(Bv(e.userId===n.userId),u_(n.serializer,e)):null}))}},{key:"vn",value:function(e,t){var n=this;return this.Cn[t]?Im.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Cn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return eb(e).Y({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Bv(t.batchId>=r),a=u_(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return eb(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eb(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return u_(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Hm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return tb(e).Y({range:i},(function(r,i,o){var u=f(r,3),s=u[0],c=u[1],l=u[2],h=Gm(c);if(s===n.userId&&t.path.isEqual(h))return eb(e).get(l).next((function(e){if(!e)throw zv();Bv(e.userId===n.userId),a.push(u_(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ey(im),i=[];return t.forEach((function(t){var a=Hm(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=tb(e).Y({range:o},(function(e,i,a){var o=f(e,3),u=o[0],s=o[1],c=o[2],l=Gm(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Im.waitFor(i).next((function(){return n.Fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Hm(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Ey(im);return tb(e).Y({range:o},(function(e,t,a){var o=f(e,3),s=o[0],c=o[1],l=o[2],h=Gm(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Fn(e,u)}))}},{key:"Fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(eb(e).get(t).next((function(e){if(null===e)throw zv();Bv(e.userId===n.userId),r.push(u_(n.serializer,e))})))})),Im.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return $_(e.ae,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Mn(t.batchId)})),Im.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Mn",value:function(e){delete this.Cn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Im.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return tb(e).Y({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Gm(e[1]);i.push(a)}else r.done()})).next((function(){Bv(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Z_(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return nb(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"lt",value:function(t,n,r,i){return Bv(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Z_(e,t,n){var r=Hm(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return tb(e).Y({range:a,J:!0},(function(e,n,r){var a=f(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function eb(e){return yy(e,"mutations")}function tb(e){return yy(e,"documentMutations")}function nb(e){return yy(e,"mutationQueues")}var rb=function(){function e(t){h(this,e),this.On=t}return m(e,[{key:"next",value:function(){return this.On+=2,this.On}}],[{key:"Nn",value:function(){return new e(0)}},{key:"Bn",value:function(){return new e(-1)}}]),e}(),ib=function(){function e(t,n){h(this,e),this.referenceDelegate=t,this.serializer=n}return m(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Ln(e).next((function(n){var r=new rb(n.highestTargetId);return n.highestTargetId=r.next(),t.kn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Ln(e).next((function(e){return sm.fromTimestamp(new um(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Ln(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Ln(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.kn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.qn(e,t).next((function(){return n.Ln(e).next((function(r){return r.targetCount+=1,n.Qn(t,r),n.kn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.qn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ab(e).delete(t.targetId)})).next((function(){return n.Ln(e)})).next((function(t){return Bv(t.targetCount>0),t.targetCount-=1,n.kn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ab(e).Y((function(o,u){var s=s_(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Im.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return ab(e).Y((function(e,n){var r=s_(n);t(r)}))}},{key:"Ln",value:function(e){return ob(e).get("targetGlobalKey").next((function(e){return Bv(null!==e),e}))}},{key:"kn",value:function(e,t){return ob(e).put("targetGlobalKey",t)}},{key:"qn",value:function(e,t){return ab(e).put(c_(this.serializer,t))}},{key:"Qn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Ln(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Lg(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ab(e).Y({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=s_(n);Mg(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=ub(e);return t.forEach((function(t){var o=Bm(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Im.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=ub(e);return Im.forEach(t,(function(t){var a=Bm(t.path);return Im.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=ub(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ub(e),i=vw();return r.Y({range:n,J:!0},(function(e,t,n){var r=Gm(e[1]),a=new dm(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Bm(t.path),r=IDBKeyRange.bound([n],[om(n)],!1,!0),i=0;return ub(e).Y({index:"documentTargetsIndex",J:!0,range:r},(function(e,t,n){var r=f(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"_t",value:function(e,t){return ab(e).get(t).next((function(e){return e?s_(e):null}))}}]),e}();function ab(e){return yy(e,"targets")}function ob(e){return yy(e,"targetGlobal")}function ub(e){return yy(e,"targetDocuments")}function sb(e,t){var n=f(e,2),r=n[0],i=n[1],a=f(t,2),o=a[0],u=a[1],s=im(r,o);return 0===s?im(i,u):s}var cb=function(){function e(t){h(this,e),this.Kn=t,this.buffer=new Ey(sb),this.$n=0}return m(e,[{key:"Un",value:function(){return++this.$n}},{key:"Wn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();sb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),lb=function(){function e(t,n,r){h(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return m(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"zn",value:function(e){var t=this;jv("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Pm(e.t0)){e.next=12;break}jv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Sm(e.t0);case 14:return e.next=16,t.zn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),fb=function(){function e(t,n){h(this,e),this.jn=t,this.params=n}return m(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.Hn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Im.resolve(Um._e);var r=new cb(t);return this.jn.forEachTarget(e,(function(e){return r.Wn(e.sequenceNumber)})).next((function(){return n.jn.Jn(e,(function(e){return r.Wn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(jv("LruGarbageCollector","Garbage collection skipped; disabled"),Im.resolve(H_)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(jv("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),H_):n.Yn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Yn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(jv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Fv()<=nr.DEBUG&&jv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Im.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function hb(e,t){return new fb(e,t)}var db=function(){function e(t,n){h(this,e),this.db=t,this.garbageCollector=hb(this,n)}return m(e,[{key:"Hn",value:function(e){var t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Zn",value:function(e){var t=0;return this.Jn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Jn",value:function(e,t){return this.Xn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return pb(e,n)}},{key:"removeReference",value:function(e,t,n){return pb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return pb(e,t)}},{key:"er",value:function(e,t){return function(e,t){var n=!1;return nb(e).Z((function(r){return Z_(e,r,t).next((function(e){return e&&(n=!0),Im.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Xn(e,(function(o,u){if(u<=t){var s=n.er(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,sm.min()),ub(e).delete(function(e){return[0,Bm(e.path)]}(o))}))}));i.push(s)}})).next((function(){return Im.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return pb(e,t)}},{key:"Xn",value:function(e,t){var n,r=ub(e),i=Um._e;return r.Y({index:"documentTargetsIndex"},(function(e,r){var a=f(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Um._e&&t(new dm(Gm(n)),i),i=s,n=u):i=Um._e})).next((function(){i!==Um._e&&t(new dm(Gm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function pb(e,t){return ub(e).put(function(e,t){return{targetId:0,path:Bm(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var vb=function(){function e(){h(this,e),this.changes=new iw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return m(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,sg.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Im.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),mb=function(){function e(t){h(this,e),this.serializer=t}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return kb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return kb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],i_(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.tr(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=sg.newInvalidDocument(t);return kb(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_b(t))},(function(e,i){r=n.nr(t,i)})).next((function(){return r}))}},{key:"rr",value:function(e,t){var n=this,r={size:0,document:sg.newInvalidDocument(t)};return kb(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_b(t))},(function(e,i){r={document:n.nr(t,i),size:X_(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=ow();return this.ir(e,t,(function(e,t){var i=n.nr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"sr",value:function(e,t){var n=this,r=ow(),i=new _y(dm.comparator);return this.ir(e,t,(function(e,t){var a=n.nr(e,t);r=r.insert(e,a),i=i.insert(e,X_(t))})).next((function(){return{documents:r,_r:i}}))}},{key:"ir",value:function(e,t,n){if(t.isEmpty())return Im.resolve();var r=new Ey(xb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(_b(r.first()),_b(r.last())),a=r.getIterator(),o=a.getNext();return kb(e).Y({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=dm.fromSegments([].concat(A(t.prefixPath),[t.collectionGroup,t.documentId]));o&&xb(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.U(_b(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,o=t.path,u=[o.popLast().toArray(),o.lastSegment(),i_(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return kb(e).W(IDBKeyRange.bound(u,s,!0)).next((function(e){null==i||i.incrementDocumentReadCount(e.length);var n,o=ow(),u=D(e);try{for(u.s();!(n=u.n()).done;){var s=n.value,c=a.nr(dm.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);c.isFoundDocument()&&(ew(t,c)||r.has(c.key))&&(o=o.insert(c.key,c))}}catch(l){u.e(l)}finally{u.f()}return o}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ow(),o=bb(t,n),u=bb(t,_m.max());return kb(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.nr(dm.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new gb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return wb(e).get("remoteDocumentGlobalKey").next((function(e){return Bv(!!e),e}))}},{key:"tr",value:function(e,t){return wb(e).put("remoteDocumentGlobalKey",t)}},{key:"nr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Uk(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=dm.fromSegments(t.noDocument.path),i=o_(t.noDocument.readTime);n=sg.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return zv();var a=dm.fromSegments(t.unknownDocument.path),o=o_(t.unknownDocument.version);n=sg.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new um(e[0],e[1]);return sm.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(sm.min()))return n}return sg.newInvalidDocument(e)}}]),e}();function yb(e){return new mb(e)}var gb=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).ar=e,i.trackRemovals=r,i.ur=new iw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Ey((function(e,t){return im(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.ur.get(a);if(n.push(t.ar.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=r_(t.ar.serializer,o);i=i.add(a.path.popLast());var c=X_(s);r+=c-u.size,n.push(t.ar.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=r_(t.ar.serializer,o.convertToNoDocument(sm.min()));n.push(t.ar.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.ar.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.ar.updateMetadata(e,r)),Im.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.ar.rr(e,t).next((function(e){return n.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.ar.sr(e,t).next((function(e){var t=e.documents;return e._r.forEach((function(e,r){n.ur.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(vb);function wb(e){return yy(e,"remoteDocumentGlobal")}function kb(e){return yy(e,"remoteDocumentsV14")}function _b(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function bb(e,t){var n=t.documentKey.path.toArray();return[e,i_(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function xb(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=im(n[a],r[a]))return i;return(i=im(n.length,r.length))||((i=im(n[n.length-2],r[r.length-2]))||im(n[n.length-1],r[r.length-1]))}var Eb=m((function e(t,n){h(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Sb=function(){function e(t,n,r,i){h(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return m(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&qw(r.mutation,e,Iy.empty(),um.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,vw()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vw(),i=lw();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=sw();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=lw();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,vw())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=ow(),a=hw(),o=hw();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ww)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),qw(o.mutation,t,o.mutation.getFieldMask(),um.now())):a.set(t.key,Iy.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Eb(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=hw(),i=new _y((function(e,t){return e-t})),a=vw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=D(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Iy.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||vw()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=fw();c.forEach((function(e){if(!a.has(e)){var n=jw(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Im.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return dm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Im.resolve(lw()),u=-1,s=a;return o.next((function(t){return Im.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Im.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,vw())})).next((function(e){return{batchId:u,changes:cw(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new dm(t)).next((function(e){var t=sw();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=sw();return this.indexManager.getCollectionParents(e,a).next((function(u){return Im.forEach(u,(function(u){var s=function(e,t){return new Vg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,u.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,sg.newInvalidDocument(r)))}));var n=sw();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&qw(a.mutation,r,Iy.empty(),um.now()),ew(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),Cb=function(){function e(t){h(this,e),this.serializer=t,this.cr=new Map,this.lr=new Map}return m(e,[{key:"getBundleMetadata",value:function(e,t){return Im.resolve(this.cr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Tk(e.createTime)}}(t)),Im.resolve()}},{key:"getNamedQuery",value:function(e,t){return Im.resolve(this.lr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:l_(e.bundledQuery),readTime:Tk(e.readTime)}}(t)),Im.resolve()}}]),e}(),Ib=function(){function e(){h(this,e),this.overlays=new _y(dm.comparator),this.hr=new Map}return m(e,[{key:"getOverlay",value:function(e,t){return Im.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=lw();return Im.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),Im.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.hr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.hr.delete(n)),Im.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=lw(),i=t.length+1,a=new dm(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Im.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new _y((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=lw(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=lw(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Im.resolve(s)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new ek(t,n));var a=this.hr.get(t);void 0===a&&(a=vw(),this.hr.set(t,a)),this.hr.set(t,a.add(n.key))}}]),e}(),Tb=function(){function e(){h(this,e),this.Pr=new Ey(Nb.Ir),this.Tr=new Ey(Nb.Er)}return m(e,[{key:"isEmpty",value:function(){return this.Pr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Nb(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ar(new Nb(e,t))}},{key:"Rr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Vr",value:function(e){var t=this,n=new dm(new lm([])),r=new Nb(n,e),i=new Nb(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Ar(e),a.push(e.key)})),a}},{key:"mr",value:function(){var e=this;this.Pr.forEach((function(t){return e.Ar(t)}))}},{key:"Ar",value:function(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}},{key:"gr",value:function(e){var t=new dm(new lm([])),n=new Nb(t,e),r=new Nb(t,e+1),i=vw();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Nb(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Nb=function(){function e(t,n){h(this,e),this.key=t,this.pr=n}return m(e,null,[{key:"Ir",value:function(e,t){return dm.comparator(e.key,t.key)||im(e.pr,t.pr)}},{key:"Er",value:function(e,t){return im(e.pr,t.pr)||dm.comparator(e.key,t.key)}}]),e}(),Db=function(){function e(t,n){h(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ey(Nb.Ir)}return m(e,[{key:"checkEmpty",value:function(e){return Im.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Jw(i,t,n,r);this.mutationQueue.push(a);var o,u=D(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.wr=this.wr.add(new Nb(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Im.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Im.resolve(this.Sr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.br(n),i=r<0?0:r;return Im.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Im.resolve(0===this.mutationQueue.length?-1:this.yr-1)}},{key:"getAllMutationBatches",value:function(e){return Im.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Nb(t,0),i=new Nb(t,Number.POSITIVE_INFINITY),a=[];return this.wr.forEachInRange([r,i],(function(e){var t=n.Sr(e.pr);a.push(t)})),Im.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ey(im);return t.forEach((function(e){var t=new Nb(e,0),i=new Nb(e,Number.POSITIVE_INFINITY);n.wr.forEachInRange([t,i],(function(e){r=r.add(e.pr)}))})),Im.resolve(this.Dr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;dm.isDocumentKey(i)||(i=i.child(""));var a=new Nb(new dm(i),0),o=new Ey(im);return this.wr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),a),Im.resolve(this.Dr(o))}},{key:"Dr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Sr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Bv(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.wr;return Im.forEach(t.mutations,(function(i){var a=new Nb(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.wr=r}))}},{key:"Mn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Nb(t,0),r=this.wr.firstAfterOrEqual(n);return Im.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Im.resolve()}},{key:"Cr",value:function(e,t){return this.br(e)}},{key:"br",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Sr",value:function(e){var t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Ab=function(){function e(t){h(this,e),this.vr=t,this.docs=new _y(dm.comparator),this.size=0}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Im.resolve(n?n.document.mutableCopy():sg.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ow();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():sg.newInvalidDocument(e))})),Im.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=ow(),a=t.path,o=new dm(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||bm(km(l),n)<=0||(r.has(l.key)||ew(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Im.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){zv()}},{key:"Fr",value:function(e,t){return Im.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Pb(this)}},{key:"getSize",value:function(e){return Im.resolve(this.size)}}]),e}(),Pb=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this)).ar=e,r}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ar.addEntry(e,i)):t.ar.removeEntry(r)})),Im.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ar.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ar.getEntries(e,t)}}]),n}(vb),Rb=function(){function e(t){h(this,e),this.persistence=t,this.Mr=new iw((function(e){return Lg(e)}),Mg),this.lastRemoteSnapshotVersion=sm.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Tb,this.targetCount=0,this.Br=rb.Nn()}return m(e,[{key:"forEachTarget",value:function(e,t){return this.Mr.forEach((function(e,n){return t(n)})),Im.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Im.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Im.resolve(this.Or)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Br.next(),Im.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Im.resolve()}},{key:"qn",value:function(e){this.Mr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Br=new rb(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.qn(t),this.targetCount+=1,Im.resolve()}},{key:"updateTargetData",value:function(e,t){return this.qn(t),Im.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Im.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Mr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Mr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Im.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Im.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Mr.get(t)||null;return Im.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Nr.dr(t,n),Im.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Nr.Rr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Im.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Nr.Vr(t),Im.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Nr.gr(t);return Im.resolve(n)}},{key:"containsKey",value:function(e,t){return Im.resolve(this.Nr.containsKey(t))}}]),e}(),Ob=function(){function e(t,n){var r=this;h(this,e),this.Lr={},this.overlays={},this.kr=new Um(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Rb(this),this.indexManager=new U_,this.remoteDocumentCache=function(e){return new Ab(e)}((function(e){return r.referenceDelegate.Kr(e)})),this.serializer=new n_(n),this.$r=new Cb(this.serializer)}return m(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Ib,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Lr[e.toKey()];return n||(n=new Db(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(e,t,n){var r=this;jv("MemoryPersistence","Starting transaction:",e);var i=new Lb(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((function(e){return r.referenceDelegate.Wr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gr",value:function(e,t){return Im.or(Object.values(this.Lr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Lb=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return m(n)}(Em),Mb=function(){function e(t){h(this,e),this.persistence=t,this.zr=new Tb,this.jr=null}return m(e,[{key:"Jr",get:function(){if(this.jr)return this.jr;throw zv()}},{key:"addReference",value:function(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Im.resolve()}},{key:"removeReference",value:function(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Im.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Jr.add(t.toString()),Im.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.zr.Vr(t.targetId).forEach((function(e){return n.Jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ur",value:function(){this.jr=new Set}},{key:"Wr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Im.forEach(this.Jr,(function(r){var i=dm.fromPath(r);return t.Yr(e,i).next((function(e){e||n.removeEntry(i,sm.min())}))})).next((function(){return t.jr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Yr(e,t).next((function(e){e?n.Jr.delete(t.toString()):n.Jr.add(t.toString())}))}},{key:"Kr",value:function(e){return 0}},{key:"Yr",value:function(e,t){var n=this;return Im.or([function(){return Im.resolve(n.zr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gr(e,t)}])}}],[{key:"Hr",value:function(t){return new e(t)}}]),e}(),Fb=function(){function e(t){h(this,e),this.serializer=t}return m(e,[{key:"N",value:function(e,t,n,r){var i=this,a=new Tm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qm,{unique:!0}),e.createObjectStore("documentMutations")}(e),jb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Im.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),jb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sm.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Im.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Xr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ei(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ti(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ni(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ri(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:sy});t.createIndex("collectionPathOverlayIndex",cy,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ly,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Xm});t.createIndex("documentKeyIndex",Jm),t.createIndex("collectionGroupIndex",Zm)}(e)})).next((function(){return i.ii(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:iy}).createIndex("sequenceNumberIndex",ay,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:oy}).createIndex("documentKeyIndex",uy,{unique:!1})}(e)}))),o}},{key:"ei",value:function(e){var t=0;return e.store("remoteDocuments").Y((function(e,n){t+=X_(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Xr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Im.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Im.forEach(r,(function(r){Bv(r.userId===n.userId);var i=u_(t.serializer,r);return $_(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ti",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Y((function(n,i){var a=new lm(n),o=function(e){return[0,Bm(e)]}(a);r.push(t.get(o).next((function(n){return n?Im.resolve():function(n){return t.put({targetId:0,path:Bm(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Im.waitFor(r)}))}))}},{key:"ni",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:ry});var n=t.store("collectionParents"),r=new q_,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Bm(i)})}};return t.store("remoteDocuments").Y({J:!0},(function(e,t){var n=new lm(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Y({J:!0},(function(e,t){var n=f(e,3),r=(n[0],n[1]),a=(n[2],Gm(r));return i(a.popLast())}))}))}},{key:"ri",value:function(e){var t=this,n=e.store("targets");return n.Y((function(e,r){var i=s_(r),a=c_(t.serializer,i);return n.put(a)}))}},{key:"ii",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Y((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new dm(lm.fromString(e.document.name).popFirst(5)):e.noDocument?dm.fromSegments(e.noDocument.path):e.unknownDocument?dm.fromSegments(e.unknownDocument.path):zv()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return Im.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=yb(this.serializer),a=new Ob(Mb.Hr,this.serializer.ct);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:vw();u_(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Im.forEach(r,(function(e,r){var o=new Ov(r),u=y_.lt(n.serializer,o),s=a.getIndexManager(o),c=J_.lt(o,n.serializer,s,a.referenceDelegate);return new Sb(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new my(t,Um._e),e).next()}))}))}}]),e}();function jb(e){e.createObjectStore("targetDocuments",{keyPath:ty}).createIndex("documentTargetsIndex",ny,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ey,{unique:!0}),e.createObjectStore("targetGlobal")}var Ub="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qb=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(h(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.oi=a,this.window=o,this.document=u,this._i=c,this.ai=l,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=function(e){return Promise.resolve()},!e.D())throw new Gv(Kv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new db(this,i),this.Ti=n+"main",this.serializer=new n_(s),this.Ei=new Nm(this.Ti,this.ui,new Fb(this.serializer)),this.Qr=new ib(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yb(this.serializer),this.$r=new p_,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&Uv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return m(e,[{key:"start",value:function(){var e=this;return this.Ai().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Gv(Kv.FAILED_PRECONDITION,Ub);return e.Ri(),e.Vi(),e.mi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Qr.getHighestSequenceNumber(t)}))})).then((function(t){e.kr=new Um(t,e._i)})).then((function(){e.qr=!0})).catch((function(t){return e.Ei&&e.Ei.close(),Promise.reject(t)}))}},{key:"fi",value:function(e){var t=this;return this.Ii=function(){var n=S(x().mark((function n(r){return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ei.L(function(){var t=S(x().mark((function t(n){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ai();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ai",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return zb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.gi(t).next((function(t){t||(e.isPrimary=!1,e.oi.enqueueRetryable((function(){return e.Ii(!1)})))}))})).next((function(){return e.pi(t)})).next((function(n){return e.isPrimary&&!n?e.yi(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Pm(t))return jv("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return jv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.oi.enqueueRetryable((function(){return e.Ii(t)})),e.isPrimary=t}))}},{key:"gi",value:function(e){var t=this;return Vb(e).get("owner").next((function(e){return Im.resolve(t.Si(e))}))}},{key:"bi",value:function(e){return zb(e).delete(this.clientId)}},{key:"Di",value:function(){var e=S(x().mark((function e(){var t,n,r,i,a=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ci(this.Pi,18e5)){e.next=6;break}return this.Pi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=yy(e,"clientMetadata");return t.W().next((function(e){var n=a.vi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Im.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.di){n=D(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.di.removeItem(this.Fi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mi",value:function(){var e=this;this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ai().then((function(){return e.Di()})).then((function(){return e.mi()}))}))}},{key:"Si",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"pi",value:function(e){var t=this;return this.ai?Im.resolve(!0):Vb(e).get("owner").next((function(n){if(null!==n&&t.Ci(n.leaseTimestampMs,5e3)&&!t.Mi(n.ownerId)){if(t.Si(n)&&t.networkEnabled)return!0;if(!t.Si(n)){if(!n.allowTabSynchronization)throw new Gv(Kv.FAILED_PRECONDITION,Ub);return!1}}return!(!t.networkEnabled||!t.inForeground)||zb(e).W().next((function(e){return void 0===t.vi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&jv("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=S(x().mark((function e(){var t=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),e.next=7,this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new my(e,Um._e);return t.yi(n).next((function(){return t.bi(n)}))}));case 7:this.Ei.close(),this.Bi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vi",value:function(e,t){var n=this;return e.filter((function(e){return n.Ci(e.updateTimeMs,t)&&!n.Mi(e.clientId)}))}},{key:"Li",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return zb(t).W().next((function(t){return e.vi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.qr}},{key:"getMutationQueue",value:function(e,t){return J_.lt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new z_(e,this.serializer.ct.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return y_.lt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(e,t,n){var r=this;jv("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?vy:14===e?py:13===e?dy:12===e?hy:11===e?fy:void zv()}(this.ui);return this.Ei.runTransaction(e,a,o,(function(a){return i=new my(a,r.kr?r.kr.next():Um._e),"readwrite-primary"===t?r.gi(i).next((function(e){return!!e||r.pi(i)})).next((function(t){if(!t)throw Uv("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.oi.enqueueRetryable((function(){return r.Ii(!1)})),new Gv(Kv.FAILED_PRECONDITION,xm);return n(i)})).next((function(e){return r.wi(i).next((function(){return e}))})):r.ki(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"ki",value:function(e){var t=this;return Vb(e).get("owner").next((function(e){if(null!==e&&t.Ci(e.leaseTimestampMs,5e3)&&!t.Mi(e.ownerId)&&!t.Si(e)&&!(t.ai||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Gv(Kv.FAILED_PRECONDITION,Ub)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vb(e).put("owner",t)}},{key:"yi",value:function(e){var t=this,n=Vb(e);return n.get("owner").next((function(e){return t.Si(e)?(jv("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Im.resolve()}))}},{key:"Ci",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Uv("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=function(){e.oi.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ai()}))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}},{key:"Oi",value:function(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}},{key:"Vi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;Tn()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.oi.enterRestrictedMode(!0),t.oi.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"Ni",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Mi",value:function(e){var t;try{var n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return jv("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Uv("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Uv("Failed to set zombie client id.",e)}}},{key:"Bi",value:function(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}},{key:"Fi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Nm.D()}}]),e}();function Vb(e){return yy(e,"owner")}function zb(e){return yy(e,"clientMetadata")}function Bb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Wb=function(){function e(t,n,r,i){h(this,e),this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}return m(e,null,[{key:"Ki",value:function(t,n){var r,i=vw(),a=vw(),o=D(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Kb=function(){function e(){h(this,e),this._documentReadCount=0}return m(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),Gb=function(){function e(){h(this,e),this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Tn()?8:Nm.v(Sn())>0?6:4}return m(e,[{key:"initialize",value:function(e,t){this.zi=e,this.indexManager=t,this.$i=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.ji(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Hi(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new Kb;return i.Ji(e,t,n).next((function(r){if(a.result=r,i.Ui)return i.Yi(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Yi",value:function(e,t,n,r){return n.documentReadCount<this.Wi?(Fv()<=nr.DEBUG&&jv("QueryEngine","SDK will not create cache indexes for query:",Zg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Im.resolve()):(Fv()<=nr.DEBUG&&jv("QueryEngine","Query:",Zg(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Fv()<=nr.DEBUG&&jv("QueryEngine","The SDK decides to create cache indexes for query:",Zg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qg(t))):Im.resolve())}},{key:"ji",value:function(e,t){var n=this;if(Wg(t))return Im.resolve(null);var r=Qg(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=$g(t,null,"F"),r=Qg(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=vw.apply(void 0,A(i));return n.zi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Zi(t,i);return n.Xi(t,o,a,r.readTime)?n.ji(e,$g(t,null,"F")):n.es(e,o,t,r)}))}))})))}))}},{key:"Hi",value:function(e,t,n,r){var i=this;return Wg(t)||r.isEqual(sm.min())?Im.resolve(null):this.zi.getDocuments(e,n).next((function(a){var o=i.Zi(t,a);return i.Xi(t,o,n,r)?Im.resolve(null):(Fv()<=nr.DEBUG&&jv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zg(t)),i.es(e,o,t,wm(r,-1)).next((function(e){return e})))}))}},{key:"Zi",value:function(e,t){var n=new Ey(nw(e));return t.forEach((function(t,r){ew(e,r)&&(n=n.add(r))})),n}},{key:"Xi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ji",value:function(e,t,n){return Fv()<=nr.DEBUG&&jv("QueryEngine","Using full collection scan to execute query:",Zg(t)),this.zi.getDocumentsMatchingQuery(e,t,_m.min(),n)}},{key:"es",value:function(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Qb=function(){function e(t,n,r,i){h(this,e),this.persistence=t,this.ts=n,this.serializer=i,this.ns=new _y(im),this.rs=new iw((function(e){return Lg(e)}),Mg),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}return m(e,[{key:"_s",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sb(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ns)}))}}]),e}();function Hb(e,t,n,r){return new Qb(e,t,n,r)}function Yb(e,t){return $b.apply(this,arguments)}function $b(){return $b=S(x().mark((function e(t,n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wv(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r._s(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=vw(),s=D(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=D(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(w){f.e(w)}finally{f.f()}}}catch(w){s.e(w)}finally{s.f()}var d,p=D(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=D(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(w){y.e(w)}finally{y.f()}}}catch(w){p.e(w)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{us:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),$b.apply(this,arguments)}function Xb(e,t){var n=Wv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Im.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Bv(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=vw(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Jb(e){var t=Wv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Qr.getLastRemoteSnapshotVersion(e)}))}function Zb(e,t){var n=Wv(e),r=t.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Qr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Qr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Ny.EMPTY_BYTE_STRING,sm.min()).withLastLimboFreeSnapshotVersion(sm.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Qr.updateTargetData(e,c))}}));var u=ow(),s=vw();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(ex(e,a,t.documentUpdates).next((function(e){u=e.cs,s=e.ls}))),!r.isEqual(sm.min())){var c=n.Qr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Im.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.ns=i,e}))}function ex(e,t,n){var r=vw(),i=vw();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ow();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(sm.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):jv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{cs:r,ls:i}}))}function tx(e,t){var n=Wv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function nx(e,t){var n=Wv(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Qr.getTargetData(e,t).next((function(i){return i?(r=i,Im.resolve(r)):n.Qr.allocateTargetId(e).next((function(i){return r=new t_(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}function rx(e,t,n){return ix.apply(this,arguments)}function ix(){return ix=S(x().mark((function e(t,n,r){var i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Wv(t),a=i.ns.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Pm(e.t1)){e.next=12;break}throw e.t1;case 12:jv("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ns=i.ns.remove(n),i.rs.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),ix.apply(this,arguments)}function ax(e,t,n){var r=Wv(e),i=sm.min(),a=vw();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=Wv(e),i=r.rs.get(n);return void 0!==i?Im.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Qg(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ts.getDocumentsMatchingQuery(e,t,n?i:sm.min(),n?a:vw())})).next((function(e){return sx(r,tw(t),e),{documents:e,hs:a}}))}))}function ox(e,t){var n=Wv(e),r=Wv(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r._t(e,t).next((function(e){return e?e.target:null}))}))}function ux(e,t){var n=Wv(e),r=n.ss.get(t)||sm.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.os.getAllFromCollectionGroup(e,t,wm(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return sx(n,t,e),e}))}function sx(e,t,n){var r=e.ss.get(t)||sm.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}function cx(e,t,n,r){return lx.apply(this,arguments)}function lx(){return lx=S(x().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Wv(t),o=vw(),u=ow(),s=D(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ps(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Is(l)).setReadTime(n.Ts(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.os.newChangeBuffer({trackRemovals:!0}),e.next=7,nx(a,function(e){return Qg(Bg(lm.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return ex(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Qr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Qr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls)})).next((function(){return t.cs}))}))})));case 9:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}function fx(e,t){return hx.apply(this,arguments)}function hx(){return hx=S(x().mark((function e(t,n){var r,i,a,o=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:vw(),e.next=3,nx(t,Qg(l_(n.bundledQuery)));case 3:return i=e.sent,a=Wv(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Tk(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.$r.saveNamedQuery(e,n);var o=i.withResumeToken(Ny.EMPTY_BYTE_STRING,t);return a.ns=a.ns.insert(o.targetId,o),a.Qr.updateTargetData(e,o).next((function(){return a.Qr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Qr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.$r.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),hx.apply(this,arguments)}function dx(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function px(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function vx(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var mx=function(){function e(t,n,r,i){h(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return m(e,[{key:"ds",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Gv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Uv("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),yx=function(){function e(t,n,r){h(this,e),this.targetId=t,this.state=n,this.error=r}return m(e,[{key:"ds",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Gv(i.error.code,i.error.message))),a?new e(t,i.state,r):(Uv("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),gx=function(){function e(t,n){h(this,e),this.clientId=t,this.activeTargetIds=n}return m(e,null,[{key:"Es",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=yw(),o=0;i&&o<r.activeTargetIds.length;++o)i=zm(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Uv("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),wx=function(){function e(t,n){h(this,e),this.clientId=t,this.onlineState=n}return m(e,null,[{key:"Es",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Uv("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),kx=function(){function e(){h(this,e),this.activeTargetIds=yw()}return m(e,[{key:"As",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ds",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),_x=function(){function e(t,n,r,i,a){h(this,e),this.window=t,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new _y(im),this.started=!1,this.ys=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ws=dx(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new kx),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}return m(e,[{key:"start",value:function(){var e=S(x().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Li();case 2:t=e.sent,n=D(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Vs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(dx(this.persistenceKey,i)))&&(o=gx.Es(i,a))&&(this.ps=this.ps.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ms(),(u=this.storage.getItem(this.vs))&&(s=this.xs(u))&&this.Os(s),c=D(this.ys);try{for(c.s();!(l=c.n()).done;)f=l.value,this.gs(f)}catch(d){c.e(d)}finally{c.f()}this.ys=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ss,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ns(this.ps)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ps.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Bs(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Bs(e,t,n),this.Ls(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(vx(this.persistenceKey,e));if(n){var r=yx.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ks.Rs(e),this.Ms()}},{key:"isLocalQueryTarget",value:function(e){return this.ks.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(vx(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.qs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ls(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Qs(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ks(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return jv("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){jv("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){jv("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"gs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(jv("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Uv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(S(x().mark((function e(){var r,i,a,o,u,s,c;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.bs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.$s(n.key),e.abrupt("return",t.Us(r,null));case 6:if(!(i=t.Ws(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Us(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Ds.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Gs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.zs(a));case 16:e.next=41;break;case 18:if(!t.Cs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.js(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Hs(o));case 23:e.next=41;break;case 25:if(n.key!==t.vs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.xs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Os(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ss){e.next=37;break}s=function(e){var t=Um._e;if(null!=e)try{var n=JSON.parse(e);Bv("number"==typeof n),t=n}catch(e){Uv("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Um._e&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Fs){e.next=41;break}return c=t.Js(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Ys(e)})));case 41:e.next=44;break;case 43:t.ys.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"ks",get:function(){return this.ps.get(this.Vs)}},{key:"Ms",value:function(){this.setItem(this.ws,this.ks.ds())}},{key:"Bs",value:function(e,t,n){var r=new mx(this.currentUser,e,t,n),i=px(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}},{key:"Ls",value:function(e){var t=px(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Qs",value:function(e){var t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}},{key:"qs",value:function(e,t,n){var r=vx(this.persistenceKey,e),i=new yx(e,t,n);this.setItem(r,i.ds())}},{key:"Ks",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}},{key:"$s",value:function(e){var t=this.bs.exec(e);return t?t[1]:null}},{key:"Ws",value:function(e,t){var n=this.$s(e);return gx.Es(n,t)}},{key:"Gs",value:function(e,t){var n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return mx.Es(new Ov(i),r,t)}},{key:"js",value:function(e,t){var n=this.Cs.exec(e),r=Number(n[1]);return yx.Es(r,t)}},{key:"xs",value:function(e){return wx.Es(e)}},{key:"Js",value:function(e){return JSON.parse(e)}},{key:"zs",value:function(){var e=S(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Zs(t.batchId,t.state,t.error));case 2:jv("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Hs",value:function(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}},{key:"Us",value:function(e,t){var n=this,r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),a=this.Ns(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.eo(o,u).then((function(){n.ps=r}))}},{key:"Os",value:function(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ns",value:function(e){var t=yw();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),bx=function(){function e(){h(this,e),this.no=new kx,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return m(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.no.As(e),this.ro[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.ro[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.no.Rs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.no.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.ro[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.no.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.no.activeTargetIds.has(e)}},{key:"start",value:function(){return this.no=new kx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),xx=function(){function e(){h(this,e)}return m(e,[{key:"io",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ex=function(){function e(){var t=this;h(this,e),this.so=function(){return t.oo()},this._o=function(){return t.ao()},this.uo=[],this.co()}return m(e,[{key:"io",value:function(e){this.uo.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}},{key:"co",value:function(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}},{key:"oo",value:function(){jv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=D(this.uo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"ao",value:function(){jv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=D(this.uo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Sx=null;function Cx(){return null===Sx?Sx=268435456+Math.round(2147483648*Math.random()):Sx++,"0x"+Sx.toString(16)}var Ix={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Tx=function(){function e(t){h(this,e),this.lo=t.lo,this.ho=t.ho}return m(e,[{key:"Po",value:function(e){this.Io=e}},{key:"To",value:function(e){this.Eo=e}},{key:"onMessage",value:function(e){this.Ao=e}},{key:"close",value:function(){this.ho()}},{key:"send",value:function(e){this.lo(e)}},{key:"Ro",value:function(){this.Io()}},{key:"Vo",value:function(e){this.Eo(e)}},{key:"mo",value:function(e){this.Ao(e)}}]),e}(),Nx="WebChannelConnection",Dx=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return m(n,[{key:"Co",value:function(e,t,n,r){var i=Cx();return new Promise((function(a,o){var u=new Dv;u.setWithCredentials(!0),u.listenOnce(Cv.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Sv.NO_ERROR:var t=u.getResponseJson();jv(Nx,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Sv.TIMEOUT:jv(Nx,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Gv(Kv.DEADLINE_EXCEEDED,"Request time out"));break;case Sv.HTTP_ERROR:var n=u.getStatus();if(jv(Nx,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Kv).indexOf(t)>=0?t:Kv.UNKNOWN}(s.status);o(new Gv(c,s.message))}else o(new Gv(Kv.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Gv(Kv.UNAVAILABLE,"Connection failed."));break;default:zv()}}finally{jv(Nx,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);jv(Nx,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Fo",value:function(e,t,n){var r=Cx(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=xv(),o=Ev(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");jv(Nx,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new Tx({lo:function(t){h?jv(Nx,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(jv(Nx,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),jv(Nx,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},ho:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Nv.EventType.OPEN,(function(){h||jv(Nx,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Nv.EventType.CLOSE,(function(){h||(h=!0,jv(Nx,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Vo())})),p(l,Nv.EventType.ERROR,(function(t){h||(h=!0,qv(Nx,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Vo(new Gv(Kv.UNAVAILABLE,"The operation could not be completed")))})),p(l,Nv.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Bv(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){jv(Nx,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Hw[e];if(void 0!==t)return rk(t)}(u),c=o.message;void 0===s&&(s=Kv.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.Vo(new Gv(s,c)),l.close()}else jv(Nx,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.mo(i)}})),p(o,Iv.STAT_EVENT,(function(t){t.stat===Tv.PROXY?jv(Nx,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Tv.NOPROXY&&jv(Nx,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Ro()}),0),d}}]),n}(function(){function e(t){h(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+t.host,this.po="projects/".concat(r,"/databases/").concat(i),this.yo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return m(e,[{key:"wo",get:function(){return!1}},{key:"So",value:function(e,t,n,r,i){var a=Cx(),o=this.bo(e,t.toUriEncodedString());jv("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,r,i),this.Co(e,o,u,n).then((function(t){return jv("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw qv("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.So(e,t,n,r,i)}},{key:"Do",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"bo",value:function(e,t){var n=Ix[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}},{key:"terminate",value:function(){}}]),e}());function Ax(){return"undefined"!=typeof window?window:null}function Px(){return"undefined"!=typeof document?document:null}function Rx(e){return new xk(e,!0)}var Ox=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;h(this,e),this.oi=t,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=a,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}return m(e,[{key:"reset",value:function(){this.No=0}},{key:"ko",value:function(){this.No=this.Oo}},{key:"qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&jv("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(function(){return t.Lo=Date.now(),e()})),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}},{key:"Ko",value:function(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}},{key:"cancel",value:function(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Qo",value:function(){return(Math.random()-.5)*this.No}}]),e}(),Lx=function(){function e(t,n,r,i,a,o,u,s){h(this,e),this.oi=t,this.$o=r,this.Uo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Ox(t,n)}return m(e,[{key:"Ho",value:function(){return 1===this.state||5===this.state||this.Jo()}},{key:"Jo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Yo()}},{key:"stop",value:function(){var e=S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Ho(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zo",value:function(){this.state=0,this.jo.reset()}},{key:"Xo",value:function(){var e=this;this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(function(){return e.e_()})))}},{key:"t_",value:function(e){this.n_(),this.stream.send(e)}},{key:"e_",value:function(){var e=S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Jo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"n_",value:function(){this.Go&&(this.Go.cancel(),this.Go=null)}},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"close",value:function(){var e=S(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():n&&n.code===Kv.RESOURCE_EXHAUSTED?(Uv(n.toString()),Uv("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===Kv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.To(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"i_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=f(t,2),i=r[0],a=r[1];e.Wo===n&&e.o_(i,a)}),(function(n){t((function(){var t=new Gv(Kv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.__(t)}))}))}},{key:"o_",value:function(e,t){var n=this,r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((function(){r((function(){return n.state=2,n.zo=n.oi.enqueueAfterDelay(n.Uo,1e4,(function(){return n.Jo()&&(n.state=3),Promise.resolve()})),n.listener.Po()}))})),this.stream.To((function(e){r((function(){return n.__(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Yo",value:function(){var e=this;this.state=5,this.jo.qo(S(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"__",value:function(e){return jv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"s_",value:function(e){var t=this;return function(n){t.oi.enqueueAndForget((function(){return t.Wo===e?n():(jv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Mx=function(e){g(n,e);var t=b(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return m(n,[{key:"a_",value:function(e,t){return this.connection.Fo("Listen",e,t)}},{key:"onMessage",value:function(e){this.jo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:zv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Bv(void 0===t||"string"==typeof t),Ny.fromBase64String(t||"")):(Bv(void 0===t||t instanceof Uint8Array),Ny.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Kv.UNKNOWN:rk(e.code);return new Gv(t,e.message||"")}(o);n=new vk(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Rk(e,s.document.name),l=Tk(s.document.updateTime),f=s.document.createTime?Tk(s.document.createTime):sm.min(),h=new og({mapValue:{fields:s.document.fields}}),d=sg.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new dk(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Rk(e,m.document),g=m.readTime?Tk(m.readTime):sm.min(),w=sg.newNoDocument(y,g),k=m.removedTargetIds||[];n=new dk([],k,w.key,w)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var b=Rk(e,_.document),x=_.removedTargetIds||[];n=new dk([],x,b,null)}else{if(!("filter"in t))return zv();t.filter;var E=t.filter;E.targetId;var S=E.count,C=void 0===S?0:S,I=E.unchangedNames,T=new tk(C,I),N=E.targetId;n=new pk(N,T)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return sm.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?sm.min():t.readTime?Tk(t.readTime):sm.min()}(e);return this.listener.u_(t,n)}},{key:"c_",value:function(e){var t={};t.database=Mk(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Fg(r)?{documents:Bk(e,r)}:{query:Wk(e,r).ut}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ck(e,t.resumeToken);var i=Ek(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(sm.min())>0){n.readTime=Sk(e,t.snapshotVersion.toTimestamp());var a=Ek(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zv()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}},{key:"l_",value:function(e){var t={};t.database=Mk(this.serializer),t.removeTarget=e,this.t_(t)}}]),n}(Lx),Fx=function(e){g(n,e);var t=b(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.h_=!1,s}return m(n,[{key:"P_",get:function(){return this.h_}},{key:"start",value:function(){this.h_=!1,this.lastStreamToken=void 0,ff(w(n.prototype),"start",this).call(this)}},{key:"i_",value:function(){this.h_&&this.I_([])}},{key:"a_",value:function(e,t){return this.connection.Fo("Write",e,t)}},{key:"onMessage",value:function(e){if(Bv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();var t=function(e,t){return e&&e.length>0?(Bv(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Tk(e.updateTime):Tk(t);return n.isEqual(sm.min())&&(n=Tk(t)),new Ow(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Tk(e.commitTime);return this.listener.T_(n,t)}return Bv(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}},{key:"d_",value:function(){var e={};e.database=Mk(this.serializer),this.t_(e)}},{key:"I_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Vk(t.serializer,e)}))};this.t_(n)}}]),n}(Lx),jx=function(e){g(n,e);var t=b(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.A_=!1,o}return m(n,[{key:"R_",value:function(){if(this.A_)throw new Gv(Kv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"So",value:function(e,t,n,r){var i=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=f(a,2),u=o[0],s=o[1];return i.connection.So(e,Dk(t,n),r,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Kv.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Gv(Kv.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r,i){var a=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var u=f(o,2),s=u[0],c=u[1];return a.connection.vo(e,Dk(t,n),r,s,c,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Kv.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new Gv(Kv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.A_=!0,this.connection.terminate()}}]),n}(m((function e(){h(this,e)})));var Ux=function(){function e(t,n){h(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}return m(e,[{key:"p_",value:function(){var e=this;0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.f_=null,e.w_("Backend didn't respond within 10 seconds."),e.y_("Offline"),Promise.resolve()})))}},{key:"S_",value:function(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}},{key:"set",value:function(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}},{key:"y_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"w_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Uv(t),this.g_=!1):jv("OnlineStateTracker",t)}},{key:"b_",value:function(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}]),e}(),qx=m((function e(t,n,r,i,a){var o=this;h(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=a,this.M_.io((function(e){r.enqueueAndForget(S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Xx(o),!e.t0){e.next=5;break}return jv("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=S(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Wv(t)).v_.add(4),e.next=4,Bx(n);case 4:return n.x_.set("Unknown"),n.v_.delete(4),e.next=8,Vx(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.x_=new Ux(r,i)}));function Vx(e){return zx.apply(this,arguments)}function zx(){return(zx=S(x().mark((function e(t){var n,r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xx(t)){e.next=18;break}n=D(t.F_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function Bx(e){return Wx.apply(this,arguments)}function Wx(){return(Wx=S(x().mark((function e(t){var n,r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=D(t.F_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function Kx(e,t){var n=Wv(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),$x(n)?Yx(n):CE(n).Jo()&&Qx(n,t))}function Gx(e,t){var n=Wv(e),r=CE(n);n.C_.delete(t),r.Jo()&&Hx(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Xx(n)&&n.x_.set("Unknown"))}function Qx(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(sm.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}CE(e).c_(t)}function Hx(e,t){e.O_.Oe(t),CE(e).l_(t)}function Yx(e){e.O_=new yk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},_t:function(t){return e.C_.get(t)||null},nt:function(){return e.datastore.serializer.databaseId}}),CE(e).start(),e.x_.p_()}function $x(e){return Xx(e)&&!CE(e).Ho()&&e.C_.size>0}function Xx(e){return 0===Wv(e).v_.size}function Jx(e){e.O_=void 0}function Zx(e){return eE.apply(this,arguments)}function eE(){return(eE=S(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.C_.forEach((function(e,n){Qx(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tE(e,t){return nE.apply(this,arguments)}function nE(){return(nE=S(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jx(t),$x(t)?(t.x_.S_(n),Yx(t)):t.x_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rE(e,t,n){return iE.apply(this,arguments)}function iE(){return iE=S(x().mark((function e(t,n,r){var i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.x_.set("Online"),!(n instanceof vk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=S(x().mark((function e(t,n){var r,i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=D(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.C_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.C_.delete(o),t.O_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),jv("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,aE(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof dk?t.O_.$e(n):n instanceof pk?t.O_.Je(n):t.O_.Ge(n),r.isEqual(sm.min())){e.next=29;break}return e.prev=14,e.next=17,Jb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.O_.it(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.C_.get(t);if(r){e.C_.set(t,r.withResumeToken(Ny.EMPTY_BYTE_STRING,r.snapshotVersion)),Hx(e,t);var i=new t_(r.target,t,n,r.sequenceNumber);Qx(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),jv("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,aE(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),iE.apply(this,arguments)}function aE(e,t,n){return oE.apply(this,arguments)}function oE(){return(oE=S(x().mark((function e(t,n,r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pm(n)){e.next=2;break}throw n;case 2:return t.v_.add(1),e.next=5,Bx(t);case 5:t.x_.set("Offline"),r||(r=function(){return Jb(t.localStore)}),t.asyncQueue.enqueueRetryable(S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jv("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.v_.delete(1),e.next=6,Vx(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uE(e,t){return t().catch((function(n){return aE(e,n,t)}))}function sE(e){return cE.apply(this,arguments)}function cE(){return cE=S(x().mark((function e(t){var n,r,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Wv(t),r=IE(n),i=n.D_.length>0?n.D_[n.D_.length-1].batchId:-1;case 2:if(!lE(n)){e.next=19;break}return e.prev=3,e.next=6,tx(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.D_.length&&r.Xo(),e.abrupt("break",19);case 10:i=a.batchId,fE(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,aE(n,e.t0);case 17:e.next=2;break;case 19:hE(n)&&dE(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),cE.apply(this,arguments)}function lE(e){return Xx(e)&&e.D_.length<10}function fE(e,t){e.D_.push(t);var n=IE(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function hE(e){return Xx(e)&&!IE(e).Ho()&&e.D_.length>0}function dE(e){IE(e).start()}function pE(e){return vE.apply(this,arguments)}function vE(){return(vE=S(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:IE(t).d_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mE(e){return yE.apply(this,arguments)}function yE(){return(yE=S(x().mark((function e(t){var n,r,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=IE(t),r=D(t.D_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.I_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gE(e,t,n){return wE.apply(this,arguments)}function wE(){return wE=S(x().mark((function e(t,n,r){var i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.D_.shift(),a=Zw.from(i,n,r),e.next=3,uE(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,sE(t);case 5:case"end":return e.stop()}}),e)}))),wE.apply(this,arguments)}function kE(e,t){return _E.apply(this,arguments)}function _E(){return _E=S(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&IE(t).P_,!e.t0){e.next=4;break}return e.next=4,function(){var e=S(x().mark((function e(t,n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return nk(e)&&e!==Kv.ABORTED}(n.code)){e.next=7;break}return r=t.D_.shift(),IE(t).Zo(),e.next=5,uE(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,sE(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:hE(t)&&dE(t);case 5:case"end":return e.stop()}}),e)}))),_E.apply(this,arguments)}function bE(e,t){return xE.apply(this,arguments)}function xE(){return xE=S(x().mark((function e(t,n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Wv(t)).asyncQueue.verifyOperationInProgress(),jv("RemoteStore","RemoteStore received new credentials"),i=Xx(r),r.v_.add(3),e.next=6,Bx(r);case 6:return i&&r.x_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.v_.delete(3),e.next=12,Vx(r);case 12:case"end":return e.stop()}}),e)}))),xE.apply(this,arguments)}function EE(e,t){return SE.apply(this,arguments)}function SE(){return(SE=S(x().mark((function e(t,n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Wv(t),!n){e.next=7;break}return r.v_.delete(2),e.next=5,Vx(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.v_.add(2),e.next=12,Bx(r);case 12:r.x_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CE(e){return e.N_||(e.N_=function(e,t,n){var r=Wv(e);return r.R_(),new Mx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Zx.bind(null,e),To:tE.bind(null,e),u_:rE.bind(null,e)}),e.F_.push(function(){var t=S(x().mark((function t(n){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.N_.Zo(),$x(e)?Yx(e):e.x_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.N_.stop();case 6:Jx(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.N_}function IE(e){return e.B_||(e.B_=function(e,t,n){var r=Wv(e);return r.R_(),new Fx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:pE.bind(null,e),To:kE.bind(null,e),E_:mE.bind(null,e),T_:gE.bind(null,e)}),e.F_.push(function(){var t=S(x().mark((function t(n){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.B_.Zo(),t.next=4,sE(e);case 4:t.next=9;break;case 6:return t.next=8,e.B_.stop();case 8:e.D_.length>0&&(jv("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.B_}var TE=function(){function e(t,n,r,i,a){h(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return m(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gv(Kv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function NE(e,t){if(Uv("AsyncQueue","".concat(t,": ").concat(e)),Pm(e))return new Gv(Kv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var DE=function(){function e(t){h(this,e),this.comparator=t?function(e,n){return t(e,n)||dm.comparator(e.key,n.key)}:function(e,t){return dm.comparator(e.key,t.key)},this.keyedMap=sw(),this.sortedSet=new _y(this.comparator)}return m(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),AE=function(){function e(){h(this,e),this.L_=new _y(dm.comparator)}return m(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):zv():this.L_=this.L_.insert(t,e)}},{key:"k_",value:function(){var e=[];return this.L_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),PE=function(){function e(t,n,r,i,a,o,u,s,c){h(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return m(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,DE.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),RE=m((function e(){h(this,e),this.q_=void 0,this.Q_=[]})),OE=m((function e(){h(this,e),this.queries=new iw((function(e){return Jg(e)}),Xg),this.onlineState="Unknown",this.K_=new Set}));function LE(e,t){return ME.apply(this,arguments)}function ME(){return ME=S(x().mark((function e(t,n){var r,i,a,o,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Wv(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new RE),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.q_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=NE(e.t0,"Initialization of query '".concat(Zg(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.Q_.push(n),n.U_(r.onlineState),o.q_&&n.W_(o.q_)&&VE(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),ME.apply(this,arguments)}function FE(e,t){return jE.apply(this,arguments)}function jE(){return jE=S(x().mark((function e(t,n){var r,i,a,o,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Wv(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.Q_.indexOf(n))>=0&&(o.Q_.splice(u,1),a=0===o.Q_.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),jE.apply(this,arguments)}function UE(e,t){var n,r=Wv(e),i=!1,a=D(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=D(s.Q_);try{for(l.s();!(c=l.n()).done;){c.value.W_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.q_=o}}}catch(f){a.e(f)}finally{a.f()}i&&VE(r)}function qE(e,t,n){var r=Wv(e),i=r.queries.get(t);if(i){var a,o=D(i.Q_);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function VE(e){e.K_.forEach((function(e){e.next()}))}var zE=function(){function e(t,n,r){h(this,e),this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}return m(e,[{key:"W_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=D(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new PE(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.z_?this.H_(e)&&(this.G_.next(e),a=!0):this.J_(e,this.onlineState)&&(this.Y_(e),a=!0),this.j_=e,a}},{key:"onError",value:function(e){this.G_.error(e)}},{key:"U_",value:function(e){this.onlineState=e;var t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}},{key:"J_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"H_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Y_",value:function(e){e=PE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}]),e}(),BE=function(){function e(t,n){h(this,e),this.X_=t,this.byteLength=n}return m(e,[{key:"ea",value:function(){return"metadata"in this.X_}}]),e}(),WE=function(){function e(t){h(this,e),this.serializer=t}return m(e,[{key:"Ps",value:function(e){return Rk(this.serializer,e)}},{key:"Is",value:function(e){return e.metadata.exists?Uk(this.serializer,e.document,!1):sg.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}},{key:"Ts",value:function(e){return Tk(e)}}]),e}(),KE=function(){function e(t,n,r){h(this,e),this.ta=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GE(t)}return m(e,[{key:"na",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;var n=lm.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ra",value:function(e){var t,n=new Map,r=new WE(this.serializer),i=D(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ps(a.metadata.name),s=D(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||vw()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=S(x().mark((function e(){var t,n,r,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cx(this.localStore,new WE(this.serializer),this.documents,this.ta.id);case 2:t=e.sent,n=this.ra(this.documents),r=D(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,fx(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function GE(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var QE=m((function e(t){h(this,e),this.key=t})),HE=m((function e(t){h(this,e),this.key=t})),YE=function(){function e(t,n){h(this,e),this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=vw(),this.mutatedKeys=vw(),this.ua=nw(t),this.ca=new DE(this.ua)}return m(e,[{key:"la",get:function(){return this.oa}},{key:"ha",value:function(e,t){var n=this,r=t?t.Pa:new AE,i=t?t.ca:this.ca,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=ew(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Ia(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.ua(f,s)>0||c&&n.ua(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,Xi:u,mutatedKeys:a}}},{key:"Ia",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n,r){var i=this,a=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;var o=e.Pa.k_();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zv()}};return n(e)-n(t)}(e.type,t.type)||i.ua(e.doc,t.doc)})),this.Ta(n),r=null!=r&&r;var u=t&&!r?this.Ea():[],s=0===this.aa.size&&this.current&&!r?1:0,c=s!==this._a;return this._a=s,0!==o.length||c?{snapshot:new PE(this.query,e.ca,a,o,e.mutatedKeys,0===s,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:u}:{da:u}}},{key:"U_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new AE,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}},{key:"Aa",value:function(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}},{key:"Ta",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.oa=t.oa.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.oa=t.oa.delete(e)})),this.current=e.current)}},{key:"Ea",value:function(){var e=this;if(!this.current)return[];var t=this.aa;this.aa=vw(),this.ca.forEach((function(t){e.Aa(t.key)&&(e.aa=e.aa.add(t.key))}));var n=[];return t.forEach((function(t){e.aa.has(t)||n.push(new HE(t))})),this.aa.forEach((function(e){t.has(e)||n.push(new QE(e))})),n}},{key:"Ra",value:function(e){this.oa=e.hs,this.aa=vw();var t=this.ha(e.documents);return this.applyChanges(t,!0)}},{key:"Va",value:function(){return PE.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}]),e}(),$E=m((function e(t,n,r){h(this,e),this.query=t,this.targetId=n,this.view=r})),XE=m((function e(t){h(this,e),this.key=t,this.ma=!1})),JE=function(){function e(t,n,r,i,a,o){h(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new iw((function(e){return Jg(e)}),Xg),this.pa=new Map,this.ya=new Set,this.wa=new _y(dm.comparator),this.Sa=new Map,this.ba=new Tb,this.Da={},this.Ca=new Map,this.va=rb.Bn(),this.onlineState="Unknown",this.Fa=void 0}return m(e,[{key:"isPrimaryClient",get:function(){return!0===this.Fa}}]),e}();function ZE(e,t){return eS.apply(this,arguments)}function eS(){return eS=S(x().mark((function e(t,n){var r,i,a,o,u,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=GS(t),!(o=r.ga.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Va(),e.next=15;break;case 6:return e.next=8,nx(r.localStore,Qg(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,tS(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&Kx(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),eS.apply(this,arguments)}function tS(e,t,n,r,i){return nS.apply(this,arguments)}function nS(){return nS=S(x().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ma=function(e,n,r){return function(){var e=S(x().mark((function e(t,n,r,i){var a,o,u,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ha(r),e.t0=a.Xi,!e.t0){e.next=6;break}return e.next=5,ax(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ha(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=i&&null!=i.targetMismatches.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o,u),e.abrupt("return",(bS(t,n.targetId,s.da),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ax(t.localStore,n,!0);case 3:return o=e.sent,u=new YE(n,o.hs),s=u.ha(o.documents),c=hk.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),bS(t,r,l.da),f=new $E(n,r,u),e.abrupt("return",(t.ga.set(n,f),t.pa.has(r)?t.pa.get(r).push(n):t.pa.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),nS.apply(this,arguments)}function rS(e,t){return iS.apply(this,arguments)}function iS(){return iS=S(x().mark((function e(t,n){var r,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Wv(t),i=r.ga.get(n),!((a=r.pa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.pa.set(i.targetId,a.filter((function(e){return!Xg(e,n)}))),void r.ga.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,rx(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Gx(r.remoteStore,i.targetId),kS(r,i.targetId)})).catch(Sm);case 9:e.next=14;break;case 11:return kS(r,i.targetId),e.next=14,rx(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),iS.apply(this,arguments)}function aS(e,t,n){return oS.apply(this,arguments)}function oS(){return oS=S(x().mark((function e(t,n,r){var i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=QS(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Wv(e),a=um.now(),o=t.reduce((function(e,t){return e.add(t.key)}),vw());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=ow(),s=vw();return i.os.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=D(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Vw(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Ww(c.key,l,ug(l.value.mapValue),Lw.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:cw(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Da[e.currentUser.toKey()];r||(r=new _y(im)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,SS(i,a.changes);case 9:return e.next=11,sE(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=NE(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),oS.apply(this,arguments)}function uS(e,t){return sS.apply(this,arguments)}function sS(){return sS=S(x().mark((function e(t,n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wv(t),e.prev=1,e.next=4,Zb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Sa.get(t);n&&(Bv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ma=!0:e.modifiedDocuments.size>0?Bv(n.ma):e.removedDocuments.size>0&&(Bv(n.ma),n.ma=!1))})),e.next=8,SS(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Sm(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),sS.apply(this,arguments)}function cS(e,t,n){var r=Wv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ga.forEach((function(e,n){var r=n.view.U_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Wv(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=D(n.Q_);try{for(a.s();!(i=a.n()).done;){i.value.U_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&VE(n)}(r.eventManager,t),i.length&&r.fa.u_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function lS(e,t,n){return fS.apply(this,arguments)}function fS(){return fS=S(x().mark((function e(t,n,r){var i,a,o,u,s,c;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Wv(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Sa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new _y(dm.comparator)).insert(o,sg.newNoDocument(o,sm.min())),s=vw().add(o),c=new fk(sm.min(),new Map,new _y(im),u,s),e.next=9,uS(i,c);case 9:i.wa=i.wa.remove(o),i.Sa.delete(n),ES(i),e.next=16;break;case 14:return e.next=16,rx(i.localStore,n,!1).then((function(){return kS(i,n,r)})).catch(Sm);case 16:case"end":return e.stop()}}),e)}))),fS.apply(this,arguments)}function hS(e,t){return dS.apply(this,arguments)}function dS(){return dS=S(x().mark((function e(t,n){var r,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wv(t),i=n.batch.batchId,e.prev=1,e.next=4,Xb(r.localStore,n);case 4:return a=e.sent,wS(r,i,null),gS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,SS(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),dS.apply(this,arguments)}function pS(e,t,n){return vS.apply(this,arguments)}function vS(){return vS=S(x().mark((function e(t,n,r){var i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wv(t),e.prev=1,e.next=4,function(e,t){var n=Wv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Bv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,wS(i,n,r),gS(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,SS(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),vS.apply(this,arguments)}function mS(e,t){return yS.apply(this,arguments)}function yS(){return yS=S(x().mark((function e(t,n){var r,i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xx((r=Wv(t)).remoteStore)||jv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Wv(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ca.get(i)||[]).push(n),r.Ca.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=NE(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),yS.apply(this,arguments)}function gS(e,t){(e.Ca.get(t)||[]).forEach((function(e){e.resolve()})),e.Ca.delete(t)}function wS(e,t,n){var r=Wv(e),i=r.Da[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function kS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=D(e.pa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ga.delete(a),n&&e.fa.xa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((function(t){e.ba.containsKey(t)||_S(e,t)}))}function _S(e,t){e.ya.delete(t.path.canonicalString());var n=e.wa.get(t);null!==n&&(Gx(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),ES(e))}function bS(e,t,n){var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof QE?(e.ba.addReference(a.key,t),xS(e,a)):a instanceof HE?(jv("SyncEngine","Document no longer in limbo: "+a.key),e.ba.removeReference(a.key,t),e.ba.containsKey(a.key)||_S(e,a.key)):zv()}}catch(o){i.e(o)}finally{i.f()}}function xS(e,t){var n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(jv("SyncEngine","New document in limbo: "+n),e.ya.add(r),ES(e))}function ES(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){var t=e.ya.values().next().value;e.ya.delete(t);var n=new dm(lm.fromString(t)),r=e.va.next();e.Sa.set(r,new XE(n)),e.wa=e.wa.insert(n,r),Kx(e.remoteStore,new t_(Qg(Bg(n.path)),r,"TargetPurposeLimboResolution",Um._e))}}function SS(e,t,n){return CS.apply(this,arguments)}function CS(){return CS=S(x().mark((function e(t,n,r){var i,a,o,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Wv(t),a=[],o=[],u=[],e.t0=i.ga.isEmpty(),e.t0){e.next=9;break}return i.ga.forEach((function(e,t){u.push(i.Ma(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Wb.Ki(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.fa.u_(a),e.next=9,function(){var e=S(x().mark((function e(t,n){var r,i,a,o,u,s,c,l;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wv(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Im.forEach(n,(function(t){return Im.forEach(t.qi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Im.forEach(t.Qi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Pm(e.t0)){e.next=10;break}throw e.t0;case 10:jv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=D(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ns.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ns=r.ns.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),CS.apply(this,arguments)}function IS(e,t){return TS.apply(this,arguments)}function TS(){return(TS=S(x().mark((function e(t,n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Wv(t)).currentUser.isEqual(n)){e.next=11;break}return jv("SyncEngine","User change. New user:",n.toKey()),e.next=5,Yb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ca.forEach((function(e){e.forEach((function(e){e.reject(new Gv(Kv.CANCELLED,t))}))})),e.Ca.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,SS(r,i.us);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NS(e,t){var n=Wv(e),r=n.Sa.get(t);if(r&&r.ma)return vw().add(r.key);var i=vw(),a=n.pa.get(t);if(!a)return i;var o,u=D(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ga.get(s);i=i.unionWith(c.view.la)}}catch(l){u.e(l)}finally{u.f()}return i}function DS(e,t){return AS.apply(this,arguments)}function AS(){return AS=S(x().mark((function e(t,n){var r,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wv(t),e.next=3,ax(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ra(i),e.abrupt("return",(r.isPrimaryClient&&bS(r,n.targetId,a.da),a));case 6:case"end":return e.stop()}}),e)}))),AS.apply(this,arguments)}function PS(e,t){return RS.apply(this,arguments)}function RS(){return(RS=S(x().mark((function e(t,n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wv(t),e.abrupt("return",ux(r.localStore,n).then((function(e){return SS(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function OS(e,t,n,r){return LS.apply(this,arguments)}function LS(){return LS=S(x().mark((function e(t,n,r,i){var a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Wv(t),e.next=3,function(e,t){var n=Wv(e),r=Wv(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.vn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Im.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,sE(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(wS(a,n,i||null),gS(a,n),function(e,t){Wv(Wv(e).mutationQueue).Mn(t)}(a.localStore,n)):zv();case 11:return e.next=13,SS(a,o);case 13:e.next=16;break;case 15:jv("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),LS.apply(this,arguments)}function MS(e,t){return FS.apply(this,arguments)}function FS(){return(FS=S(x().mark((function e(t,n){var r,i,a,o,u,s,c,l;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GS(r=Wv(t)),QS(r),!0!==n||!0===r.Fa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,jS(r,i.toArray());case 5:return a=e.sent,r.Fa=!0,e.next=9,EE(r.remoteStore,!0);case 9:o=D(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Kx(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Fa){e.next=25;break}return c=[],l=Promise.resolve(),r.pa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return kS(r,t),rx(r.localStore,t,!0)})),Gx(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,jS(r,c);case 21:return function(e){var t=Wv(e);t.Sa.forEach((function(e,n){Gx(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new _y(dm.comparator)}(r),r.Fa=!1,e.next=25,EE(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jS(e,t,n){return US.apply(this,arguments)}function US(){return US=S(x().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Wv(t),a=[],o=[],u=D(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.pa.get(c))||0===f.length){e.next=34;break}return e.next=11,nx(i.localStore,Qg(f[0]));case 11:l=e.sent,h=D(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ga.get(p),e.next=20,DS(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,ox(i.localStore,c);case 36:return y=e.sent,e.next=39,nx(i.localStore,y);case 39:return l=e.sent,e.next=42,tS(i,qS(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.fa.u_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),US.apply(this,arguments)}function qS(e){return zg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function VS(e){return function(e){return Wv(Wv(e).persistence).Li()}(Wv(e).localStore)}function zS(e,t,n,r){return BS.apply(this,arguments)}function BS(){return BS=S(x().mark((function e(t,n,r,i){var a,o,u,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Wv(t)).Fa){e.next=3;break}return e.abrupt("return",void jv("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.pa.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,ux(a.localStore,tw(o[0]));case 10:return u=e.sent,s=fk.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Ny.EMPTY_BYTE_STRING),e.next=14,SS(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,rx(a.localStore,n,!0);case 17:return kS(a,n,i),e.abrupt("break",20);case 19:zv();case 20:case"end":return e.stop()}}),e)}))),BS.apply(this,arguments)}function WS(e,t,n){return KS.apply(this,arguments)}function KS(){return KS=S(x().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=GS(t)).Fa){e.next=45;break}a=D(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.pa.has(u)){e.next=10;break}return jv("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,ox(i.localStore,u);case 12:return s=e.sent,e.next=15,nx(i.localStore,s);case 15:return c=e.sent,e.next=18,tS(i,qS(s),c.targetId,!1,c.resumeToken);case 18:Kx(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=D(r),e.prev=30,h=x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.pa.has(t),!e.t0){e.next=5;break}return e.next=5,rx(i.localStore,t,!1).then((function(){Gx(i.remoteStore,t),kS(i,t)})).catch(Sm);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),KS.apply(this,arguments)}function GS(e){var t=Wv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=uS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lS.bind(null,t),t.fa.u_=UE.bind(null,t.eventManager),t.fa.xa=qE.bind(null,t.eventManager),t}function QS(e){var t=Wv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pS.bind(null,t),t}function HS(e,t,n){var r=Wv(e);(function(){var e=S(x().mark((function e(t,n,r){var i,a,o,u,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Wv(e),r=Tk(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.$r.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(GE(i)),a=new KE(i,t.localStore,n.serializer),e.next=15,n.Oa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.na(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Oa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,SS(t,s.sa,void 0);case 31:return e.next=33,function(e,t){var n=Wv(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.$r.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.ia));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(qv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var YS=function(){function e(){h(this,e),this.synchronizeTabs=!1}return m(e,[{key:"initialize",value:function(){var e=S(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Rx(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Hb(this.persistence,new Gb,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Ob(Mb.Hr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new bx}},{key:"terminate",value:function(){var e=S(x().mark((function e(){var t,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(n=this.indexBackfillerScheduler)||void 0===n||n.stop(),this.sharedClientState.shutdown(),e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),$S=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).Na=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return m(n,[{key:"initialize",value:function(){var e=S(x().mark((function e(t){var r=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ff(w(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Na.initialize(this,t);case 4:return e.next=6,QS(this.Na.syncEngine);case 6:return e.next=8,sE(this.Na.remoteStore);case 8:return e.next=10,this.persistence.fi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Hb(this.persistence,new Gb,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new lb(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new jm(t,this.persistence);return new Fm(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Bb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Y_.withCacheSize(this.cacheSizeBytes):Y_.DEFAULT;return new qb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ax(),Px(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new bx}}]),n}(YS),XS=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r,!1)).Na=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return m(n,[{key:"initialize",value:function(){var e=S(x().mark((function e(t){var r,i=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ff(w(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Na.syncEngine,e.t0=this.sharedClientState instanceof _x,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Zs:OS.bind(null,r),Xs:zS.bind(null,r),eo:WS.bind(null,r),Li:VS.bind(null,r),Ys:PS.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.fi(function(){var e=S(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MS(i.Na.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Ax();if(!_x.D(t))throw new Gv(Kv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Bb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _x(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}($S),JS=function(){function e(){h(this,e)}return m(e,[{key:"initialize",value:function(){var e=S(x().mark((function e(t,n){var r=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return cS(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=IS.bind(null,this.syncEngine),e.next=12,EE(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new OE}},{key:"createDatastore",value:function(e){var t=Rx(e.databaseInfo.databaseId),n=function(e){return new Dx(e)}(e.databaseInfo);return function(e,t,n,r){return new jx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new qx(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return cS(t.syncEngine,e,0)}),Ex.D()?new Ex:new xx)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new JE(e,t,n,r,i,a);return o&&(u.Fa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){var e=S(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=S(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Wv(t),jv("RemoteStore","RemoteStore shutting down."),n.v_.add(5),e.next=5,Bx(n);case 5:n.M_.shutdown(),n.x_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore);case 2:null===(t=this.datastore)||void 0===t||t.terminate();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ZS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return S(x().mark((function r(){var i;return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var eC=function(){function e(t){h(this,e),this.observer=t,this.muted=!1}return m(e,[{key:"next",value:function(e){this.observer.next&&this.Ba(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ba(this.observer.error,e):Uv("Uncaught Error in snapshot listener:",e.toString())}},{key:"La",value:function(){this.muted=!0}},{key:"Ba",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),tC=function(){function e(t,n){var r=this;h(this,e),this.ka=t,this.serializer=n,this.metadata=new Qv,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((function(e){e&&e.ea()?r.metadata.resolve(e.X_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(function(e){return r.metadata.reject(e)}))}return m(e,[{key:"close",value:function(){return this.ka.cancel()}},{key:"getMetadata",value:function(){var e=S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oa",value:function(){var e=S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Qa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qa",value:function(){var e=S(x().mark((function e(){var t,n,r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ka();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.qa.decode(t),r=Number(n),isNaN(r)&&this.$a("length string (".concat(n,") is not valid number")),e.next=9,this.Ua(r);case 9:return i=e.sent,e.abrupt("return",new BE(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ka",value:function(){var e=S(x().mark((function e(){var t,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Wa()<0)){e.next=7;break}return e.next=3,this.Ga();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Wa())<0&&this.$a("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ua",value:function(){var e=S(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ga();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.$a("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.qa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$a",value:function(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ga",value:function(){var e=S(x().mark((function e(){var t,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ka.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),nC=function(){function e(t){h(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}return m(e,[{key:"lookup",value:function(){var e=S(x().mark((function e(t){var n,r=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw this.lastTransactionError=new Gv(Kv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;case 2:return e.next=4,function(){var e=S(x().mark((function e(t,n){var r,i,a,o,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wv(t),i={documents:n.map((function(e){return Pk(r.serializer,e)}))},e.next=4,r.vo("BatchGetDocuments",r.serializer.databaseId,lm.emptyPath(),i,n.length);case 4:return a=e.sent,o=new Map,a.forEach((function(e){var t=qk(r.serializer,e);o.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=o.get(e.toString());Bv(!!t),u.push(t)})),u));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new $w(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=S(x().mark((function e(){var t,n=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastTransactionError){e.next=2;break}throw this.lastTransactionError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=dm.fromPath(t);n.mutations.push(new Xw(r,n.precondition(r)))})),e.next=7,function(){var e=S(x().mark((function e(t,n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wv(t),i={writes:n.map((function(e){return Vk(r.serializer,e)}))},e.next=3,r.So("Commit",r.serializer.databaseId,lm.emptyPath(),i);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zv();t=sm.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Gv(Kv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(sm.min())?Lw.exists(!1):Lw.updateTime(t):Lw.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(sm.min()))throw new Gv(Kv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lw.updateTime(t)}return Lw.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),rC=function(){function e(t,n,r,i,a){h(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.za=r.maxAttempts,this.jo=new Ox(this.asyncQueue,"transaction_retry")}return m(e,[{key:"ja",value:function(){this.za-=1,this.Ha()}},{key:"Ha",value:function(){var e=this;this.jo.qo(S(x().mark((function t(){var n,r;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new nC(e.datastore),(r=e.Ja(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ya(t)}))}))})).catch((function(t){e.Ya(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ja",value:function(e){try{var t=this.updateFunction(e);return!qm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ya",value:function(e){var t=this;this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((function(){return t.Ha(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Za",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!nk(t)}return!1}}]),e}(),iC=function(){function e(t,n,r,i){var a=this;h(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ov.UNAUTHENTICATED,this.clientId=rm.newId(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=S(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jv("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return jv("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return m(e,[{key:"configuration",get:function(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Gv(Kv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Qv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(S(x().mark((function n(){var r;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=NE(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function aC(e,t){return oC.apply(this,arguments)}function oC(){return oC=S(x().mark((function e(t,n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),jv("FirestoreClient","Initializing OfflineComponentProvider"),r=t.configuration,e.next=4,n.initialize(r);case 4:i=r.initialUser,t.setCredentialChangeListener(function(){var e=S(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Yb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 6:case"end":return e.stop()}}),e)}))),oC.apply(this,arguments)}function uC(e,t){return sC.apply(this,arguments)}function sC(){return(sC=S(x().mark((function e(t,n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,lC(t);case 3:return r=e.sent,jv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,n.initialize(r,t.configuration);case 7:t.setCredentialChangeListener((function(e){return bE(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return bE(n.remoteStore,t)})),t._onlineComponents=n;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cC(e){return"FirebaseError"===e.name?e.code===Kv.FAILED_PRECONDITION||e.code===Kv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function lC(e){return fC.apply(this,arguments)}function fC(){return(fC=S(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return jv("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,aC(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),cC(n=e.t0)){e.next=13;break}throw n;case 13:return qv("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,aC(t,new YS);case 16:e.next=21;break;case 18:return jv("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,aC(t,new YS);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function hC(e){return dC.apply(this,arguments)}function dC(){return(dC=S(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return jv("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,uC(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return jv("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,uC(t,new JS);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pC(e){return lC(e).then((function(e){return e.persistence}))}function vC(e){return lC(e).then((function(e){return e.localStore}))}function mC(e){return hC(e).then((function(e){return e.remoteStore}))}function yC(e){return hC(e).then((function(e){return e.syncEngine}))}function gC(e){return hC(e).then((function(e){return e.datastore}))}function wC(e){return kC.apply(this,arguments)}function kC(){return(kC=S(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hC(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=ZE.bind(null,n.syncEngine),r.onUnlisten=rS.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qv;return e.asyncQueue.enqueueAndForget(S(x().mark((function i(){return x().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new eC({next:function(a){t.enqueueAndForget((function(){return FE(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Gv(Kv.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Gv(Kv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new zE(Bg(n.path),a,{includeMetadataChanges:!0,Z_:!0});return LE(e,o)},i.next=3,wC(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function bC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qv;return e.asyncQueue.enqueueAndForget(S(x().mark((function i(){return x().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new eC({next:function(n){t.enqueueAndForget((function(){return FE(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Gv(Kv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new zE(n,a,{includeMetadataChanges:!0,Z_:!0});return LE(e,o)},i.next=3,wC(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function xC(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var EC=new Map;function SC(e,t,n){if(!n)throw new Gv(Kv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function CC(e,t,n,r){if(!0===t&&!0===r)throw new Gv(Kv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function IC(e){if(!dm.isDocumentKey(e))throw new Gv(Kv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function TC(e){if(dm.isDocumentKey(e))throw new Gv(Kv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function NC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":zv()}function DC(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Gv(Kv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=NC(e);throw new Gv(Kv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function AC(e,t){if(t<=0)throw new Gv(Kv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var PC=function(){function e(t){var n,r;if(h(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Gv(Kv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Gv(Kv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}CC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xC(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Gv(Kv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Gv(Kv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Gv(Kv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return m(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),RC=function(){function e(t,n,r,i){h(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PC({}),this._settingsFrozen=!1}return m(e,[{key:"app",get:function(){if(!this._app)throw new Gv(Kv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Gv(Kv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PC(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Yv;switch(e.type){case"firstParty":return new Zv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Gv(Kv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=EC.get(e);t&&(jv("ComponentProvider","Removing Datastore"),EC.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function OC(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=DC(e,RC))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&qv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=Ov.MOCK_USER;else{u=En(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Gv(Kv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Ov(c)}e._authCredentials=new $v(new Hv(u,s))}}var LC=function(){function e(t,n,r){h(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return m(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),MC=function(){function e(t,n,r){h(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return m(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new FC(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),FC=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,Bg(i)))._path=i,a.type="collection",a}return m(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new MC(this.firestore,null,new dm(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(LC);function jC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Xn(e),SC("collection","path",t),e instanceof RC){var a=lm.fromString.apply(lm,[t].concat(r));return TC(a),new FC(e,null,a)}if(!(e instanceof MC||e instanceof FC))throw new Gv(Kv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(lm.fromString.apply(lm,[t].concat(r)));return TC(o),new FC(e.firestore,null,o)}function UC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Xn(e),1===arguments.length&&(t=rm.newId()),SC("doc","path",t),e instanceof RC){var a=lm.fromString.apply(lm,[t].concat(r));return IC(a),new MC(e,null,new dm(a))}if(!(e instanceof MC||e instanceof FC))throw new Gv(Kv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(lm.fromString.apply(lm,[t].concat(r)));return IC(o),new MC(e.firestore,e instanceof FC?e.converter:null,new dm(o))}function qC(e,t){return e=Xn(e),t=Xn(t),(e instanceof MC||e instanceof FC)&&(t instanceof MC||t instanceof FC)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function VC(e,t){return e=Xn(e),t=Xn(t),e instanceof LC&&t instanceof LC&&e.firestore===t.firestore&&Xg(e._query,t._query)&&e.converter===t.converter}var zC=function(){function e(){var t=this;h(this,e),this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Ox(this,"async_queue_retry"),this._u=function(){var e=Px();e&&jv("AsyncQueue","Visibility state changed to "+e.visibilityState),t.jo.Ko()};var n=Px();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this._u)}return m(e,[{key:"isShuttingDown",get:function(){return this.tu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.au(),this.uu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.tu){this.tu=!0,this.su=e||!1;var t=Px();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}},{key:"enqueue",value:function(e){var t=this;if(this.au(),this.tu)return new Promise((function(){}));var n=new Qv;return this.uu((function(){return t.tu&&t.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.eu.push(e),t.cu()}))}},{key:"cu",value:function(){var e=S(x().mark((function e(){var t=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.eu.length){e.next=14;break}return e.prev=1,e.next=4,this.eu[0]();case 4:this.eu.shift(),this.jo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Pm(e.t0)){e.next=12;break}throw e.t0;case 12:jv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.eu.length>0&&this.jo.qo((function(){return t.cu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"uu",value:function(e){var t=this,n=this.Xa.then((function(){return t.iu=!0,e().catch((function(e){t.ru=e,t.iu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Uv("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.iu=!1,e}))}));return this.Xa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.au(),this.ou.indexOf(e)>-1&&(t=0);var i=TE.createAndSchedule(this,e,t,n,(function(e){return r.lu(e)}));return this.nu.push(i),i}},{key:"au",value:function(){this.ru&&zv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"hu",value:function(){var e=S(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Xa,e.next=3,t;case 3:if(t!==this.Xa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pu",value:function(e){var t,n=D(this.nu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Iu",value:function(e){var t=this;return this.hu().then((function(){t.nu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=D(t.nu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.hu()}))}},{key:"Tu",value:function(e){this.ou.push(e)}},{key:"lu",value:function(e){var t=this.nu.indexOf(e);this.nu.splice(t,1)}}]),e}();function BC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=D(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var WC=function(){function e(){h(this,e),this._progressObserver={},this._taskCompletionResolver=new Qv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return m(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),KC=function(e){g(n,e);var t=b(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new zC,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return m(n,[{key:"_terminate",value:function(){return this._firestoreClient||QC(this),this._firestoreClient.terminate()}}]),n}(RC);function GC(e){return e._firestoreClient||QC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function QC(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Fy(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,xC(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new iC(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function HC(e,t,n){var r=new Qv;return e.asyncQueue.enqueue(S(x().mark((function i(){var a;return x().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,aC(e,n);case 3:return i.next=5,uC(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),cC(a=i.t0)){i.next=13;break}throw a;case 13:qv("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function YC(e){return function(e){var t=new Qv;return e.asyncQueue.enqueueAndForget(S(x().mark((function n(){return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=mS,n.next=3,yC(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(GC(e=DC(e,KC)))}function $C(e){return function(e){return e.asyncQueue.enqueue(S(x().mark((function t(){var n,r;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pC(e);case 2:return n=t.sent,t.next=5,mC(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Wv(e);return t.v_.delete(0),Vx(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(GC(e=DC(e,KC)))}function XC(e){return function(e){return e.asyncQueue.enqueue(S(x().mark((function t(){var n,r;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pC(e);case 2:return n=t.sent,t.next=5,mC(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=S(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Wv(t)).v_.add(0),e.next=4,Bx(n);case 4:n.x_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(GC(e=DC(e,KC)))}function JC(e,t){var n=GC(e=DC(e,KC)),r=new WC;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new tC(e,t)}(function(e,t){if(e instanceof Uint8Array)return ZS(e,t);if(e instanceof ArrayBuffer)return ZS(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?ak().encode(e):e),t)}(n,Rx(t));e.asyncQueue.enqueueAndForget(S(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=HS,t.next=3,yC(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function ZC(e,t){return function(e,t){return e.asyncQueue.enqueue(S(x().mark((function n(){return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Wv(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.$r.getNamedQuery(e,t)}))},n.next=3,vC(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(GC(e=DC(e,KC)),t).then((function(t){return t?new LC(e,null,t.query):null}))}function eI(e){if(e._initialized||e._terminated)throw new Gv(Kv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var tI=function(){function e(t){h(this,e),this._byteString=t}return m(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ny.fromBase64String(t))}catch(t){throw new Gv(Kv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ny.fromUint8Array(t))}}]),e}(),nI=function(){function e(){h(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Gv(Kv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hm(n)}return m(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var rI=m((function e(t){h(this,e),this._methodName=t})),iI=function(){function e(t,n){if(h(this,e),!isFinite(t)||t<-90||t>90)throw new Gv(Kv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Gv(Kv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return m(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return im(this._lat,e._lat)||im(this._long,e._long)}}]),e}(),aI=/^__.*__$/,oI=function(){function e(t,n,r){h(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ww(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bw(e,this.data,t,this.fieldTransforms)}}]),e}(),uI=function(){function e(t,n,r){h(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return new Ww(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function sI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zv()}}var cI=function(){function e(t,n,r,i,a,o){h(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Eu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return m(e,[{key:"path",get:function(){return this.settings.path}},{key:"du",get:function(){return this.settings.du}},{key:"Au",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Ru",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}},{key:"fu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}},{key:"gu",value:function(e){return this.Au({path:void 0,Vu:!0})}},{key:"pu",value:function(e){return NI(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Eu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.mu(this.path.get(e))}},{key:"mu",value:function(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(sI(this.du)&&aI.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}]),e}(),lI=function(){function e(t,n,r){h(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Rx(t)}return m(e,[{key:"Su",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new cI({du:e,methodName:t,wu:n,path:hm.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function fI(e){var t=e._freezeSettings(),n=Rx(e._databaseId);return new lI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Su(a.merge||a.mergeFields?2:0,t,n,i);SI("Data must be an object, but it was:",o,r);var u,s,c=xI(r,o);if(a.merge)u=new Iy(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=D(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=CI(t,l.value,n);if(!o.contains(d))throw new Gv(Kv.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));DI(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Iy(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new oI(new og(c),u,s)}var dI=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(rI);function pI(e,t,n){return new cI({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var vI=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){return new Rw(e.path,new Sw)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(rI),mI=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).bu=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=pI(this,e,!0),n=this.bu.map((function(e){return bI(e,t)})),r=new Cw(n);return new Rw(e.path,r)}},{key:"isEqual",value:function(e){return e instanceof n&&qn(this.bu,e.bu)}}]),n}(rI),yI=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).bu=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=pI(this,e,!0),n=this.bu.map((function(e){return bI(e,t)})),r=new Tw(n);return new Rw(e.path,r)}},{key:"isEqual",value:function(e){return e instanceof n&&qn(this.bu,e.bu)}}]),n}(rI),gI=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).Du=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=new Dw(e.serializer,kw(e.serializer,this.Du));return new Rw(e.path,t)}},{key:"isEqual",value:function(e){return e instanceof n&&this.Du===e.Du}}]),n}(rI);function wI(e,t,n,r){var i=e.Su(1,t,n);SI("Data must be an object, but it was:",i,r);var a=[],o=og.empty();wy(r,(function(e,r){var u=TI(t,e,n);r=Xn(r);var s=i.fu(u);if(r instanceof dI)a.push(u);else{var c=bI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Iy(a);return new uI(o,u,i.fieldTransforms)}function kI(e,t,n,r,i,a){var o=e.Su(1,t,n),u=[CI(t,r,n)],s=[i];if(a.length%2!=0)throw new Gv(Kv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(CI(t,a[c])),s.push(a[c+1]);for(var l=[],f=og.empty(),h=u.length-1;h>=0;--h)if(!DI(l,u[h])){var d=u[h],p=s[h];p=Xn(p);var v=o.fu(d);if(p instanceof dI)l.push(d);else{var m=bI(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Iy(l);return new uI(f,y,o.fieldTransforms)}function _I(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return bI(n,e.Su(r?4:3,t))}function bI(e,t){if(EI(e=Xn(e)))return SI("Unsupported field value:",t,e),xI(e,t);if(e instanceof rI)return function(e,t){if(!sI(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=D(e);try{for(a.s();!(n=a.n()).done;){var o=bI(n.value,t.gu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Xn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=um.fromDate(e);return{timestampValue:Sk(t.serializer,n)}}if(e instanceof um){var r=new um(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Sk(t.serializer,r)}}if(e instanceof iI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof tI)return{bytesValue:Ck(t.serializer,e._byteString)};if(e instanceof MC){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.pu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Nk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(NC(e)))}(e,t)}function xI(e,t){var n={};return ky(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wy(e,(function(e,r){var i=bI(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function EI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof um||e instanceof iI||e instanceof tI||e instanceof MC||e instanceof rI)}function SI(e,t,n){if(!EI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=NC(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function CI(e,t,n){if((t=Xn(t))instanceof nI)return t._internalPath;if("string"==typeof t)return TI(e,t);throw NI("Field path arguments must be of type string or ",e,!1,void 0,n)}var II=new RegExp("[~\\*/\\[\\]]");function TI(e,t,n){if(t.search(II)>=0)throw NI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I(nI,A(t.split(".")))._internalPath}catch(Sf){throw NI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function NI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Gv(Kv.INVALID_ARGUMENT,u+e+s)}function DI(e,t){return e.some((function(e){return e.isEqual(t)}))}var AI=function(){function e(t,n,r,i,a){h(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return m(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new MC(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new PI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(RI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),PI=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){return ff(w(n.prototype),"data",this).call(this)}}]),n}(AI);function RI(e,t){return"string"==typeof t?TI(e,t):t instanceof nI?t._internalPath:t._delegate._internalPath}function OI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Gv(Kv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var LI=m((function e(){h(this,e)})),MI=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n)}(LI);function FI(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof LI&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof UI})).length,n=e.filter((function(e){return e instanceof jI})).length;if(t>1||t>0&&n>0)throw new Gv(Kv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=D(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var jI=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return m(n,[{key:"_apply",value:function(e){var t=this._parse(e);return XI(e._query,t),new LC(e.firestore,e.converter,Yg(e._query,t))}},{key:"_parse",value:function(e){var t=fI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Gv(Kv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){$I(o,a);var s,c=[],l=D(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(YI(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=YI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||$I(o,a),u=_I(n,t,o,"in"===a||"not-in"===a);return vg.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(MI);var UI=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return m(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:mg.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=D(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;XI(r,a),r=Yg(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new LC(e.firestore,e.converter,Yg(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(LI);var qI=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return m(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Gv(Kv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Gv(Kv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hg(t,n)}(e._query,this._field,this._direction);return new LC(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Vg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(MI);var VI=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return m(n,[{key:"_apply",value:function(e){return new LC(e.firestore,e.converter,$g(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(MI);var zI=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=HI(e,this.type,this._docOrFields,this._inclusive);return new LC(e.firestore,e.converter,function(e,t){return new Vg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(MI);function BI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zI._create("startAt",t,!0)}function WI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zI._create("startAfter",t,!1)}var KI=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=HI(e,this.type,this._docOrFields,this._inclusive);return new LC(e.firestore,e.converter,function(e,t){return new Vg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(MI);function GI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return KI._create("endBefore",t,!1)}function QI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return KI._create("endAt",t,!0)}function HI(e,t,n,r){if(n[0]=Xn(n[0]),n[0]instanceof AI)return function(e,t,n,r,i){if(!r)throw new Gv(Kv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=D(Gg(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Hy(t,r.key));else{var c=r.data.field(s.field);if(Oy(c))throw new Gv(Kv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Gv(Kv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new cg(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=fI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Gv(Kv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Gv(Kv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Kg(e)&&-1!==c.indexOf("/"))throw new Gv(Kv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(lm.fromString(c));if(!dm.isDocumentKey(l))throw new Gv(Kv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new dm(l);u.push(Hy(t,f))}else{var h=_I(n,r,c);u.push(h)}}return new cg(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function YI(e,t,n){if("string"==typeof(n=Xn(n))){if(""===n)throw new Gv(Kv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kg(t)&&-1!==n.indexOf("/"))throw new Gv(Kv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(lm.fromString(n));if(!dm.isDocumentKey(r))throw new Gv(Kv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Hy(e,new dm(r))}if(n instanceof MC)return Hy(e,n._key);throw new Gv(Kv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(NC(n),"."))}function $I(e,t){if(!Array.isArray(e)||0===e.length)throw new Gv(Kv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function XI(e,t){var n=function(e,t){var n,r=D(e);try{for(r.s();!(n=r.n()).done;){var i,a=D(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Gv(Kv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Gv(Kv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}var JI=function(){function e(){h(this,e)}return m(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Vy(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Py(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ry(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zv()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return wy(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new iI(Py(e.latitude),Py(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ly(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(My(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ay(e);return new um(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=lm.fromString(e);Bv(e_(n));var r=new jy(n.get(1),n.get(3)),i=new dm(n.popFirst(5));return r.isEqual(t)||Uv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function ZI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var eT=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new tI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new MC(this.firestore,null,t)}}]),n}(JI);var tT=function(){function e(t,n){h(this,e),this.hasPendingWrites=t,this.fromCache=n}return m(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),nT=function(e){g(n,e);var t=b(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return m(n,[{key:"exists",value:function(){return ff(w(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new rT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(RI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(AI),rT=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ff(w(n.prototype),"data",this).call(this,e)}}]),n}(nT),iT=function(){function e(t,n,r,i){h(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new tT(i.hasPendingWrites,i.fromCache),this.query=r}return m(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new rT(n._firestore,n._userDataWriter,r.key,r,new tT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Gv(Kv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new rT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new rT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:aT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function aT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zv()}}function oT(e,t){return e instanceof nT&&t instanceof nT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof iT&&t instanceof iT&&e._firestore===t._firestore&&VC(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var uT=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new tI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new MC(this.firestore,null,t)}}]),n}(JI);function sT(e){e=DC(e,MC);var t=DC(e.firestore,KC),n=GC(t),r=new uT(t);return function(e,t){var n=new Qv;return e.asyncQueue.enqueueAndForget(S(x().mark((function r(){return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=S(x().mark((function e(t,n,r){var i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Wv(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Gv(Kv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=NE(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,vC(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new nT(t,r,e._key,n,new tT(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function cT(e){e=DC(e,LC);var t=DC(e.firestore,KC),n=GC(t),r=new uT(t);return function(e,t){var n=new Qv;return e.asyncQueue.enqueueAndForget(S(x().mark((function r(){return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=S(x().mark((function e(t,n,r){var i,a,o,u,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ax(t,n,!0);case 3:i=e.sent,a=new YE(n,i.hs),o=a.ha(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=NE(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,vC(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new iT(t,r,e,n)}))}function lT(e,t,n){e=DC(e,MC);var r=DC(e.firestore,KC),i=ZI(e.converter,t,n);return pT(r,[hI(fI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Lw.none())])}function fT(e,t,n){e=DC(e,MC);for(var r=DC(e.firestore,KC),i=fI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return pT(r,[("string"==typeof(t=Xn(t))||t instanceof nI?kI(i,"updateDoc",e._key,t,n,o):wI(i,"updateDoc",e._key,t)).toMutation(e._key,Lw.exists(!0))])}function hT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Xn(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||BC(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(BC(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof MC)l=DC(e.firestore,KC),f=Bg(e._key.path),c={next:function(t){n[s]&&n[s](vT(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=DC(e,LC);l=DC(p.firestore,KC),f=p._query;var v=new uT(l);c={next:function(e){n[s]&&n[s](new iT(l,v,p,e))},error:n[s+1],complete:n[s+2]},OI(e._query)}return function(e,t,n,r){var i=new eC(r),a=new zE(t,i,n);return e.asyncQueue.enqueueAndForget(S(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=LE,t.next=3,wC(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.La(),e.asyncQueue.enqueueAndForget(S(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=FE,t.next=3,wC(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(GC(l),f,h,c)}function dT(e,t){return function(e,t){var n=new eC(t);return e.asyncQueue.enqueueAndForget(S(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Wv(e).K_.add(t),t.next()},t.next=3,wC(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.La(),e.asyncQueue.enqueueAndForget(S(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Wv(e).K_.delete(t)},t.next=3,wC(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(GC(e=DC(e,KC)),BC(t)?t:{next:t})}function pT(e,t){return function(e,t){var n=new Qv;return e.asyncQueue.enqueueAndForget(S(x().mark((function r(){return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=aS,r.next=3,yC(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(GC(e),t)}function vT(e,t,n){var r=n.docs.get(t._key),i=new uT(e);return new nT(e,i,t._key,r,new tT(n.hasPendingWrites,n.fromCache),t.converter)}var mT={maxAttempts:5},yT=function(){function e(t,n){h(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=fI(t)}return m(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=gT(e,this._firestore),i=ZI(r.converter,t,n),a=hI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Lw.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=gT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Xn(t))||t instanceof nI?kI(this._dataReader,"WriteBatch.update",i._key,t,n,o):wI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Lw.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=gT(e,this._firestore);return this._mutations=this._mutations.concat(new $w(t._key,Lw.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Gv(Kv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function gT(e,t){if((e=Xn(e)).firestore!==t)throw new Gv(Kv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var wT=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r))._firestore=e,i}return m(n,[{key:"get",value:function(e){var t=this,r=gT(e,this._firestore),i=new uT(this._firestore);return ff(w(n.prototype),"get",this).call(this,e).then((function(e){return new nT(t._firestore,i,r._key,e._document,new tT(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){h(this,e),this._firestore=t,this._transaction=n,this._dataReader=fI(t)}return m(e,[{key:"get",value:function(e){var t=this,n=gT(e,this._firestore),r=new eT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return zv();var i=e[0];if(i.isFoundDocument())return new AI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new AI(t._firestore,r,n._key,null,n.converter);throw zv()}))}},{key:"set",value:function(e,t,n){var r=gT(e,this._firestore),i=ZI(r.converter,t,n),a=hI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=gT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Xn(t))||t instanceof nI?kI(this._dataReader,"Transaction.update",i._key,t,n,o):wI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=gT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function kT(e,t,n){e=DC(e,KC);var r=Object.assign(Object.assign({},mT),n);return function(e){if(e.maxAttempts<1)throw new Gv(Kv.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Qv;return e.asyncQueue.enqueueAndForget(S(x().mark((function i(){var a;return x().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,gC(e);case 2:a=i.sent,new rC(e.asyncQueue,a,n,t,r).ja();case 4:case"end":return i.stop()}}),i)})))),r.promise}(GC(e),(function(n){return t(new wT(e,n))}),r)}function _T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mI("arrayUnion",t)}function bT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new yI("arrayRemove",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Lv=e}(Hr),Vr(new Jn("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new KC(new Xv(e.getProvider("auth-internal")),new tm(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Gv(Kv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jy(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ei(Rv,"4.4.3",e),ei(Rv,"4.4.3","esm2017")}();function xT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Gv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function ET(){if("undefined"===typeof Uint8Array)throw new Gv("unimplemented","Uint8Arrays are not available in this environment.")}function ST(){if("undefined"==typeof atob)throw new Gv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var CT=function(){function e(t){h(this,e),this._delegate=t}return m(e,[{key:"toBase64",value:function(){return ST(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return ET(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return ST(),new e(tI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return ET(),new e(tI.fromUint8Array(t))}}]),e}();function IT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=D(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var TT=function(){function e(){h(this,e)}return m(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){eI(e=DC(e,KC));var n=GC(e);if(n._uninitializedComponentsProvider)throw new Gv(Kv.FAILED_PRECONDITION,"SDK cache is already specified.");qv("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new JS;return HC(n,i,new $S(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){eI(e=DC(e,KC));var t=GC(e);if(t._uninitializedComponentsProvider)throw new Gv(Kv.FAILED_PRECONDITION,"SDK cache is already specified.");qv("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new JS;return HC(t,r,new XS(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Gv(Kv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Qv;return e._queue.enqueueAndForgetEvenWhileRestricted(S(x().mark((function n(){return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=S(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nm.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Nm.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Bb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),NT=function(){function e(t,n,r){var i=this;h(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof jy||(this._appCompat=t)}return m(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||qv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};OC(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return $C(this._delegate)}},{key:"disableNetwork",value:function(){return XC(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&CC("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return YC(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return dT(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Gv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new BT(this,jC(this._delegate,e))}catch(t){throw LT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new OT(this,UC(this._delegate,e))}catch(t){throw LT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new qT(this,function(e,t){if(e=DC(e,RC),SC("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Gv(Kv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new LC(e,null,function(e){return new Vg(lm.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw LT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return kT(this._delegate,(function(n){return e(new AT(t,n))}))}},{key:"batch",value:function(){var e=this;return GC(this._delegate),new PT(new yT(this._delegate,(function(t){return pT(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return JC(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return ZC(this._delegate,e).then((function(e){return e?new qT(t,e):null}))}}]),e}(),DT=function(e){g(n,e);var t=b(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new CT(new tI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return OT.forKey(t,this.firestore,null)}}]),n}(JI);var AT=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new DT(t)}return m(e,[{key:"get",value:function(e){var t=this,n=WT(e);return this._delegate.get(n).then((function(e){return new jT(t._firestore,new nT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=WT(e);return n?(xT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=WT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=WT(e);return this._delegate.delete(t),this}}]),e}(),PT=function(){function e(t){h(this,e),this._delegate=t}return m(e,[{key:"set",value:function(e,t,n){var r=WT(e);return n?(xT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=WT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=WT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),RT=function(){function e(t,n,r){h(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return m(e,[{key:"fromFirestore",value:function(e,t){var n=new rT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new UT(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new DT(t),n),i.set(n,a)),a}}]),e}();RT.INSTANCES=new WeakMap;var OT=function(){function e(t,n){h(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new DT(t)}return m(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new BT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new BT(this.firestore,jC(this._delegate,e))}catch(t){throw LT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Xn(e))instanceof MC&&qC(this._delegate,e)}},{key:"set",value:function(e,t){t=xT("DocumentReference.set",t);try{return t?lT(this._delegate,e,t):lT(this._delegate,e)}catch(n){throw LT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?fT(this._delegate,e):fT.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw LT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return pT(DC((e=this._delegate).firestore,KC),[new $w(e._key,Lw.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=MT(n),a=FT(n,(function(t){return new jT(e.firestore,new nT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return hT(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?sT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=DC(e,MC);var t=DC(e.firestore,KC);return _C(GC(t),e._key,{source:"server"}).then((function(n){return vT(t,e,n)}))}(this._delegate):function(e){e=DC(e,MC);var t=DC(e.firestore,KC);return _C(GC(t),e._key).then((function(n){return vT(t,e,n)}))}(this._delegate)).then((function(e){return new jT(t.firestore,new nT(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(RT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Gv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new MC(n._delegate,r,new dm(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new MC(n._delegate,r,t))}}]),e}();function LT(e,t,n){return e.message=e.message.replace(t,n),e}function MT(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!IT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function FT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=IT(e[0])?e[0]:IT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var jT=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"ref",get:function(){return new OT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return oT(this._delegate,e._delegate)}}]),e}(),UT=function(e){g(n,e);var t=b(n);function n(){return h(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return this._delegate._converter||void 0!==t||zv(),t}}]),n}(jT),qT=function(){function e(t,n){h(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new DT(t)}return m(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,FI(this._delegate,function(e,t,n){var r=t,i=RI("where",e);return jI._create(i,r,n)}(t,n,r)))}catch(i){throw LT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,FI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=RI("orderBy",e);return qI._create(n,t)}(t,n)))}catch(r){throw LT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,FI(this._delegate,(AC("limit",n=t),VI._create("limit",n,"F"))))}catch(n){throw LT(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,FI(this._delegate,(AC("limitToLast",n=t),VI._create("limitToLast",n,"L"))))}catch(n){throw LT(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,FI(this._delegate,BI.apply(void 0,arguments)))}catch(t){throw LT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,FI(this._delegate,WI.apply(void 0,arguments)))}catch(t){throw LT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,FI(this._delegate,GI.apply(void 0,arguments)))}catch(t){throw LT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,FI(this._delegate,QI.apply(void 0,arguments)))}catch(t){throw LT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return VC(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?cT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=DC(e,LC);var t=DC(e.firestore,KC),n=GC(t),r=new uT(t);return bC(n,e._query,{source:"server"}).then((function(n){return new iT(t,r,e,n)}))}(this._delegate):function(e){e=DC(e,LC);var t=DC(e.firestore,KC),n=GC(t),r=new uT(t);return OI(e._query),bC(n,e._query).then((function(n){return new iT(t,r,e,n)}))}(this._delegate),t.then((function(e){return new zT(n.firestore,new iT(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=MT(n),a=FT(n,(function(t){return new zT(e.firestore,new iT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return hT(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(RT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),VT=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new UT(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),zT=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"query",get:function(){return new qT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new UT(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new VT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new UT(n._firestore,r))}))}},{key:"isEqual",value:function(e){return oT(this._delegate,e._delegate)}}]),e}(),BT=function(e){g(n,e);var t=b(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return m(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new OT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new OT(this.firestore,void 0===e?UC(this._delegate):UC(this._delegate,e))}catch(t){throw LT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=DC(e.firestore,KC),r=UC(e),i=ZI(e.converter,t);return pT(n,[hI(fI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Lw.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new OT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return qC(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(RT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(qT);function WT(e){return DC(e,MC)}var KT=function(){function e(){h(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=I(nI,n)}return m(e,[{key:"isEqual",value:function(e){return(e=Xn(e))instanceof nI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(hm.keyField().canonicalString())}}]),e}(),GT=function(){function e(t){h(this,e),this._delegate=t}return m(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new vI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new dI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=_T.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=bT.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new gI("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),QT={Firestore:NT,GeoPoint:iI,Timestamp:um,Blob:CT,Transaction:AT,WriteBatch:PT,DocumentReference:OT,DocumentSnapshot:jT,Query:qT,QueryDocumentSnapshot:UT,QuerySnapshot:zT,CollectionReference:BT,FieldPath:KT,FieldValue:GT,setLogLevel:function(e){var t;t=e,Mv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Jn("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},QT)))}(e,(function(e,t){return new NT(e,t,new TT)})),e.registerVersion("@firebase/firestore-compat","0.3.26")}(Ci);Ci.initializeApp({apiKey:"AIzaSyDIOSOjLWRj4RvgwB5brX_xdQyv6ibbqOQ",authDomain:"website-f350e.firebaseapp.com",projectId:"website-f350e",storageBucket:"website-f350e.appspot.com",messagingSenderId:"407325526867",appId:"1:407325526867:web:e052b48b05156f3bec6fa6"});var HT,YT=Ci.firestore(),$T=n(995),XT=i,JT=Symbol.for("react-redux-context"),ZT="undefined"!==typeof globalThis?globalThis:{};function eN(){var e;if(!XT.createContext)return{};var t=null!==(e=ZT[JT])&&void 0!==e?e:ZT[JT]=new Map,n=t.get(XT.createContext);return n||(n=XT.createContext(null),t.set(XT.createContext,n)),n}var tN=eN(),nN=function(){throw new Error("uSES not initialized!")};function rN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tN;return function(){return XT.useContext(e)}}var iN=rN(),aN=nN,oN=function(e,t){return e===t};function uN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tN,t=e===tN?iN:rN(e),n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="function"===typeof n?{equalityFn:n}:n,i=r.equalityFn,a=void 0===i?oN:i,o=r.devModeChecks,u=void 0===o?{}:o;var s=t(),c=s.store,l=s.subscription,f=s.getServerState,h=s.stabilityCheck,d=(s.identityFunctionCheck,XT.useRef(!0),XT.useCallback(C({},e.name,(function(t){return e(t)}))[e.name],[e,h,u.stabilityCheck])),p=aN(l.addNestedSub,c.getState,f||c.getState,d,a);return XT.useDebugValue(p),p};return Object.assign(n,{withTypes:function(){return n}}),n}var sN=uN(),cN=(Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref")),lN=(Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo")),fN=(Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference"),cN),hN=lN;function dN(e){e()}var pN={notify:function(){},get:function(){return[]}};function vN(e,t){var n,r=pN,i=0,a=!1;function o(){c.onStateChange&&c.onStateChange()}function u(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){var e=null,t=null;return{clear:function(){e=null,t=null},notify:function(){dN((function(){for(var t=e;t;)t.callback(),t=t.next}))},get:function(){for(var t=[],n=e;n;)t.push(n),n=n.next;return t},subscribe:function(n){var r=!0,i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function s(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=pN)}var c={addNestedSub:function(e){u();var t=r.subscribe(e),n=!1;return function(){n||(n=!0,t(),s())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return a},trySubscribe:function(){a||(a=!0,u())},tryUnsubscribe:function(){a&&(a=!1,s())},getListeners:function(){return r}};return c}var mN=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?XT.useLayoutEffect:XT.useEffect;var yN={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};C(HT={},fN,{$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0}),C(HT,hN,yN);Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var gN=function(e){var t=e.store,n=e.context,r=e.children,i=e.serverState,a=e.stabilityCheck,o=void 0===a?"once":a,u=e.identityFunctionCheck,s=void 0===u?"once":u,c=XT.useMemo((function(){var e=vN(t);return{store:t,subscription:e,getServerState:i?function(){return i}:void 0,stabilityCheck:o,identityFunctionCheck:s}}),[t,i,o,s]),l=XT.useMemo((function(){return t.getState()}),[t]);mN((function(){var e=c.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[c,l]);var f=n||tN;return XT.createElement(f.Provider,{value:c},r)};function wN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tN,t=e===tN?iN:rN(e),n=function(){return t().store};return Object.assign(n,{withTypes:function(){return n}}),n}var kN=wN();function _N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tN,t=e===tN?kN:wN(e),n=function(){return t().dispatch};return Object.assign(n,{withTypes:function(){return n}}),n}var bN,xN=_N();function EN(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}bN=$T.useSyncExternalStoreWithSelector,aN=bN,function(e){e}(i.useSyncExternalStore);var SN=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}(),CN=function(){return Math.random().toString(36).substring(7).split("").join(".")},IN={INIT:"@@redux/INIT".concat(CN()),REPLACE:"@@redux/REPLACE".concat(CN()),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION".concat(CN())}};function TN(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function NN(e,t,n){if("function"!==typeof e)throw new Error(EN(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(EN(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(EN(1));return n(NN)(e,t)}var r=e,i=t,a=new Map,o=a,u=0,s=!1;function c(){o===a&&(o=new Map,a.forEach((function(e,t){o.set(t,e)})))}function l(){if(s)throw new Error(EN(3));return i}function f(e){if("function"!==typeof e)throw new Error(EN(4));if(s)throw new Error(EN(5));var t=!0;c();var n=u++;return o.set(n,e),function(){if(t){if(s)throw new Error(EN(6));t=!1,c(),o.delete(n),a=null}}}function h(e){if(!TN(e))throw new Error(EN(7));if("undefined"===typeof e.type)throw new Error(EN(8));if("string"!==typeof e.type)throw new Error(EN(17));if(s)throw new Error(EN(9));try{s=!0,i=r(i,e)}finally{s=!1}return(a=o).forEach((function(e){e()})),e}return h({type:IN.INIT}),C({dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(EN(10));r=e,h({type:IN.REPLACE})}},SN,(function(){var e=f;return C({subscribe:function(t){if("object"!==typeof t||null===t)throw new Error(EN(11));function n(){var e=t;e.next&&e.next(l())}return n(),{unsubscribe:e(n)}}},SN,(function(){return this}))}))}function DN(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:IN.INIT}))throw new Error(EN(12));if("undefined"===typeof n(void 0,{type:IN.PROBE_UNKNOWN_ACTION()}))throw new Error(EN(13))}))}(n)}catch(u){a=u}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(EN(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function AN(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t(e.apply(this,r))}}function PN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function RN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r){var i=e(n,r),a=function(){throw new Error(EN(15))},o={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return a.apply(void 0,[e].concat(n))}},u=t.map((function(e){return e(o)}));return a=PN.apply(void 0,A(u))(i.dispatch),fr(fr({},i),{},{dispatch:a})}}}var ON=function(e){return{type:"SET_SECTIONS",payload:e}},LN=function(e){return{type:"CHANGE_SECTION",payload:e}},MN=function(e){return{type:"SET_IS_CHANGE_MODE",payload:e}},FN=function(e,t,n){return{type:"SET_SECTION_FIELD",payload:{title_key:e,fieldName:t,value:n}}},jN={sections:t},UN=function(e){var t=xN();return(0,i.useMemo)((function(){return function(e,t){if("function"===typeof e)return AN(e,t);if("object"!==typeof e||null===e)throw new Error(EN(16));var n={};for(var r in e){var i=e[r];"function"===typeof i&&(n[r]=AN(i,t))}return n}(jN[e]||{},t)}),[t])},qN=function(e){var t=e.className,n=e.value,r=e.handler,a=(0,i.useRef)(),o=function(){var e=a.current;e&&(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px")),console.log("".concat(e.scrollHeight,"px"))};return(0,i.useEffect)((function(){return o()}),[]),(0,on.jsx)("textarea",{ref:a,rows:1,defaultValue:n,className:"border-2 ".concat(t," overflow-hidden resize-none w-full"),onChange:function(e){return null===r||void 0===r?void 0:r(e.target.value)},onInput:o,required:!0})},VN=function(e){var t=e.Tag,n=e.className,r=e.title_key,i=e.fieldName,a=e.value,o=sN((function(e){return e.sections})).isChangeMode,u=UN("sections").setSectionField;return(0,on.jsx)(on.Fragment,{children:o?(0,on.jsx)(qN,{value:a,className:n,handler:function(e){return u(r,i,e)}}):(0,on.jsx)(t,{className:n,children:a})})},zN=function(){var e=sN((function(e){return e.sections.sections})).welcome;sN((function(e){return e.sections})).isChangeMode,UN("sections").setSectionField;return(0,on.jsx)("section",{className:"w-full min-h-[70vh] lg:h-[90vh] flex items-center justify-center my-20 lg:mb-20 border-dotted-section",children:(0,on.jsxs)("div",{className:"w-[98%] xl:w-[74%] h-[80%] flex flex-col sm:flex-row items-center justify-center p-5 sm:p-0",children:[(0,on.jsxs)("div",{className:"flex flex-col items-center justify-end space-y-5 w-full sm:w-[44%] font-inter sm::mr-5",children:[(0,on.jsx)(VN,{Tag:"h1",className:"text-left w-full text-[20px] md:text-[30px] xl:text-[50px] font-[700]",title_key:null===e||void 0===e?void 0:e.title_key,fieldName:"title",value:null===e||void 0===e?void 0:e.title}),(0,on.jsx)(VN,{Tag:"p",className:"text-[14px] lg:text-[18px] fort-[400] text-[#00000099]",title_key:null===e||void 0===e?void 0:e.title_key,fieldName:"description",value:null===e||void 0===e?void 0:e.description}),(0,on.jsx)("div",{className:"w-full flex justify-start",children:(0,on.jsx)(un,{title:"CONTACT US",className:"sm:py-[20px] sm:px-[40.055px] mt-2 sm:mt-8 sm:w-[177px] sm:text-[14px] font-[600]",to:"/contact-us"})})]}),(0,on.jsx)("div",{className:"w-[80%] sm:w-[50%] flex justify-end",children:(0,on.jsx)("img",{className:"",src:"welcome.png",alt:"Welcome",draggable:"false"})})]})})},BN=function(){var e=sN((function(e){return e.sections.sections})).aboutUs;sN((function(e){return e.sections})).isChangeMode,UN("sections").setSectionField;return(0,on.jsx)("section",{className:"w-full min-h-screen flex items-center justify-center my-20 border-dotted-section",children:(0,on.jsxs)("div",{className:"w-full lg:w-[90%] h-[80%] flex flex-col sm:flex-row items-center justify-center",children:[(0,on.jsx)("div",{className:"w-[60%] sm:w-[50%]",children:(0,on.jsx)("img",{src:"/aboutus.jpg",alt:"About us"})}),(0,on.jsxs)("div",{className:"w-full p-6 sm:p-0 sm:w-1/2 lg:w-[29%] flex flex-col items-start justify-center font-inter m-4 lg:m-10",children:[(0,on.jsx)("h2",{className:"text-gradient-yellow font-[500] text-[12px] sm:text-[18px] font-oswald",children:"ABOUT US"}),(0,on.jsx)(VN,{Tag:"h1",className:"font-[700] text-[25px] sm:text-[38px]",title_key:null===e||void 0===e?void 0:e.title_key,fieldName:"title",value:null===e||void 0===e?void 0:e.title}),(0,on.jsx)(VN,{Tag:"p",className:"font-[400] text-[12px] sm:text-[14px] md:text-[18px] text-[#00000099] my-6",title_key:null===e||void 0===e?void 0:e.title_key,fieldName:"description",value:null===e||void 0===e?void 0:e.description}),(0,on.jsx)("div",{className:"w-full flex justify-start",children:(0,on.jsx)(un,{title:"MORE ABOUT US",className:"sm:py-[18px] sm:px-[32.55px] sm:mt-8 sm:w-[177px] font-[600] text-[12px]",to:"/about-us"})})]})]})})},WN=function(e){var t=e.icon,n=e.className,r={"db-migration":(0,on.jsx)("img",{className:n,src:"/icons/db-migration.png",alt:"database migration",draggable:"false"}),cloud:(0,on.jsx)("img",{className:n,src:"/icons/cloud.png",alt:"cloud",draggable:"false"}),migration:(0,on.jsx)("img",{className:n,src:"/icons/migration.png",alt:"migration",draggable:"false"}),"db-star":(0,on.jsx)("img",{className:n,src:"/icons/db-star.png",alt:"database",draggable:"false"}),cpu:(0,on.jsx)("img",{className:n,src:"/icons/cpu.png",alt:"cpu"}),postgresql:(0,on.jsx)("img",{className:n,src:"/icons/postgresql.png",alt:"postgresql",draggable:"false"}),vector:(0,on.jsxs)("svg",{className:n,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,on.jsx)("defs",{children:(0,on.jsxs)("linearGradient",{id:"textGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,on.jsx)("stop",{offset:"0%",style:{stopColor:"#E5DB85"}}),(0,on.jsx)("stop",{offset:"100%",style:{stopColor:"#85600F"}})]})}),(0,on.jsx)("path",{className:n,d:"M4.41058 6.91058C4.73602 6.58514 5.26366 6.58514 5.58909 6.91058L9.99984 11.3213L14.4106 6.91058C14.736 6.58514 15.2637 6.58514 15.5891 6.91058C15.9145 7.23602 15.9145 7.76366 15.5891 8.08909L10.5891 13.0891C10.2637 13.4145 9.73602 13.4145 9.41058 13.0891L4.41058 8.08909C4.08514 7.76366 4.08514 7.23602 4.41058 6.91058Z"})]}),send:(0,on.jsxs)("svg",{stroke:"currentColor",fill:"none",className:n,strokeWidth:2,viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[(0,on.jsx)("path",{d:"m22 2-7 20-4-9-9-4Z"}),(0,on.jsx)("path",{d:"M22 2 11 13"})]}),facebook:(0,on.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:11,height:19,viewBox:"0 0 11 19",fill:"none",children:[(0,on.jsx)("path",{d:"M7.31345 18.395V10.1844H10.2081L10.6415 6.98452H7.31337V4.94155C7.31337 4.01512 7.58355 3.38381 8.97899 3.38381L10.7587 3.38301V0.521091C10.4509 0.482165 9.39435 0.39502 8.16537 0.39502C5.59935 0.39502 3.84261 1.88619 3.84261 4.62474V6.98452H0.940491V10.1844H3.84261V18.3949H7.31345V18.395Z",fill:"url(#paint0_linear_8_478)"}),(0,on.jsx)("defs",{children:(0,on.jsxs)("linearGradient",{id:"paint0_linear_8_478",x1:"3.15189",y1:"-11.8899",x2:"15.8004",y2:"-9.61303",gradientUnits:"userSpaceOnUse",children:[(0,on.jsx)("stop",{stopColor:"#E5DB85"}),(0,on.jsx)("stop",{offset:1,stopColor:"#85600F"})]})})]}),pencil:(0,on.jsx)("svg",{className:n,stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM136,75.31,152.69,92,68,176.69,51.31,160ZM48,208V179.31L76.69,208Zm48-3.31L79.32,188,164,103.31,180.69,120Zm96-96L147.32,64l24-24L216,84.69Z"})}),cross:(0,on.jsx)("svg",{className:n,stroke:"currentColor",fill:"none",strokeWidth:0,viewBox:"0 0 15 15",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"})})};return(0,on.jsx)("div",{children:r[t]})||null},KN=function(e){var t=e.icon,n=e.title,r=e.desc,i=e.rmPath;return(0,on.jsxs)("div",{className:"w-[90%] sm:w-[40%] sm:h-[245px] md:w-[40%] md:h-[292px] lg:w-[247px] rounded-[6px] bg-[#FFFFFF] mx-1 card-shadow flex flex-col items-center justify-center space-y-4 font-inter p-8 text-center",children:[(0,on.jsx)(WN,{icon:t,className:"h-12 sm:h-auto"}),(0,on.jsx)("span",{className:"font-[700] text-[16px] sm:text-[20px] text-[#000000]",children:n}),(0,on.jsx)("p",{className:"font-[400] text-[12px] sm:text-[14px] text-[#00000099]",children:r}),(0,on.jsx)(nn,{to:"/our-services/".concat(i),className:"font-[600] text-[11.65px] text-[#000000]",children:"READ MORE"})]})},GN=function(){return(0,on.jsx)("section",{className:"w-full min-h-screen flex items-center justify-center my-20 border-dotted-section py-10 sm:pb-0",children:(0,on.jsxs)("div",{className:"w-[90%] xl:w-[68%] flex flex-wrap items-center justify-center sm:justify-between font-inter space-y-8",children:[(0,on.jsxs)("div",{className:"w-[95%] sm:w-[59%] mx-1 flex flex-col justify-center items-start ",children:[(0,on.jsx)("h2",{className:"text-gradient-yellow font-[500] text-[12px] sm:text-[18px] font-oswald",children:"OUR SERVICES"}),(0,on.jsx)("h1",{className:"font-[700] text-[20px] md:text-[25px] lg:text-[30px] xl:text-[43.2px]",children:"Our Comprehensive Range Of Services Is Designed To Cater To Various Data Migration Needs"}),(0,on.jsx)(un,{to:"",title:"READ MORE",className:"sm:py-[18px] sm:px-[32.55px] font-[600] sm:text-[12px] sm:w-[166px] mt-4 sm:mt-8"})]}),[{icon:"db-migration",title:"Data Migration",desc:"We specialize in migrating your data from your old system to a new one.",rmPath:"data-migraiton"},{icon:"cloud",title:"Side by Side Data Synchronization: ",desc:"Transitioning from on-premise to the cloud? Our side-by-side data ",rmPath:"data-synchronization"},{icon:"migration",title:"Database Migration",desc:"Migrating data from PostgreSQL or MySQL to Amazon Redshift?",rmPath:"migration"},{icon:"db-star",title:"RDS to Aurora Migration",desc:"Upgrade from Amazon RDS to Aurora for enhanced performance and scalability",rmPath:"rds-to-aurora-migration"},{icon:"cpu",title:"EC2/On-premise to RDS Migration",desc:"Moving from EC2 instances or on-premise servers to Amazon RDS? ",rmPath:"ec2-on-premise-to-rds-migraiton"},{icon:"db-star",title:"Aurora Setup from Scratch",desc:"Leverage the power of Amazon Aurora with our setup- from-scratch ",rmPath:"aurora-setup-from-scratch"},{icon:"postgresql",title:"Table Partitioning for PostgreSQL",desc:"Enhance the performance of your PostgreSQL database with our table ",rmPath:"table-partitioning-for-postgresql"}].map((function(e,t){return(0,on.jsx)(KN,fr({},e),t)}))]})})},QN=function(e){var t=e.title,n=e.desc,r=e.index;return(0,on.jsxs)("div",{className:"w-full p-4 md:p-6 flex items-start justify-start card-shadow",children:[(0,on.jsx)("div",{className:"rounded-full h-[20px] w-[20px] sm:h-[35px] sm:min-w-[35px] px-2 flex items-center justify-center text-[10px] sm:text-[14px] font-[700] mr-2 sm:mr-4 text-white bg-gradient-yellow",children:r}),(0,on.jsxs)("div",{className:"flex flex-col items-start justify-center space-y-4 w-full",children:[(0,on.jsx)("span",{className:"font-[700] text-[16px] sm:text-[20px]",children:t}),(0,on.jsx)("p",{className:"font-[400] text-[12px] sm:text-[14px] w-full sm:w-[93%]",children:n})]})]})},HN=function(){return(0,on.jsx)("section",{className:"w-full min-h-[110vh] flex items-center justify-center font-inter py-10 my-20 border-dotted-section",children:(0,on.jsxs)("div",{className:"w-[90%] flex flex-col items-center justify-center",children:[(0,on.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,on.jsx)("h2",{className:"text-gradient-yellow font-[500] text-[12px] sm:text-[18px] font-oswald",children:"OUR FEATURES"}),(0,on.jsx)("h1",{className:"font-[700] text-[20px] text-center sm:text-[38px]",children:"Why Choose EZDataMigration?"})]}),(0,on.jsxs)("div",{className:"w-full flex flex-col xl:flex-row items-center justify-center my-5 sm:my-20 xl:space-x-6",children:[(0,on.jsx)("div",{className:"w-full md:w-[80%] xl:w-[38%] flex flex-col space-y-4",children:[{title:"Unmatched Expertise",desc:"Our team comprises seasoned professionals with deep expertise in cloud migration, database management, and data security. We stay updated with the latest industry trends to provide you with cutting-edge solutions."},{title:"Tailored Solutions",desc:"We recognize that no two businesses are the same. Our approach revolves around understanding your unique requirements and crafting solutions that align with your specific needs, ensuring a seamless migration journey."},{title:"Data Security First",desc:"We understand the paramount importance of data security. Our stringent security measures and protocols ensure that your sensitive information remains protected throughout the migration process."},{title:"Focus on Minimizing Disruption",desc:"We know that time is money. Our methodologies are designed to minimize downtime and disruption to your operations, allowing you to maintain business continuity during the migration process."},{title:"Holistic Support",desc:"From the initial consultation to post-migration support, our team is dedicated to providing comprehensive assistance. We're here to answer your questions, address your concerns, and guide you at every step."}].map((function(e,t){return(0,on.jsx)(QN,fr(fr({},e),{},{index:t}),t)}))}),(0,on.jsx)("div",{className:"w-[75%] md:w-[60%] xl:w-[38%] xl:block my-10 lg:my-20 xl:my-0",children:(0,on.jsx)("img",{className:"w-full",src:"/Features.png",alt:"Features"})})]})]})})},YN=function(e){var t=e.question,n=e.answer,r=f((0,i.useState)(!1),2),a=r[0],o=r[1];return(0,on.jsxs)("div",{className:"w-full p-3 sm:p-12 flex items-start justify-start card-shadow rounded-[14px] transition-all duration-500 border-[2px] border-white ".concat(a&&"border-gradient-yellow"),children:[(0,on.jsxs)("div",{className:"flex flex-col items-start justify-center space-y-4 w-[85%] sm:w-[93%]",children:[(0,on.jsx)("span",{className:"font-[600] text-[14px] sm:text-[16px] md:text-[20px] pt-[3px]",children:t}),(0,on.jsx)("p",{className:"font-[400] text-[10px] sm:text-[14px] lg:text-[18px] w-[93%] overflow-hidden transition-all duration-500 ".concat(a?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"),children:n})]}),(0,on.jsx)("button",{onClick:function(){return o(!a)},className:"\n          rounded-full h-[35px] w-[35px] lg:h-[50px] lg:w-[50px] flex items-center justify-center text-[14px] font-[700] transition-all duration-500 \n          ".concat(a?"-rotate-270 bg-gradient-yellow text-white":"-rotate-90 bg-white elips-shadow","\n        "),children:(0,on.jsx)(WN,{icon:"vector",className:"h-[20px] lg:h-[30px] w-[20px] lg:w-[30px] ".concat(a?"fill-white":"fill-gradient-yellow")})})]})},$N=function(){return(0,on.jsx)("section",{className:"w-full min-h-screen flex items-center justify-center font-inter my-20 border-dotted-section",children:(0,on.jsxs)("div",{className:"w-[80%] md:w-[65%] flex flex-col items-center justify-center",children:[(0,on.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-[3px]",children:[(0,on.jsx)("h2",{className:"text-gradient-yellow font-[500] text-[12px] sm:text-[18px] font-oswald",children:"FAQS"}),(0,on.jsx)("h1",{className:"text-[20px] sm:text-[25px] lg:text-[38px] font-[700] text-center",children:"Frequently Asked Questions"})]}),(0,on.jsx)("div",{className:"flex flex-col items-start justify-center w-full space-y-6 sm:space-y-8 my-14",children:[{question:"What is cloud data Migration?",answer:"Cloud data migration refers to the process of transferring data from one location or system to another within a cloud computing environment. It involves migrating data between on-premise systems and cloud platforms, or between different cloud services."},{question:"Why do I need professional data migration services?",answer:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},{question:"What types of data can be migrated using EZDataMigration services?",answer:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},{question:"How long does the data migration process take?",answer:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}].map((function(e,t){return(0,on.jsx)(YN,fr({},e),t)}))})]})})},XN=function(){return(0,on.jsx)("section",{className:"w-full h-[50vh] flex items-center justify-center font-inter my-20 border-dotted-section pb-10",children:(0,on.jsxs)("div",{className:"w-[90%] xl:w-[68%] sm:h-[90%] p-4 rounded-[20px] sm:rounded-[40px] flex flex-col items-center text-center justify-center bg-gradient-yellow font-inter text-white",children:[(0,on.jsx)("h1",{className:"text-[13px] sm:text-[16px] lg:text-[20px] xl:text-[38px] font-[700]",children:"Let's Begin Your Cloud Data Journey"}),(0,on.jsx)("p",{className:"text-[9px] md:text-[12px] xl:text-[18px] font-[400] w-[100%] sm:w-[90%] xl:w-[63%] mt-3 mb-5 sm:mb-10",children:"Embrace the future of data management with EZDataMigration Cloud Data Migration Services. Whether you're looking to migrate, synchronize, or optimize, we have the expertise to make your transition smooth and successful. Contact us today to learn more about how we can assist you on your cloud data journey."}),(0,on.jsx)(un,{title:"CONTACT US",className:"sm:text-[14px] px-10 py-3 sm:w-[236px] sm:font-[600] sm:py-[20px] sm:px-[40.05px]",to:"/contact-us"})]})})},JN=function(){return(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)(zN,{}),(0,on.jsx)(BN,{}),(0,on.jsx)(GN,{}),(0,on.jsx)(HN,{}),(0,on.jsx)($N,{}),(0,on.jsx)(XN,{})]})},ZN=function(){return(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)("section",{className:"w-full min-h-[100vh] flex items-center justify-center mb-10 py-32 sm:py-0",children:(0,on.jsxs)("div",{className:"w-[90%] xl:w-[74%] h-[80%] flex flex-col sm:flex-row items-center justify-center space-y-10 sm:space-x-10",children:[(0,on.jsxs)("div",{className:"flex flex-col items-start justify-end w-[95%] sm:w-[44%] font-inter sm:mr-5 text-left",children:[(0,on.jsx)("h1",{className:"text-[30px] xl:text-[50px] font-[700]",children:"About Us"}),(0,on.jsx)("p",{className:"text-[12px] lg:text-[18px] fort-[400] text-[#00000099] my-4",children:"At EZDataMigration, we specialize in seamless and efficient data migration, ensuring your transition to the cloud is smooth, secure, and stress-free. With a proven track record of successful data migrations, we are your trusted partner in unlocking the power of cloud computing while safeguarding the integrity of your valuable data."}),(0,on.jsx)("h2",{className:"text-[18px] xl:text-[22px] font-[600]",children:"Our Expertise"}),(0,on.jsx)("p",{className:"text-[12px] lg:text-[18px] fort-[400] text-[#00000099]",children:"Our comprehensive range of services is designed to cater to various data migration needs, encompassing both complex and straightforward scenarios. Whether you're transitioning from an older system to a new one or moving your data from on-premise to the cloud, EZDataMigration has the expertise to guide you through the process with precision and care."})]}),(0,on.jsx)("div",{className:"w-[80%] sm:w-[47%] flex justify-end h-[68%]",children:(0,on.jsx)("img",{className:"h-full w-full",src:"AboutUs.png",alt:"Welcome",draggable:"false"})})]})}),(0,on.jsx)(XN,{})]})},eD=function(e){var t=e.path,n=e.name,r=xt(),a=f((0,i.useState)(!1),2),o=a[0],u=a[1];return(0,i.useEffect)((function(){u(r.pathname===t)}),[r.pathname,t]),(0,on.jsx)("span",{className:"inline-block relative",children:(0,on.jsx)(nn,{to:t,className:"effect-box h-full after:mt-[2px]",children:(0,on.jsx)("span",{className:"sm:py-6 px-1 sm:px-3 text-[10px] sm:text-[14px] font-[800] whitespace-nowrap ".concat(o?"text-gradient-yellow":""),children:n})})})},tD=function(){var e=S(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YT.collection("sections").get();case 2:e.sent.forEach((function(e){try{var n=e.ref,r=t[e.data().title_key];r&&n.update(r),console.log("UPDATED!!!")}catch(i){console.error(i)}})),console.log("SUCCESS!!!");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nD=function(e){var t=e.children,n=e.isActive;return(0,i.useEffect)((function(){document.body.style.overflow=n?"hidden":"auto"}),[n]),n&&(0,on.jsx)("div",{className:"fixed w-full inset-0 flex items-center justify-center bg-[#000000a1] z-[99999] transition-all duration-500",children:t})},rD=function(e){var t=e.isActive,n=e.setIsActive,r=e.acceptCallback,i=e.rejectCallback;return(0,on.jsx)(nD,{isActive:t,children:(0,on.jsxs)("div",{className:"bg-white rounded-md p-5 sm:px-10 pb-5 flex flex-col w-[95%] sm:w-[500px] items-center justify-between relative",children:[(0,on.jsx)("button",{className:"absolute top-3 right-3",onClick:function(){return null===n||void 0===n?void 0:n(!1)},children:(0,on.jsx)(WN,{icon:"cross",className:"h-6 w-6"})}),(0,on.jsx)("h1",{className:"font-[600] text-[16px] sm:text-[18px] lg:text-[22px]",children:"Are you sure you want to update all the content on the website?"}),(0,on.jsxs)("div",{className:"w-full flex items-end justify-center space-x-3 mt-5 sm:mt-16",children:[(0,on.jsx)("button",{className:"w-1/2 sm:w-1/3 text-white rounded-lg p-2 bg-[#f34e4e] hover:bg-[#d74545] sm:py-[8px] sm:px-[10px] whitespace-nowrap text-[20px] sm:text-[25px] font-[600]",onClick:i,children:"No"}),(0,on.jsx)("button",{className:"w-1/2 sm:w-1/3 text-white rounded-lg p-2 bg-[#41b941] hover:bg-[#3ead3e] sm:py-[8px] sm:px-[10px] whitespace-nowrap text-[20px] sm:text-[25px] font-[600]",onClick:r,children:"Yes"})]})]})})},iD=function(){var e=Ut(),t=UN("sections"),n=t.setSections,r=t.setIsChangeMode,a=sN((function(e){return e.sections})),o=a.isChangeMode,u=a.sections,s=f((0,i.useState)(!1),2),c=s[0],l=s[1];(0,i.useEffect)((function(){n(e)}),[e]);var h=function(){var e=S(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tD(u);case 2:r(!1),l(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)(rD,{isActive:c,setIsActive:l,acceptCallback:h,rejectCallback:function(){return l(!1)}}),(0,on.jsx)("header",{className:"w-full sm:h-[85px] p-4 lg:p-12 fixed top-0 flex items-center justify-center lg:justify-center bg-white border-[#FFFFFF] navbar-shadow z-[9999]",children:(0,on.jsx)("div",{className:"w-full lg:w-[80%] flex items-center justify-center sm:justify-between h-full",children:(0,on.jsxs)("div",{className:"flex items-center justify-between font-inter h-full",children:[(0,on.jsx)(nn,{to:"/",className:"w-[20%] h-full sm:flex items-center justify-end hidden",children:(0,on.jsx)("img",{src:"/ezdata-logo.jpg",alt:"EZDataMigration"})}),(0,on.jsxs)("div",{className:"flex flex-wrap sm:flex-nowrap items-center justify-center space-x-2.5 sm:space-x-12",children:[[{name:"HOME",path:"/home"},{name:"ABOUT US",path:"/about-us"},{name:"SERVICES",path:"/our-services"}].map((function(e,t){return(0,on.jsx)(eD,fr({},e),t)})),(0,on.jsx)(un,{title:"CONTACT US",className:"lg:ml-[100px] sm:w-[139.67px] sm:py-[15px] sm:px-[30.24px] whitespace-nowrap text-[8px] sm:text-[12px] font-[600]",to:"/contact-us"}),(0,on.jsx)("button",{onClick:function(){return r(!o)},title:"Enables the mode of changing content",children:(0,on.jsx)(WN,{icon:"pencil",className:"w-10 h-10"})}),o&&(0,on.jsxs)("div",{className:"flex items-center justify-center space-x-5 p-2 border-2 rounded-lg",children:[(0,on.jsx)("button",{className:"text-white rounded-lg p-2 bg-[#f34e4e] hover:bg-[#d74545] sm:py-[8px] sm:px-[10px] whitespace-nowrap text-[8px] sm:text-[16px] font-[600]",onClick:function(){return window.location.reload()},children:"Cancel"}),(0,on.jsx)("button",{className:"text-white rounded-lg p-2 bg-[#41b941] hover:bg-[#3ead3e] sm:py-[8px] sm:px-[10px] whitespace-nowrap text-[8px] sm:text-[16px] font-[600]",onClick:function(){return l(!0)},children:"Save"})]})]})]})})})]})},aD=function(e){var t=e.icon,n=e.title,r=e.link,i=e.inNewScreen,a=e.isWithAnimation;return(0,on.jsx)("span",{className:"inline-block relative",children:(0,on.jsxs)(nn,{className:a&&"effect-box h-full after:mt-1",to:r,target:i&&"_blank",children:[t&&(0,on.jsx)("div",{children:(0,on.jsx)("img",{src:"/Social-Media-Icons/".concat(t,".png"),alt:t})}),n&&(0,on.jsx)("span",{className:"font-[300] p-1 text-[12px] md:text-[18px] md:m-4 whitespace-nowrap",children:n})]})})},oD=function(){return(0,on.jsx)("footer",{className:"w-full min-h-[458px] bg-black flex items-center justify-center text-white",children:(0,on.jsxs)("div",{className:"w-full space-y-10 sm:space-y-0 xl:w-[64%] h-[90%] border-b-2 border-white flex flex-wrap sm:flex-nowrap items-start justify-between font-dm-sans py-16 xl:py-16 p-3 xl:p-0",children:[(0,on.jsxs)("div",{className:"flex flex-col items-start justify-start space-y-5",children:[(0,on.jsx)("div",{className:"w-[80%] sm:w-auto",children:(0,on.jsx)("img",{className:"",src:"/footer-logo.png",alt:"EZDataMigration"})}),(0,on.jsx)("div",{className:"flex items-center justify-center space-x-3 sm:space-x-5",children:[].map((function(e,t){return(0,on.jsx)(aD,fr(fr({},e),{},{inNewScreen:!0}),t)}))})]}),(0,on.jsxs)("div",{className:"flex items-start justify-center flex-col-m space-x-6 lg:space-x-24",children:[(0,on.jsxs)("div",{className:"flex flex-col items-start justify-center space-y-2 sm:space-y-4 mb-10",children:[(0,on.jsx)("h3",{className:"text-[14px] md:text-[20px] font-[700] md:my-3 md:m-4 p-1",children:"Company"}),[{title:"About",link:"/about-us"},{title:"Services",link:"/our-services"},{title:"Features",link:"/our-features"},{title:"FAQs",link:"/faqs"}].map((function(e,t){return(0,on.jsx)(aD,fr(fr({},e),{},{isWithAnimation:!0}),t)}))]}),(0,on.jsxs)("div",{className:"flex flex-col items-start justify-center space-y-2 sm:space-y-4  mb-10",children:[(0,on.jsx)("h3",{className:"text-[14px] md:text-[20px] font-[700] md:my-3 md:m-4 p-1",children:"Support"}),[{title:"Contact Us",link:"/contact-us"},{title:"Privacy Policy",link:"/privacy-policy"},{title:"Terms & Services",link:"/terms-and-services"}].map((function(e,t){return(0,on.jsx)(aD,fr(fr({},e),{},{isWithAnimation:!0}),t)}))]}),(0,on.jsxs)("div",{className:"flex flex-col items-start justify-center space-y-2 p-1 mb-10",children:[(0,on.jsx)("h3",{className:"text-[14px] md:text-[20px] font-[700] md:my-3",children:"Contacts us"}),(0,on.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,on.jsx)("img",{className:"",src:"/Social-Media-Icons/Email.png",alt:"Email"}),(0,on.jsx)("a",{className:"font-[400] text-[10px] sm:text-[14px]",href:"mailto:contact@ezdatamigration.com",children:"contact@ezdatamigration.com"})]}),(0,on.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,on.jsx)("img",{className:"",src:"/Social-Media-Icons/Phone.png",alt:"Phone"}),(0,on.jsx)("a",{className:"font-[400] text-[10px] sm:text-[14px] md:m-4",href:"tel:+10000000000",children:"0000000000"})]})]})]})]})})},uD=function(){return(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)(iD,{}),(0,on.jsx)("main",{children:(0,on.jsx)(Kt,{})}),(0,on.jsx)(oD,{})]})},sD={origin:"https://api.emailjs.com",blockHeadless:!1},cD=function(e){return e?"string"===typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{}},lD=m((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Network Error";h(this,e),this.status=t,this.text=n})),fD=function(){var e=S(x().mark((function e(t,n){var r,i,a,o,u=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=3,fetch(sD.origin+t,{method:"POST",headers:r,body:n});case 3:return i=e.sent,e.next=6,i.text();case 6:if(a=e.sent,o=new lD(i.status,a),!i.ok){e.next=10;break}return e.abrupt("return",o);case 10:throw o;case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),hD=function(e,t,n){if(!e||"string"!==typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!==typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!==typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},dD=function(e){return e.webdriver||!e.languages||0===e.languages.length},pD=function(){return new lD(451,"Unavailable For Headless Browser")},vD=function(e,t){if(function(e){var t;return!(null!==(t=e.list)&&void 0!==t&&t.length)||!e.watchVariable}(e))return!1;!function(e,t){if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!==typeof t)throw"The BlockList watchVariable has to be a string"}(e.list,e.watchVariable);var n,r,i=(n=t,r=e.watchVariable,n instanceof FormData?n.get(r):n[r]);return"string"===typeof i&&e.list.includes(i)},mD=function(){return new lD(403,"Forbidden")},yD=function(e,t,n){setTimeout((function(){n.removeItem(e)}),t)},gD=function(e,t,n){if(!n.throttle)return!1;!function(e,t){if("number"!==typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!==typeof t)throw"The LimitRate ID has to be a string"}(n.throttle,n.id);var r=n.id||t,i=function(e,t,n){var r=Number(n.getItem(e)||0);return t-Date.now()+r}(r,n.throttle,e);return i>0?(yD(r,i,e),!0):(e.setItem(r,Date.now().toString()),yD(r,n.throttle,e),!1)},wD=function(){return new lD(429,"Too Many Requests")},kD=function(e,t,n,r){var i=cD(r),a=i.publicKey||sD.publicKey,o=i.blockHeadless||sD.blockHeadless,u=fr(fr({},sD.blockList),i.blockList),s=fr(fr({},sD.limitRate),i.limitRate);if(o&&dD(navigator))return Promise.reject(pD());var c=function(e){return"string"===typeof e?document.querySelector(e):e}(n);hD(a,e,t),function(e){if(!e||"FORM"!==e.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"}(c);var l=new FormData(c);return vD(u,l)?Promise.reject(mD()):gD(localStorage,location.pathname,s)?Promise.reject(wD()):(l.append("lib_version","4.1.0"),l.append("service_id",e),l.append("template_id",t),l.append("user_id",a),fD("/api/v1.0/email/send-form",l))},_D=n(221),bD=n.n(_D),xD=function(e){var t=e.setIsVerifed;(0,_D.useTurnstile)();return(0,on.jsx)(bD(),{className:"recapcha",sitekey:"0x4AAAAAAARnopoh6NSYjVv0",onVerify:function(){return t(!0)},onError:function(){return t(!1)}})},ED=function(){var e=(0,i.useRef)(null),t="r-a4WdmKt1jr0njGg",n="service_9k4k603",r="template_wsaffu5",a=f((0,i.useState)({firstName:"",lastName:"",companyName:"",emailAddress:"",phoneNumber:"",message:""}),2),o=a[0],u=a[1],s=f((0,i.useState)(null),2),c=s[0],l=s[1],h=f((0,i.useState)(!1),2),d=h[0],p=h[1],v=f((0,i.useState)(!1),2),m=v[0],y=v[1],g=f((0,i.useState)(!1),2),w=g[0],k=g[1],_=(0,i.useRef)(null),b=function(){var e=S(x().mark((function e(i){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),!c){e.next=9;break}if(!_.current){e.next=8;break}return y(!0),e.next=6,kD(n,r,_.current,{publicKey:t}).then((function(){console.log("SUCCESS!"),y(!1),p(!0),k(!1)}),(function(e){console.log("FAILED...",e.text),y(!1),k(!0)}));case 6:e.next=9;break;case 8:y(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e,t){u(fr(fr({},o),{},C({},e,t)))};return(0,i.useEffect)((function(){if(d){var e=setTimeout((function(){p(!1)}),5e3);return function(){return clearTimeout(e)}}}),[d]),(0,on.jsx)("section",{className:"w-full min-h-[50vh] flex flex-col items-center justify-center my-10 font-inter text-left border-dotted-section pb-10 xl:pb-0",children:(0,on.jsx)("div",{className:"w-full xl:w-[87.5%] h-full flex flex-col sm:flex-row items-center sm:items-start justify-center sm:space-x-10",children:(0,on.jsxs)("form",{ref:_,onSubmit:function(e){return b(e)},className:"flex flex-col items-center justify-start space-y-5 h-full w-[90%] md:w-[80%] lg:w-[40%] mt-10 sm:mt-0",children:[(0,on.jsx)("h1",{className:"text-[20px] sm:text-[25px] lg:text-[30px] font-[700] ",children:"Contact Form"}),(0,on.jsxs)("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-start w-full justify-center my-10 sm:px-0 ",children:[(0,on.jsxs)("div",{className:"flex items-center justify-center space-x-2 m-2",children:[(0,on.jsx)("img",{className:"w-4 h-4 sm:w-auto",src:"/Social-Media-Icons/Email.png",alt:"Email"}),(0,on.jsx)("a",{className:"font-[400] text-[8px] sm:text-[18px]",href:"mailto:contact@ezdatamigration.com",children:"contact@ezdatamigration.com"})]}),(0,on.jsxs)("div",{className:"flex items-center justify-center space-x-2 m-2",children:[(0,on.jsx)("img",{className:"w-4 h-4 sm:w-auto",src:"/Social-Media-Icons/Phone.png",alt:"Phone"}),(0,on.jsx)("a",{className:"font-[400] text-[8px] sm:text-[18px]",href:"tel:+10000000000",children:"0000000000"})]})]}),(0,on.jsxs)("div",{className:"flex items-center justify-between w-full space-x-4 pt-4 md:pt-8",children:[(0,on.jsxs)("div",{className:"w-full flex flex-col border-b-gradient-yellow",children:[(0,on.jsx)("span",{className:"text-gradient-yellow font-[500] font-oswald mb-1 text-[12px] sm:text-[16px]",children:"First Name"}),(0,on.jsx)("input",{onChange:function(e){return E("firstName",e.target.value)},placeholder:"Enter your first name...",required:!0,className:"w-[100%] py-1 mb-1 bg-white transition-all duration-500 text-[10px] focus:text-[12px] sm:text-[16px] sm:focus:text-[18px] focus:outline-none",type:"text",name:"firstName"})]}),(0,on.jsxs)("div",{className:"w-full flex flex-col border-b-gradient-yellow",children:[(0,on.jsx)("span",{className:"text-gradient-yellow font-[500] font-oswald mb-1 text-[12px] sm:text-[16px]",children:"Last Name"}),(0,on.jsx)("input",{onChange:function(e){return E("lastName",e.target.value)},placeholder:"Enter your last name...",required:!0,className:"w-[100%] py-1 mb-1 bg-white transition-all duration-500 text-[10px] focus:text-[12px] sm:text-[16px] sm:focus:text-[18px] focus:outline-none",type:"text",name:"lastName"})]})]}),(0,on.jsxs)("div",{className:"w-full flex flex-col border-b-gradient-yellow",children:[(0,on.jsx)("span",{className:"text-gradient-yellow font-[500] font-oswald mb-1 text-[12px] sm:text-[16px]",children:"Company Name"}),(0,on.jsx)("input",{onChange:function(e){return E("companyName",e.target.value)},placeholder:"Enter your company name...",required:!0,className:" w-[100%] py-1 mb-1 bg-white transition-all duration-500 text-[10px] focus:text-[12px] sm:text-[16px] sm:focus:text-[18px] focus:outline-none",type:"text",name:"companyName"})]}),(0,on.jsxs)("div",{className:"w-full flex flex-col border-b-gradient-yellow",children:[(0,on.jsx)("span",{className:"text-gradient-yellow font-[500] font-oswald mb-1 text-[12px] sm:text-[16px]",children:"Phone number"}),(0,on.jsx)("input",{onChange:function(e){return E("phoneNumber",e.target.value)},type:"phone",placeholder:"Enter your phone number...",required:!0,className:"w-[100%] py-1 mb-1 bg-white transition-all duration-500 text-[10px] focus:text-[12px] sm:text-[16px] sm:focus:text-[18px] focus:outline-none",name:"phoneNumber"})]}),(0,on.jsxs)("div",{className:"w-full flex flex-col border-b-gradient-yellow",children:[(0,on.jsx)("span",{className:"text-gradient-yellow font-[500] font-oswald mb-1 text-[12px] sm:text-[16px]",children:"Email adress"}),(0,on.jsx)("input",{onChange:function(e){return E("emailAddress",e.target.value)},type:"email",placeholder:"Enter your email adress...",required:!0,className:"w-[100%] py-1 mb-1 bg-white transition-all duration-500 text-[10px] focus:text-[12px] sm:text-[16px] sm:focus:text-[18px] focus:outline-none",name:"emailAddress"})]}),(0,on.jsx)("span",{className:"text-gradient-yellow font-[500] font-oswald w-full text-[12px] sm:text-[16px]",children:"Message"}),(0,on.jsx)("div",{className:"w-full flex flex-col border-gradient-yellow p-2",children:(0,on.jsx)("textarea",{ref:e,placeholder:"Enter your message...",rows:9,className:"w-full py-1 mb-1 bg-white focus:outline-none text-[9px] sm:text-[13px]",onInput:function(){var t=e.current;t&&(t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px"))},onChange:function(e){return E("message",e.target.value)},name:"message",required:!0})}),(0,on.jsxs)("div",{className:"flex flex-wrap items-center justify-between w-full ",children:[(0,on.jsx)(xD,{setIsVerifed:l}),(0,on.jsx)("button",{className:"\n              ".concat(m?"!text-white animate-pulse !bg-blue-500":w?"!bg-red-500 !text-white":d?"!bg-green-600 !text-white":"","\n                my-2 rounded-full flex items-center justify-center p-4 px-6 w-full sm:w-auto sm:p-4 text-[13px] whitespace-nowrap bg-black text-white text-center sm:text-[16px] sm:min-w-[236px] font-[600] sm:py-[20px] sm:px-[40.05px] transition-all duration-500 sm:hover:text-[20px] hover:shadow-2xl \n              "),children:(0,on.jsx)("span",{className:"mx-1",children:m?"Loading...":w?"Error, please try again":d?"Message sent successfully":"Send"})})]})]})})})},SD=function(){return(0,on.jsxs)("div",{children:[(0,on.jsx)("section",{className:"w-full xl:min-h-[70vh] flex flex-col items-center justify-center mb-10 mt-16 font-inter text-left border-dotted-section pt-10 xl:pt-0",children:(0,on.jsxs)("div",{className:"w-[90%] sm:w-[80%] lg:w-[67.5%] flex flex-col items-start justify-end",children:[(0,on.jsx)("h1",{className:"font-[700] text-[30px] sm:text-[45px] xl:text-[55px] w-full text-center leading-[60.51px]",children:"Contact Us"}),(0,on.jsx)("p",{className:"font-[400] text-[14px] lg:text-[20px] text-[#00000099] mt-4 lg:mt-10 mb-6 lg:leading-[26px]",children:"We at EZDataMigration are thrilled that you're interested in our top-tier cloud data migration solutions. Whether you're seeking to seamlessly transfer your data from old to new systems, synchronize data from on-premise to the cloud, or need assistance with complex database migrations, EZDataMigration is here to make your data transition a smooth and successful journey."}),(0,on.jsx)("h2",{className:"font-[600] text-[16px] sm:text-[18px] lg:text-[22px]",children:"How Can We Help You?"}),(0,on.jsx)("p",{className:"font-[400] text-[14px] lg:text-[20px] text-[#00000099] lg:leading-[26px]",children:"At EZDataMigration, we specialize in a wide range of cloud data moving services tailored to meet your unique requirements. We're excited to collaborate with you on your cloud data migration journey. If you have questions, need a customized solution, or want to discuss specific requirements, please don't hesitate to contact us."}),(0,on.jsx)("p",{className:"font-[400] text-[14px] lg:text-[20px] text-[#00000099] lg:leading-[26px]",children:"Our team is ready to provide you with expert guidance and a comprehensive understanding of how EZDataMigration can facilitate a seamless transition for your data. Trust us to handle the technical intricacies while you focus on your core business objectives."}),(0,on.jsx)("p",{className:"font-[400] text-[14px] lg:text-[20px] text-[#00000099] lg:leading-[26px]",children:"Call us today and let's migrate your data."})]})}),(0,on.jsx)(ED,{}),(0,on.jsx)(XN,{})]})},CD=function(){var e=xt();return(0,i.useEffect)((function(){window.scrollTo(0,0)}),[e]),null},ID=function(e){var t=e.title,n=e.desc;return(0,on.jsxs)("div",{className:"text-left",children:[(0,on.jsx)("span",{className:"font-[600] text-[14px] sm:text-[22px] sm:leading-[26px]",children:t}),(0,on.jsx)("p",{className:"font-[500] text-[10px] sm:text-[20px] sm:leading-[26px] text-[#00000099] whitespace-pre-wrap",children:n})]})},TD=function(){return(0,on.jsx)("div",{children:(0,on.jsx)("section",{className:"w-full min-h-[110vh] flex flex-col items-center justify-center font-inter py-16 sm:py-48 text-left",children:(0,on.jsxs)("div",{className:"w-[90%] lg:w-[67.5%] flex flex-col items-start justify-end font-inter",children:[(0,on.jsx)("h1",{className:" text-[25px] sm:text-[45px] xl:text-[50px] font-[700] leading-[60.51px] w-full text-center my-5 sm:my-10",children:"Privacy Policy"}),(0,on.jsx)("div",{className:"flex flex-col items-start justify-start space-y-10",children:[{desc:"This privacy policy, together with terms of use and any other document related to it, aims to help you (\u201cclient,\u201d \u201ccustomer\u201d) to understand what information EZDataMigration (\u201cWe,\u201d \u201cUs\u201d) will collect and how it will use it. At EZDataMigration, we strive to help our clients ensure the best quality of their databases by ensuring availability and top-notch technologies for data cleansing, validation, supply, and management.\nWe are committed to ensuring high protection and respect for your privacy, and we comply with any laws and regulations regarding your data and how to deal with it."},{title:"CAREFULLY READY AND UNDERSTAND HOW TO USE OUR SERVICES AND HOW WE COLLECT YOUR DATA."},{title:"Information We Collect",desc:"We shall collect and/or access client data to facilitate the data transfer appropriately and lawfully, according to the applicable data protection regulations. We comply with Iocal data protection laws in every jurisdiction in which we operate. \nThe information we collect may include:\n1. Your name and job title\n2. Contact details, including mobile phone number, email and more. \n3. Company information, including business name, address relating to your business and/ or your role in the company, size, and nature of business, website details related to the business, and the company switchboard."},{title:"How We Collect Data",desc:"EZDataMigration collects the information mentioned above in various ways, including: \n1. From our day-to-day conversation with our clients through phone, emails, and meetings. \n2. Through publicly accessible websites, like the company site and social media. \n3. Buying from lists that legally acquire potential customers that may be interested in your services. \n4. Through shows and similar events."},{title:"How We Use the Information",desc:"EZDataMigration may use the above information in various ways, including:"},{desc:"1. Marketing our products and services through direct marketing means like email, telephone, and direct mail. \n2. Analyzing the data to improve marketing strategies for our services. \n3. Completing obligations from any contracts between us and our clients. \n4. Answering questions and managing credit control/invoicing tasks on your account. \n5. Sending notifications on any changes in our products and services, this privacy policy, or our terms of use"},{title:"Data Storage and Data Security",desc:"We store clients\u2019 data in a central CRM solution and other tools like business email, spreadsheets, mobile phones, and phone systems. The law offers provision for such data to be collected and used legally in the organization's interest, as long as it does not impact the rights of individuals and companies."},{desc:"Regarding any Personal Data that may be part of the data migration process, we/you acknowledge your right to:"},{desc:"1. Have any such data migrated from a third-party platform to your account within the framework of our services?\n2. Disclose such data to EZDataMigration within the framework of our services ordered or when you need technical support.\n3. Allow EZDataMigration to disclose such information of:\n4. Any privacy law enforcement agency\n5. Any other party with the right, in accordance with Data Protection Laws, to acquire such data."},{desc:"EZDataMigration\u2019s business involves acting as a data processor, processing our clients\u2019 data. We do not use this data in any way other than as instructed by our client. Proper technical and organizational measures are taken against unauthorized or unlawful data processing and accidental loss, destruction, or damage to your data."},{title:"Your Rights",desc:"As our client, you have the right to:"},{desc:"1. Request and access information, whether or not our team is processing your personal data, and how and why it is processed.\n2. Object processing of your personal data for marketing purposes.\n3. Obtain correction of any inaccurate data concerning you or your company as processed by EZDataMigration.\n4. Erasure of personal data we hold when it is no longer required."},{title:"Declaimer and Indemnity",desc:"WE ARE NOT LIABLE FOR LOSS OF DATA DURING DATA MIGRATION PROCESS, OR BACKING IT UP, OR ANY FAILURE IN PERFORMANCE, OR ANY OBLIGATION REGARDING MIGRATION SERVICE ORDERS CAUSED BY ANY ACT OR EVENT BEYOND OUR CONTROL. YOU ACCEPT TO INDEMNIFY AND HOLD EZDataMigration AND ITS AFFILIATES HARMLESS FROM ANY AND ALL DIRECT THIRD-PARTY CLAIMS, LIABILITY, AND EXPENSES FROM THE USE OF OUR SERVICES. In our sole discretion and at our own expense, we reserve the right to assume defense and control of any claims."}].map((function(e,t){return(0,on.jsx)(ID,fr({},e),t)}))})]})})})},ND=function(){return(0,on.jsx)("div",{children:(0,on.jsx)("section",{className:"w-full min-h-[100vh] flex flex-col items-center justify-center py-16 sm:py-48 font-inter text-left",children:(0,on.jsxs)("div",{className:"w-[90%] lg:w-[67.5%] flex flex-col items-start justify-end font-inter",children:[(0,on.jsx)("h1",{className:"text-[25px] sm:text-[45px] font-[700] leading-[60.51px] w-full text-center my-5 sm:my-10",children:"Terms and Services"}),(0,on.jsx)("div",{className:"flex flex-col items-start justify-start space-y-10",children:[{title:"Preliminary",desc:"These Data Migration terms of services create the terms and conditions under which you can use our platform and services. As our Client, you must agree to our Data Migration Terms and Privacy Policy when you use our platform and its services. \nThese terms and services from EZDataMigration outline the Client's responsibilities throughout the project. These terms are included and form part of the Agreement with our Client for providing data migration services in an orderly manner after signing the form or provision. \nThese terms of service are only applicable to data migration services."},{title:"PLEASE READ THESE TERMS CAREFULLY TO ENSURE EFFICIENT AND EFFECTIVE SERVICE DELIVERY."},{title:"Client Responsibilities:",desc:"You, our Client, are responsible for the following:"},{desc:"1. To provide EZDataMigration with resources to allow EZDataMigration to deliver Data Migration Services, including but not limited to, wherever possible: account credentials details and everything necessary for accessing client data; access to client system wherever necessary.\n2. Transference of correct database backup version of the backup to EZDataMigration through defined cloud storage services. EZDataMigration is not responsible for creating a backup at the system of record, as it is your responsibility to ensure any data lost during transfer is fully recoverable.\n3. Ensure all information accessed by EZDataMigration is accurate, complete, and updated.\n4. Give complete information on their requirements and expectations in a timely manner when making requests.\n5. Review the migrated data carefully, thoroughly check it, and report on time. Since you understand your business better, you are responsible for identifying data issues.\n6. Understand limiting factors to data migration and work with EZDataMigration for proper solutions.\n7. Ensure that the SQL Backup file is easily restored by any database technology: MySQL, PostgreSQL, Amazon Redshift, or any other. In case the backup file cannot be restored according to the provided methods, the Client will need to ask their system of origin for a file that can be restored.\n8. As much as possible, avoid making any changes to the project tracker fields after the finalized mapping requirements, as any such changes will result in delays and increased costs."},{title:"Our Responsibilities:",desc:"EZDataMigration is responsible for:"},{desc:"1. Performing data migration services using proper technology, care, and skill.\n2. Take every measure to meet any processing or migration times. However, any time communicated by EZDataMigration is majorly an estimate, and any delay in meeting such times does not give the Client service termination unless a reasonable reason for successful migration mentioned in your request and specifications has elapsed.\n3. Keeping the Client\u2019s data safe and confidential during the migration process and providing any related support as requested.\n4. Complying with all applicable laws, statutes, and regulations to ensure sincerity.\n5. Ensuring client satisfaction and delivering efficient data migration services focusing on data security."},{desc:"Client warrants that it has all the legal rights, title, and interest to give EZDataMigration access to its Data, including, wherever possible, direct access to the client portal. We at EZDataMigration are committed to helping our clients achieve high-end data migration quickly and efficiently. THESE TERMS ARE SUBJECT TO LIMITATIONS ON LIABILITY SET FORTH BETWEEN EZDataMigration AND ITS CLIENT IN THE PRIVACY POLICY SECTION."}].map((function(e,t){return(0,on.jsx)(ID,fr({},e),t)}))})]})})})},DD=function(){return(0,on.jsx)("section",{className:"w-full min-h-[100vh] flex flex-col items-center justify-center py-16 sm:py-48 font-inter text-left",children:(0,on.jsxs)("div",{className:"w-[90%] lg:w-[67.5%] flex flex-col items-center justify-center font-oswald",children:[(0,on.jsx)("h1",{className:"text-[40vw] sm:text-[250px]",children:"404"}),(0,on.jsx)("h2",{className:"text-[10vw] sm:text-[50px]",children:"Page not found"})]})})},AD=function(){var e=Ut();return console.log(e),404===e.error?(0,on.jsx)(DD,{}):(0,on.jsx)(on.Fragment,{children:(0,on.jsx)("section",{className:"w-full min-h-[100vh] flex flex-col items-center justify-center py-16 sm:py-48 font-inter text-left",children:(0,on.jsxs)("div",{className:"w-[90%] lg:w-[67.5%] flex flex-col items-center justify-end font-inter text-center",children:[(0,on.jsx)("h1",{className:"text-[16px] sm:text-[45px] font-[700] w-full text-center my-5 sm:my-10",children:e.title}),(0,on.jsx)("p",{className:"font-[400] text-[12px] lg:text-[20px] text-[#00000099] lg:leading-[26px] text-center w-full",children:e.desc}),(0,on.jsx)(un,{title:"MORE SEVICES",className:"sm:py-[20px] sm:px-[40.055px] whitespace-nowrap mt-8 sm:w-[177px] sm:text-[14px] font-[600]",to:"/our-services"})]})})})},PD=function(){var e=S(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=[{title:"Data Migration",desc:"We specialize in migrating your data from your old system to a new one. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",serviceName:"data-migraiton"},{title:"Side by Side Data Synchronization: ",desc:"Transitioning from on-premise to the cloud? Our side-by-side data  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",serviceName:"data-synchronization"},{title:"Database Migration",desc:"Migrating data from PostgreSQL or MySQL to Amazon Redshift?",serviceName:"migration"},{title:"RDS to Aurora Migration",desc:"Upgrade from Amazon RDS to Aurora for enhanced performance and scalability Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",serviceName:"rds-to-aurora-migration"},{title:"EC2/On-premise to RDS Migration",desc:"Moving from EC2 instances or on-premise servers to Amazon RDS?  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",serviceName:"ec2-on-premise-to-rds-migraiton"},{title:"Aurora Setup from Scratch",desc:"Leverage the power of Amazon Aurora with our setup- from-scratch  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",serviceName:"aurora-setup-from-scratch"},{title:"Table Partitioning for PostgreSQL",desc:"Enhance the performance of your PostgreSQL database with our table  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",serviceName:"table-partitioning-for-postgresql"}].find((function(e){return e.serviceName===t})),e.abrupt("return",n||{error:404});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function RD(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var OD=function e(t,n){function r(e,r,i){if("undefined"!==typeof document){"number"===typeof(i=RD({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var o in i)i[o]&&(a+="; "+o,!0!==i[o]&&(a+="="+i[o].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+a}}return Object.create({set:r,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var a=n[i].split("="),o=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(r[u]=t.read(o,u),e===u)break}catch(s){}}return e?r[e]:r}},remove:function(e,t){r(e,"",RD({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,RD({},this.attributes,t))},withConverter:function(t){return e(RD({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),LD=function(){var e=f((0,i.useState)({username:"",password:""}),2),t=e[0],n=e[1],r=f((0,i.useState)(!1),2),a=(r[0],r[1]),o=function(){var e=S(x().mark((function e(n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=2,e.next=5,fetch("".concat(FD,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 5:if(!(r=e.sent).ok){e.next=14;break}return e.next=9,r.json();case 9:i=e.sent,console.log(i.token),i.token?OD.set("authToken",JSON.stringify(i.token),{HttpOnly:!0,secure:!0}):console.error("Token not found in response"),e.next=15;break;case 14:console.error("Failed to login");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.error("Error occurred during login:",e.t0);case 20:e.next=23;break;case 22:console.error("Verification is not completed");case 23:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}();return(0,on.jsx)("main",{className:"h-screen w-full flex items-center justify-center",children:(0,on.jsxs)("form",{onSubmit:function(e){return o(e)},className:"w-[100%] sm:w-[50%] xl:w-1/4 p-4 sm:p-12 border-2 m-4 rounded-lg flex flex-col items-center justify-center",children:[(0,on.jsxs)("div",{className:"w-[100%] flex flex-col items-start justify-center text-left",children:[(0,on.jsx)("span",{className:"py-2 text-[13px] sm:text-lg font-[500]",children:"Username"}),(0,on.jsx)("input",{className:"p-3 w-full text-[13px] sm:text-lg rounded-lg border-2",value:t.username,onChange:function(e){return n(fr(fr({},t),{},{username:e.target.value}))},type:"text",required:!0})]}),(0,on.jsxs)("div",{className:"w-[100%] flex flex-col items-start justify-center text-left",children:[(0,on.jsx)("span",{className:"py-2 text-[13px] sm:text-lg font-[500]",children:"Password"}),(0,on.jsx)("input",{className:"p-3 w-full text-[13px] sm:text-lg rounded-lg border-2",value:t.password,onChange:function(e){return n(fr(fr({},t),{},{password:e.target.value}))},type:"password",required:!0})]}),(0,on.jsx)("div",{className:"my-6",children:(0,on.jsx)(xD,{setIsVerifed:a})}),(0,on.jsx)("button",{className:"py-2 sm:py-4 w-[100%] bg-blue-400 px-8 rounded-lg text-[16px] sm:text-xl font-[500] hover:bg-blue-500 mt-3",children:"Login"})]})})},MD=function(){var e=S(x().mark((function e(){var t,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,YT.collection("sections").get();case 3:return t=e.sent,n={},t.forEach((function(e){var t=e.data();n=fr(fr({},n),{},C({},t.title_key,t))})),console.log(n),e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),FD="http://localhost:3001",jD=function(e,t){return Ce({basename:null==t?void 0:t.basename,future:Yt({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),V((function(e,t){var n=e.location;return j("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:U(t)}),null,n)),hydrationData:(null==t?void 0:t.hydrationData)||Jt(),routes:e,mapRouteProperties:Ht}).initialize();var n}([{path:"/",element:(0,on.jsx)(Wt,{to:"/home"})},{path:"/",element:(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)(CD,{}),(0,on.jsx)(uD,{})]}),loader:MD,children:[{path:"/home",element:(0,on.jsx)(JN,{})},{path:"/about-us",element:(0,on.jsx)(ZN,{})},{path:"/contact-us",element:(0,on.jsx)(SD,{})},{path:"/privacy-policy",element:(0,on.jsx)(TD,{})},{path:"/terms-and-services",element:(0,on.jsx)(ND,{})},{path:"/our-services",children:[{index:!0,element:(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)(GN,{})," ",(0,on.jsx)(XN,{})]})},{path:"*",element:(0,on.jsx)(on.Fragment,{children:"404"})},{path:":serviceName",element:(0,on.jsx)(AD,{}),loader:function(e){var t=e.params;return PD(t.serviceName)}}]},{path:"/our-features",element:(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)(HN,{})," ",(0,on.jsx)(XN,{})]})},{path:"/faqs",element:(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)($N,{})," ",(0,on.jsx)(XN,{})]})}]},{path:"/login",element:(0,on.jsx)(LD,{})}]),UD=Symbol.for("immer-nothing"),qD=Symbol.for("immer-draftable"),VD=Symbol.for("immer-state");function zD(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var BD=Object.getPrototypeOf;function WD(e){return!!e&&!!e[VD]}function KD(e){var t;return!!e&&(QD(e)||Array.isArray(e)||!!e[qD]||!(null===(t=e.constructor)||void 0===t||!t[qD])||JD(e)||ZD(e))}var GD=Object.prototype.constructor.toString();function QD(e){if(!e||"object"!==typeof e)return!1;var t=BD(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===GD}function HD(e,t){0===YD(e)?Object.entries(e).forEach((function(n){var r=f(n,2),i=r[0],a=r[1];t(i,a,e)})):e.forEach((function(n,r){return t(r,n,e)}))}function YD(e){var t=e[VD];return t?t.type_:Array.isArray(e)?1:JD(e)?2:ZD(e)?3:0}function $D(e,t){return 2===YD(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XD(e,t,n){var r=YD(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function JD(e){return e instanceof Map}function ZD(e){return e instanceof Set}function eA(e){return e.copy_||e.base_}function tA(e,t){if(JD(e))return new Map(e);if(ZD(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&QD(e)){if(!BD(e)){var n=Object.create(null);return Object.assign(n,e)}return fr({},e)}var r=Object.getOwnPropertyDescriptors(e);delete r[VD];for(var i=Reflect.ownKeys(r),a=0;a<i.length;a++){var o=i[a],u=r[o];!1===u.writable&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[o]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[o]})}return Object.create(BD(e),r)}function nA(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return iA(e)||WD(e)||!KD(e)||(YD(e)>1&&(e.set=e.add=e.clear=e.delete=rA),Object.freeze(e),t&&HD(e,(function(e,t){return nA(t,!0)}))),e}function rA(){zD(2)}function iA(e){return Object.isFrozen(e)}var aA,oA={};function uA(e){var t=oA[e];return t||zD(0),t}function sA(){return aA}function cA(e,t){t&&(uA("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function lA(e){fA(e),e.drafts_.forEach(dA),e.drafts_=null}function fA(e){e===aA&&(aA=e.parent_)}function hA(e){return aA={drafts_:[],parent_:aA,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dA(e){var t=e[VD];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function pA(e,t){t.unfinalizedDrafts_=t.drafts_.length;var n=t.drafts_[0];return void 0!==e&&e!==n?(n[VD].modified_&&(lA(t),zD(4)),KD(e)&&(e=vA(t,e),t.parent_||yA(t,e)),t.patches_&&uA("Patches").generateReplacementPatches_(n[VD].base_,e,t.patches_,t.inversePatches_)):e=vA(t,n,[]),lA(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==UD?e:void 0}function vA(e,t,n){if(iA(t))return t;var r=t[VD];if(!r)return HD(t,(function(i,a){return mA(e,r,t,i,a,n)})),t;if(r.scope_!==e)return t;if(!r.modified_)return yA(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;var i=r.copy_,a=i,o=!1;3===r.type_&&(a=new Set(i),i.clear(),o=!0),HD(a,(function(t,a){return mA(e,r,i,t,a,n,o)})),yA(e,i,!1),n&&e.patches_&&uA("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function mA(e,t,n,r,i,a,o){if(WD(i)){var u=vA(e,i,a&&t&&3!==t.type_&&!$D(t.assigned_,r)?a.concat(r):void 0);if(XD(n,r,u),!WD(u))return;e.canAutoFreeze_=!1}else o&&n.add(i);if(KD(i)&&!iA(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;vA(e,i),t&&t.scope_.parent_||yA(e,i)}}function yA(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nA(t,n)}var gA={get:function(e,t){if(t===VD)return e;var n=eA(e);if(!$D(n,t))return function(e,t,n){var r,i=_A(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);var r=n[t];return e.finalized_||!KD(r)?r:r===kA(e.base_,t)?(xA(e),e.copy_[t]=SA(r,e)):r},has:function(e,t){return t in eA(e)},ownKeys:function(e){return Reflect.ownKeys(eA(e))},set:function(e,t,n){var r=_A(eA(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){var i=kA(eA(e),t),a=null===i||void 0===i?void 0:i[VD];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,i)&&(void 0!==n||$D(e.base_,t)))return!0;xA(e),bA(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:function(e,t){return void 0!==kA(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,xA(e),bA(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor:function(e,t){var n=eA(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){zD(11)},getPrototypeOf:function(e){return BD(e.base_)},setPrototypeOf:function(){zD(12)}},wA={};function kA(e,t){var n=e[VD];return(n?eA(n):e)[t]}function _A(e,t){if(t in e)for(var n=BD(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=BD(n)}}function bA(e){e.modified_||(e.modified_=!0,e.parent_&&bA(e.parent_))}function xA(e){e.copy_||(e.copy_=tA(e.base_,e.scope_.immer_.useStrictShallowCopy_))}HD(gA,(function(e,t){wA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),wA.deleteProperty=function(e,t){return wA.set.call(this,e,t,void 0)},wA.set=function(e,t,n){return gA.set.call(this,e[0],t,n,e[0])};var EA=function(){function e(t){var n=this;h(this,e),this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=function(e,t,r){if("function"===typeof e&&"function"!==typeof t){var i=t;t=e;var a=n;return function(){for(var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(n,(function(n){var r;return(r=t).call.apply(r,[e,n].concat(o))}))}}var o;if("function"!==typeof t&&zD(6),void 0!==r&&"function"!==typeof r&&zD(7),KD(e)){var u=hA(n),s=SA(e,void 0),c=!0;try{o=t(s),c=!1}finally{c?lA(u):fA(u)}return cA(u,r),pA(o,u)}if(!e||"object"!==typeof e){if(void 0===(o=t(e))&&(o=e),o===UD&&(o=void 0),n.autoFreeze_&&nA(o,!0),r){var l=[],f=[];uA("Patches").generateReplacementPatches_(e,o,l,f),r(l,f)}return o}zD(1)},this.produceWithPatches=function(e,t){if("function"===typeof e)return function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return n.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=n.produce(e,t,(function(e,t){r=e,i=t}));return[a,r,i]},"boolean"===typeof(null===t||void 0===t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),"boolean"===typeof(null===t||void 0===t?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}return m(e,[{key:"createDraft",value:function(e){KD(e)||zD(8),WD(e)&&(e=CA(e));var t=hA(this),n=SA(e,void 0);return n[VD].isManual_=!0,fA(t),n}},{key:"finishDraft",value:function(e,t){var n=e&&e[VD];n&&n.isManual_||zD(9);var r=n.scope_;return cA(r,t),pA(void 0,r)}},{key:"setAutoFreeze",value:function(e){this.autoFreeze_=e}},{key:"setUseStrictShallowCopy",value:function(e){this.useStrictShallowCopy_=e}},{key:"applyPatches",value:function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=uA("Patches").applyPatches_;return WD(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))}}]),e}();function SA(e,t){var n=JD(e)?uA("MapSet").proxyMap_(e,t):ZD(e)?uA("MapSet").proxySet_(e,t):function(e,t){var n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:sA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=r,a=gA;n&&(i=[r],a=wA);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.draft_=s,r.revoke_=u,s}(e,t);return(t?t.scope_:sA()).drafts_.push(n),n}function CA(e){return WD(e)||zD(10),IA(e)}function IA(e){if(!KD(e)||iA(e))return e;var t,n=e[VD];if(n){if(!n.modified_)return n.base_;n.finalized_=!0,t=tA(e,n.scope_.immer_.useStrictShallowCopy_)}else t=tA(e,!0);return HD(t,(function(e,n){XD(t,e,IA(n))})),n&&(n.finalized_=!1),t}var TA=new EA,NA=TA.produce;TA.produceWithPatches.bind(TA),TA.setAutoFreeze.bind(TA),TA.setUseStrictShallowCopy.bind(TA),TA.applyPatches.bind(TA),TA.createDraft.bind(TA),TA.finishDraft.bind(TA);function DA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var AA=function(e){return Array.isArray(e)?e:[e]};function PA(e){var t=Array.isArray(e[0])?e[0]:e;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((function(e){return"function"===typeof e}))){var n=e.map((function(e){return"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e})).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var RA="undefined"!==typeof WeakRef?WeakRef:function(){function e(t){h(this,e),this.value=t}return m(e,[{key:"deref",value:function(){return this.value}}]),e}(),OA=0,LA=1;function MA(){return{s:OA,v:void 0,o:null,p:null}}function FA(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=MA(),i=n.resultEqualityCheck,a=0;function o(){for(var n=r,o=0,u=arguments.length;o<u;o++){var s=arguments[o];if("function"===typeof s||"object"===typeof s&&null!==s){var c=n.o;null===c&&(n.o=c=new WeakMap);var l=c.get(s);void 0===l?(n=MA(),c.set(s,n)):n=l}else{var f=n.p;null===f&&(n.p=f=new Map);var h=f.get(s);void 0===h?(n=MA(),f.set(s,n)):n=h}}var d,p=n;if(n.s===LA?d=n.v:(d=e.apply(null,arguments),a++),p.s=LA,i){var v,m,y,g=null!==(v=null===(m=t)||void 0===m||null===(y=m.deref)||void 0===y?void 0:y.call(m))&&void 0!==v?v:t;null!=g&&i(g,d)&&(d=g,0!==a&&a--),t="object"===typeof d&&null!==d||"function"===typeof d?new RA(d):d}return p.v=d,d}return o.clearCache=function(){r=MA(),o.resetResultsCount()},o.resultsCount=function(){return a},o.resetResultsCount=function(){a=0},o}function jA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a=0,o=0,u={},s=t.pop();"object"===typeof s&&(u=s,s=t.pop()),DA(s,"createSelector expects an output function after the inputs, but received: [".concat(typeof s,"]"));var c=fr(fr({},i),u),l=c.memoize,f=c.memoizeOptions,h=void 0===f?[]:f,d=c.argsMemoize,p=void 0===d?FA:d,v=c.argsMemoizeOptions,m=void 0===v?[]:v,y=(c.devModeChecks,AA(h)),g=AA(m),w=PA(t),k=l.apply(void 0,[function(){return a++,s.apply(null,arguments)}].concat(A(y))),_=p.apply(void 0,[function(){o++;var e=function(e,t){for(var n=[],r=e.length,i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(w,arguments);return r=k.apply(null,e)}].concat(A(g)));return Object.assign(_,{resultFunc:s,memoizedResultFunc:k,dependencies:w,dependencyRecomputations:function(){return o},resetDependencyRecomputations:function(){o=0},lastResult:function(){return r},recomputations:function(){return a},resetRecomputations:function(){a=0},memoize:l,argsMemoize:p})};return Object.assign(a,{withTypes:function(){return a}}),a}var UA=jA(FA),qA=Object.assign((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:UA;!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));var n=Object.keys(e),r=t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t,r){return e[n[r]]=t,e}),{})}));return r}),{withTypes:function(){return qA}});function VA(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var zA=VA(),BA=VA,WA=(function(){var e=jA.apply(void 0,arguments),t=Object.assign((function(){var t=e.apply(void 0,arguments),n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.apply(void 0,[WD(e)?CA(e):e].concat(r))};return Object.assign(n,t),n}),{withTypes:function(){return t}})}(FA),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?PN:PN.apply(null,arguments)}),KA=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,function(e){return e&&"function"===typeof e.match});function GA(e,t){function n(){if(t){var n=t.apply(void 0,arguments);if(!n)throw new Error(kP(0));return fr(fr({type:e,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=function(){return"".concat(e)},n.type=e,n.match=function(t){return function(e){return TN(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e},n}var QA=function(e,t){g(r,e);var n=b(r);function r(){var e;h(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=n.call.apply(n,[this].concat(i)),Object.setPrototypeOf(_(e),r.prototype),e}return m(r,[{key:"concat",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ff(w(r.prototype),"concat",this).apply(this,t)}},{key:"prepend",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?I(r,A(t[0].concat(this))):I(r,A(t.concat(this)))}}],[{key:t,get:function(){return r}}]),r}(T(Array),Symbol.species);function HA(e){return KD(e)?NA(e,(function(){})):e}var YA="RTK_autoBatch",$A=function(e){return function(t){setTimeout(t,e)}},XA="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:$A(10),JA=function(e){return function(t){var n=(null!==t&&void 0!==t?t:{}).autoBatch,r=void 0===n||n,i=new QA(e);return r&&i.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return function(t){return function(){var n=t.apply(void 0,arguments),r=!0,i=!1,a=!1,o=new Set,u="tick"===e.type?queueMicrotask:"raf"===e.type?XA:"callback"===e.type?e.queueNotification:$A(e.timeout),s=function(){a=!1,i&&(i=!1,o.forEach((function(e){return e()})))};return Object.assign({},n,{subscribe:function(e){var t=n.subscribe((function(){return r&&e()}));return o.add(e),function(){t(),o.delete(e)}},dispatch:function(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[YA]),(i=!r)&&(a||(a=!0,u(s))),n.dispatch(e)}finally{r=!0}}})}}}("object"===typeof r?r:void 0)),i}};function ZA(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(!r)throw new Error(kP(28));if(r in n)throw new Error(kP(29));return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function eP(e,t){var n,r=f(ZA(t),3),i=r[0],a=r[1],o=r[2];if(function(e){return"function"===typeof e}(e))n=function(){return HA(e())};else{var u=HA(e);n=function(){return u}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,r=[i[t.type]].concat(A(a.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer}))));return 0===r.filter((function(e){return!!e})).length&&(r=[o]),r.reduce((function(e,n){if(n){if(WD(e)){var r=n(e,t);return void 0===r?e:r}if(KD(e))return NA(e,(function(e){return n(e,t)}));var i=n(e,t);if(void 0===i){if(null===e)return e;throw new Error(kP(9))}return i}return e}),e)}return s.getInitialState=n,s}var tP=function(){for(var e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},nP=function(e,t){return KA(e)?e.match(t):e(t)};function rP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.some((function(t){return nP(t,e)}))}}var iP=["name","message","stack","code"],aP=m((function e(t,n){h(this,e),C(this,"_type",void 0),this.payload=t,this.meta=n})),oP=m((function e(t,n){h(this,e),C(this,"_type",void 0),this.payload=t,this.meta=n})),uP=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=iP;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},sP=function(){function e(e,t,n){var r=GA(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:fr(fr({},r||{}),{},{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=GA(e+"/pending",(function(e,t,n){return{payload:void 0,meta:fr(fr({},n||{}),{},{arg:t,requestId:e,requestStatus:"pending"})}})),a=GA(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||uP)(e||"Rejected"),meta:fr(fr({},a||{}),{},{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null===e||void 0===e?void 0:e.name),condition:"ConditionError"===(null===e||void 0===e?void 0:e.name)})}}));return Object.assign((function(e){return function(o,u,s){var c,l,f=null!==n&&void 0!==n&&n.idGenerator?n.idGenerator(e):tP(),h=new AbortController;function d(e){l=e,h.abort()}var p=S(x().mark((function p(){var v,m,y,g,w;return x().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(p.prev=0,g=null===n||void 0===n||null===(m=n.condition)||void 0===m?void 0:m.call(n,e,{getState:u,extra:s}),null===(k=g)||"object"!==typeof k||"function"!==typeof k.then){p.next=6;break}return p.next=5,g;case 5:g=p.sent;case 6:if(!1!==g&&!h.signal.aborted){p.next=8;break}throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};case 8:return w=new Promise((function(e,t){c=function(){t({name:"AbortError",message:l||"Aborted"})},h.signal.addEventListener("abort",c)})),o(i(f,e,null===n||void 0===n||null===(y=n.getPendingMeta)||void 0===y?void 0:y.call(n,{requestId:f,arg:e},{getState:u,extra:s}))),p.next=12,Promise.race([w,Promise.resolve(t(e,{dispatch:o,getState:u,extra:s,requestId:f,signal:h.signal,abort:d,rejectWithValue:function(e,t){return new aP(e,t)},fulfillWithValue:function(e,t){return new oP(e,t)}})).then((function(t){if(t instanceof aP)throw t;return t instanceof oP?r(t.payload,f,e,t.meta):r(t,f,e)}))]);case 12:v=p.sent,p.next=18;break;case 15:p.prev=15,p.t0=p.catch(0),v=p.t0 instanceof aP?a(null,f,e,p.t0.payload,p.t0.meta):a(p.t0,f,e);case 18:return p.prev=18,c&&h.signal.removeEventListener("abort",c),p.finish(18);case 21:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||o(v),p.abrupt("return",v);case 24:case"end":return p.stop()}var k}),p,null,[[0,15,18,21]])})))();return Object.assign(p,{abort:d,requestId:f,arg:e,unwrap:function(){return p.then(cP)}})}}),{pending:i,rejected:a,fulfilled:r,settled:rP(a,r),typePrefix:e})}return e.withTypes=function(){return e},e}();function cP(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var lP=Symbol.for("rtk-slice-createasyncthunk");C({},lP,sP);var fP="listener",hP="completed",dP="cancelled",pP=("task-".concat(dP),"task-".concat(hP),"".concat(fP,"-").concat(dP),"".concat(fP,"-").concat(hP),function(e,t){if("function"!==typeof e)throw new Error(kP(32))});Object.assign;var vP="listenerMiddleware",mP=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,a=e.effect;if(t)i=GA(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(kP(21));return pP(a),{predicate:i,type:t,effect:a}},yP=Object.assign((function(e){var t=mP(e),n=t.type,r=t.predicate,i=t.effect;return{id:tP(),effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error(kP(22))}}}),{withTypes:function(){return yP}}),gP=Object.assign(GA("".concat(vP,"/add")),{withTypes:function(){return gP}}),wP=(GA("".concat(vP,"/removeAll")),Object.assign(GA("".concat(vP,"/remove")),{withTypes:function(){return wP}}));Symbol.for("rtk-state-proxy-original");function kP(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var _P=function(e){var t,n,r=function(e){var t=null!==e&&void 0!==e?e:{},n=t.thunk,r=void 0===n||n,i=(t.immutableCheck,t.serializableCheck,t.actionCreatorCheck,new QA);return r&&(function(e){return"boolean"===typeof e}(r)?i.push(zA):i.push(BA(r.extraArgument))),i},i=e||{},a=i.reducer,o=void 0===a?void 0:a,u=i.middleware,s=i.devTools,c=void 0===s||s,l=i.preloadedState,f=void 0===l?void 0:l,h=i.enhancers,d=void 0===h?void 0:h;if("function"===typeof o)t=o;else{if(!TN(o))throw new Error(kP(1));t=DN(o)}n="function"===typeof u?u(r):r();var p=PN;c&&(p=WA(fr({trace:!1},"object"===typeof c&&c)));var v=RN.apply(void 0,A(n)),m=JA(v),y="function"===typeof d?d(m):m();return NN(t,f,p.apply(void 0,A(y)))}({reducer:DN({sections:eP({sections:{},isChangeMode:!1},(function(e){e.addCase("SET_SECTIONS",(function(e,t){var n=t.payload;e.sections=n})).addCase("CHANGE_SECTION",(function(e,t){var n=t.payload;e.sections[n.title_key]=n})).addCase("SET_IS_CHANGE_MODE",(function(e,t){var n=t.payload;e.isChangeMode=n})).addCase("SET_SECTION_FIELD",(function(e,t){var n=t.payload;e.sections[n.title_key][n.fieldName]=n.value}))}))})}),bP=function(){return(0,on.jsx)(on.Fragment,{children:(0,on.jsx)(gN,{store:_P,children:(0,on.jsx)(zt,{router:jD})})})};o.createRoot(document.getElementById("root")).render((0,on.jsx)(bP,{}))}()}();
//# sourceMappingURL=main.a8c43143.js.map